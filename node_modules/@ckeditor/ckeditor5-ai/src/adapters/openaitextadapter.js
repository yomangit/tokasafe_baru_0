/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2721c3=_0x4078;(function(_0x51b34f,_0x593afa){const _0xe527e9=_0x4078,_0xaac7be=_0x51b34f();while(!![]){try{const _0x29e8a6=-parseInt(_0xe527e9(0x1c0))/0x1+parseInt(_0xe527e9(0x1ab))/0x2*(-parseInt(_0xe527e9(0x1b7))/0x3)+parseInt(_0xe527e9(0x1ea))/0x4+parseInt(_0xe527e9(0x1ae))/0x5+parseInt(_0xe527e9(0x1ca))/0x6*(parseInt(_0xe527e9(0x1be))/0x7)+-parseInt(_0xe527e9(0x1c7))/0x8*(-parseInt(_0xe527e9(0x1e9))/0x9)+parseInt(_0xe527e9(0x1d4))/0xa*(-parseInt(_0xe527e9(0x1d6))/0xb);if(_0x29e8a6===_0x593afa)break;else _0xaac7be['push'](_0xaac7be['shift']());}catch(_0x34d6ad){_0xaac7be['push'](_0xaac7be['shift']());}}}(_0x2cc0,0xb2b8f));import{default as _0x17eef7}from'./aitextadapter.js';function _0x2cc0(){const _0x11ae20=['3158680SjjJKN','_apiUrl','replace','_readStaticResponse','OpenAITextAdapter','_isBufferIncomplete','locale','filter','24BkTUfb','editor','sendRequest','2101085xWqZte','getReader','body','_cleanUpData','read','decode','includes','delta','prepareMessages','137253VQGiJs','[DONE]','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','data:\x20','system','_requestParameters','AI_ERROR_CONTEXT_LENGTH','213122NbSRhZ','map','579297kdGvgh','context_length_exceeded','user','_requestHeaders','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','reject','ai.openAI.apiUrl','1985288oFYUMj','text','abortController','210uIuIDQ','gpt-3.5-turbo','parse','stream','ai.openAI.requestParameters','signal','Moderation','_readStreamableResponse','stringify','AI_ERROR_MODERATION','6633020EzIkWg','config','11rifWxL','choices','define','join','ai.openAI.requestHeaders','_prepareRequestParameters','Instruction:\x0a','POST','content','_prepareRequestHeaders','get','split','message','json','pluginName','resolve','length','https://api.openai.com/v1/chat/completions','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','9WQxCGd'];_0x2cc0=function(){return _0x11ae20;};return _0x2cc0();}import{AIRequestError as _0x30de03}from'./aiadapter.js';import{getTranslation as _0x39b981}from'../utils/common-translations.js';function _0x4078(_0x213e72,_0x2a8abe){const _0x2cc0d2=_0x2cc0();return _0x4078=function(_0x40788f,_0x4e0d9e){_0x40788f=_0x40788f-0x1a4;let _0x68015a=_0x2cc0d2[_0x40788f];return _0x68015a;},_0x4078(_0x213e72,_0x2a8abe);}export default class H extends _0x17eef7{static get[_0x2721c3(0x1e4)](){const _0x36c8d6=_0x2721c3;return _0x36c8d6(0x1a7);}constructor(_0x393e09){const _0x178ea5=_0x2721c3;super(_0x393e09),_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1d8)](_0x178ea5(0x1c6),_0x178ea5(0x1e7)),_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1e0)](_0x178ea5(0x1ce))||_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1d8)](_0x178ea5(0x1ce),{'model':_0x178ea5(0x1cb),'max_tokens':0x7d0,'temperature':0x1,'top_p':0x1,'stream':!0x0}),this[_0x178ea5(0x1a4)]=_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1e0)](_0x178ea5(0x1c6)),this[_0x178ea5(0x1c3)]=_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1e0)](_0x178ea5(0x1da))||{},this[_0x178ea5(0x1bc)]=_0x393e09[_0x178ea5(0x1d5)][_0x178ea5(0x1e0)](_0x178ea5(0x1ce));}async[_0x2721c3(0x1ad)]({query:_0x1fb023,context:_0x3232c0,onData:_0x38c9bd,actionId:_0x5e0229}){const _0x22deed=_0x2721c3,_0x51cc43=this[_0x22deed(0x1ac)][_0x22deed(0x1a9)],_0x9e03e6=await this[_0x22deed(0x1b6)](_0x1fb023,_0x3232c0,_0x5e0229),_0x277fee=await this[_0x22deed(0x1df)](this[_0x22deed(0x1c3)],_0x5e0229),_0x4eb683=await this[_0x22deed(0x1db)](this[_0x22deed(0x1bc)],_0x5e0229),_0x1f271a={'messages':_0x9e03e6,..._0x4eb683},_0x43fa7d={'method':_0x22deed(0x1dd),'headers':_0x277fee,'body':JSON[_0x22deed(0x1d2)](_0x1f271a),'signal':this[_0x22deed(0x1c9)][_0x22deed(0x1cf)]},_0xbbd4fe=await fetch(this[_0x22deed(0x1a4)],_0x43fa7d);if(_0xbbd4fe['ok'])return _0x4eb683[_0x22deed(0x1cd)]?await this[_0x22deed(0x1d1)](_0xbbd4fe,_0x38c9bd):await this[_0x22deed(0x1a6)](_0xbbd4fe,_0x38c9bd),Promise[_0x22deed(0x1e5)]();{const _0x56ad99=await _0xbbd4fe[_0x22deed(0x1c8)]();return _0x56ad99[_0x22deed(0x1b4)](_0x22deed(0x1c1))?Promise[_0x22deed(0x1c5)](new _0x30de03(_0x39b981(_0x51cc43,_0x22deed(0x1bd)))):_0x56ad99[_0x22deed(0x1b4)](_0x22deed(0x1d0))?Promise[_0x22deed(0x1c5)](new _0x30de03(_0x39b981(_0x51cc43,_0x22deed(0x1d3)))):Promise[_0x22deed(0x1c5)](new Error(_0x56ad99));}}async[_0x2721c3(0x1b6)](_0x15b06f,_0x3d6a45,_0x48f4ff){const _0x1b388c=_0x2721c3;let _0x2a9c0d,_0x4f8cad;return _0x3d6a45?(_0x2a9c0d=_0x1b388c(0x1e8),_0x4f8cad=_0x1b388c(0x1dc)+_0x15b06f+_0x1b388c(0x1c4)+_0x3d6a45):(_0x2a9c0d=_0x1b388c(0x1b9),_0x4f8cad=_0x15b06f),[{'role':_0x1b388c(0x1bb),'content':_0x2a9c0d},{'role':_0x1b388c(0x1c2),'content':_0x4f8cad}];}async[_0x2721c3(0x1d1)](_0x564808,_0x118426){const _0x3b9843=_0x2721c3,_0x4a8146=_0x564808[_0x3b9843(0x1b0)][_0x3b9843(0x1af)](),_0xcf00b0=new TextDecoder();let _0x10649b='',_0x251127='',_0x21e549='',_0x2c98b3=!0x1;for(;!_0x2c98b3;){const {done:_0x39fe94,value:_0x9413e3}=await _0x4a8146[_0x3b9843(0x1b2)](),_0x44be25=_0x10649b+_0xcf00b0[_0x3b9843(0x1b3)](_0x9413e3);let _0x1f5b45='';_0x2c98b3=_0x39fe94;try{_0x1f5b45=this[_0x3b9843(0x1b1)](_0x44be25),_0x10649b='';}catch(_0x4f48ab){_0x10649b=_0x44be25;continue;}_0x251127+=_0x1f5b45,!_0x2c98b3&&this[_0x3b9843(0x1a8)](_0x251127)||_0x251127&&(_0x21e549+=_0x251127,_0x251127='',_0x118426(_0x21e549));}return Promise[_0x3b9843(0x1e5)]();}async[_0x2721c3(0x1a6)](_0x402334,_0x54c0fe){const _0x2bc4b3=_0x2721c3;return _0x54c0fe((await _0x402334[_0x2bc4b3(0x1e3)]())[_0x2bc4b3(0x1d7)][0x0][_0x2bc4b3(0x1e2)][_0x2bc4b3(0x1de)]),Promise[_0x2bc4b3(0x1e5)]();}[_0x2721c3(0x1a8)](_0x2cc9a9){const _0x4665df=_0x2721c3,_0x35a410=_0x2cc9a9[_0x4665df(0x1e1)]('<')[_0x4665df(0x1e6)]!==_0x2cc9a9[_0x4665df(0x1e1)]('>')[_0x4665df(0x1e6)],_0x27d64e=_0x2cc9a9[_0x4665df(0x1e6)]<0x1e;return _0x35a410&&_0x27d64e;}[_0x2721c3(0x1b1)](_0x553c78){const _0xd18e7d=_0x2721c3;return _0x553c78[_0xd18e7d(0x1e1)](/\n(?![^{]*\})/g)[_0xd18e7d(0x1bf)](_0x11a1e3=>_0x11a1e3[_0xd18e7d(0x1a5)](_0xd18e7d(0x1ba),''))[_0xd18e7d(0x1aa)](_0x281fd9=>_0x281fd9&&_0x281fd9[_0xd18e7d(0x1e6)]>0x0&&_0xd18e7d(0x1b8)!==_0x281fd9)[_0xd18e7d(0x1bf)](_0x37211a=>{const _0x2a3e11=_0xd18e7d,{choices:_0xb4ec8a}=JSON[_0x2a3e11(0x1cc)](_0x37211a);if(_0xb4ec8a[0x0]&&_0xb4ec8a[0x0][_0x2a3e11(0x1b5)]&&_0xb4ec8a[0x0][_0x2a3e11(0x1b5)][_0x2a3e11(0x1de)])return _0xb4ec8a[0x0][_0x2a3e11(0x1b5)][_0x2a3e11(0x1de)];})[_0xd18e7d(0x1aa)](_0x15fa15=>_0x15fa15)[_0xd18e7d(0x1d9)]('');}}