/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x21254e=_0x4a9c;(function(_0x104d32,_0x322593){const _0x28beff=_0x4a9c,_0x59e521=_0x104d32();while(!![]){try{const _0x34586a=-parseInt(_0x28beff(0x13f))/0x1*(-parseInt(_0x28beff(0x129))/0x2)+-parseInt(_0x28beff(0x172))/0x3*(parseInt(_0x28beff(0x12f))/0x4)+parseInt(_0x28beff(0x166))/0x5*(parseInt(_0x28beff(0x126))/0x6)+-parseInt(_0x28beff(0x135))/0x7*(parseInt(_0x28beff(0x130))/0x8)+-parseInt(_0x28beff(0x159))/0x9*(-parseInt(_0x28beff(0x15a))/0xa)+parseInt(_0x28beff(0x140))/0xb+-parseInt(_0x28beff(0x146))/0xc*(-parseInt(_0x28beff(0x155))/0xd);if(_0x34586a===_0x322593)break;else _0x59e521['push'](_0x59e521['shift']());}catch(_0x4dccb3){_0x59e521['push'](_0x59e521['shift']());}}}(_0x2897,0x62fca));function _0x4a9c(_0x390495,_0x6d8095){const _0x289704=_0x2897();return _0x4a9c=function(_0x4a9cde,_0x5d7690){_0x4a9cde=_0x4a9cde-0x124;let _0x8abf0b=_0x289704[_0x4a9cde];return _0x8abf0b;},_0x4a9c(_0x390495,_0x6d8095);}import{default as _0x1b6341}from'./aitextadapter.js';import{AIRequestError as _0x4de9f8}from'./aiadapter.js';import{BedrockRuntimeClient as _0x18b27c,InvokeModelCommand as _0x2dec2d,InvokeModelWithResponseStreamCommand as _0x1ee6eb}from'@aws-sdk/client-bedrock-runtime';import{getTranslation as _0x3f8167}from'../utils/common-translations.js';function _0x2897(){const _0x1a0824=['getModelFamily','5AYSOkL','ai21.j2','_processProxyRequest','_readStaticResponse','locale','define','text','chunk','send','POST','body','json','6yhiGDk','_getGeneratedText','join','ai.aws.bedrockClientConfig','parse','sendRequest','test','_processAWSRequest','resolve','ai.aws.apiUrl','2395002wTbSyT','completion','_readStreamableResponse','2YyZLgu','\x0a[/INST]','utf8','abortController','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','ai.aws.requestParameters','2500fmQngN','3103720ZNjDRm','data','bedrock-2023-05-31','<<SYS>>\x0a','decode','14CoxoVg','getReader','stringify','completions','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','pluginName','meta.llama','cohere.command','_bedrockClientConfig','from','236441DdBnhb','764566ExsyDC','_requestParameters','generation','filter','length','anthropic.claude-v2','12cEOoRH','\x0a<</SYS>>\x0a[INST]\x0a','split','AI_ERROR_UNSUPPORTED_MODEL','_apiUrl','Instruction:\x0a','_prepareRequestParameters','application/json','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','ai.aws.requestHeaders','signal','toString','AWSTextAdapter','map','preparePrompt','3239587RPSCQH','read','_requestHeaders','editor','70857AkzGCQ','290sjyWXj','anthropic.claude','Human:\x0a','_readAsyncIterableResponse','generations','config','bytes','utf-8','\x0a\x0aAssistant:','_prepareRequestHeaders','get'];_0x2897=function(){return _0x1a0824;};return _0x2897();}export default class O extends _0x1b6341{static get[_0x21254e(0x13a)](){const _0x311280=_0x21254e;return _0x311280(0x152);}constructor(_0x9ae0a7){const _0x534b95=_0x21254e;super(_0x9ae0a7),_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x164)](_0x534b95(0x12e))||_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x16b)](_0x534b95(0x12e),{'model':_0x534b95(0x145),'max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':_0x534b95(0x132),'stream':!0x0}),this[_0x534b95(0x14a)]=_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x164)](_0x534b95(0x125)),this[_0x534b95(0x13d)]=_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x164)](_0x534b95(0x175)),this[_0x534b95(0x157)]=_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x164)](_0x534b95(0x14f)),this[_0x534b95(0x141)]=_0x9ae0a7[_0x534b95(0x15f)][_0x534b95(0x164)](_0x534b95(0x12e));}async[_0x21254e(0x177)]({query:_0x3e700b,context:_0x1bf28e,onData:_0x5c9dcd,actionId:_0x4c631a}){const _0x5e7870=_0x21254e,{model:_0x5182c7,stream:_0x5dd9a0,..._0x9aa6db}=await this[_0x5e7870(0x14c)](this[_0x5e7870(0x141)],_0x4c631a),_0x46fd0b={'prompt':await this[_0x5e7870(0x154)](_0x3e700b,_0x1bf28e,_0x5182c7,_0x4c631a),..._0x9aa6db};this[_0x5e7870(0x14a)]?await this[_0x5e7870(0x168)](_0x46fd0b,_0x5182c7,_0x5dd9a0,_0x5c9dcd,_0x4c631a):await this[_0x5e7870(0x179)](_0x46fd0b,_0x5182c7,_0x5dd9a0,_0x5c9dcd);}async[_0x21254e(0x154)](_0x21ea9a,_0x22eca2,_0x375335,_0x17c656){const _0x53003d=_0x21254e;let _0x450f2c,_0x5cad3e;return _0x22eca2?(_0x450f2c=_0x53003d(0x14e),_0x5cad3e=_0x53003d(0x14b)+_0x21ea9a+_0x53003d(0x12d)+_0x22eca2):(_0x450f2c=_0x53003d(0x139),_0x5cad3e=_0x21ea9a),_0x53003d(0x13b)==this[_0x53003d(0x165)](_0x375335)?_0x53003d(0x133)+_0x450f2c+_0x53003d(0x147)+_0x5cad3e+_0x53003d(0x12a):_0x53003d(0x15c)+_0x450f2c+'\x0a'+_0x5cad3e+_0x53003d(0x162);}[_0x21254e(0x165)](_0x1b1761){const _0x3e33ef=_0x21254e;if(/^anthropic\.claude/[_0x3e33ef(0x178)](_0x1b1761))return _0x3e33ef(0x15b);if(/^ai21\.j2/[_0x3e33ef(0x178)](_0x1b1761))return _0x3e33ef(0x167);if(/^cohere\.command/[_0x3e33ef(0x178)](_0x1b1761))return _0x3e33ef(0x13c);if(/^meta\.llama/[_0x3e33ef(0x178)](_0x1b1761))return _0x3e33ef(0x13b);throw new _0x4de9f8(_0x3f8167(this[_0x3e33ef(0x158)][_0x3e33ef(0x16a)],_0x3e33ef(0x149),_0x1b1761));}async[_0x21254e(0x168)](_0x443695,_0x4c5a1c,_0x572c40,_0x144992,_0xbbf6b0){const _0x4228ba=_0x21254e,_0x2fd040={'method':_0x4228ba(0x16f),'headers':await this[_0x4228ba(0x163)](this[_0x4228ba(0x157)],_0xbbf6b0),'body':JSON[_0x4228ba(0x137)]({..._0x443695,'model':_0x4c5a1c,'stream':_0x572c40}),'signal':this[_0x4228ba(0x12c)][_0x4228ba(0x150)]},_0x30b386=await fetch(this[_0x4228ba(0x14a)],_0x2fd040);_0x572c40?await this[_0x4228ba(0x128)](_0x30b386,_0x4c5a1c,_0x144992):await this[_0x4228ba(0x169)](_0x30b386,_0x4c5a1c,_0x144992);}async[_0x21254e(0x179)](_0x1e68a7,_0x318c01,_0x5d708a,_0xcfd514){const _0x556765=_0x21254e,_0x42a0cf=new _0x18b27c(this[_0x556765(0x13d)]),_0x543d6f={'body':JSON[_0x556765(0x137)](_0x1e68a7),'contentType':_0x556765(0x14d),'accept':_0x556765(0x14d),'modelId':_0x318c01};let _0x234dbd;if(_0x5d708a){const _0x230f91=new _0x1ee6eb(_0x543d6f);_0x234dbd=await _0x42a0cf[_0x556765(0x16e)](_0x230f91,{'abortSignal':this[_0x556765(0x12c)][_0x556765(0x150)]}),await this[_0x556765(0x15d)](_0x234dbd,_0x318c01,_0xcfd514);}else{const _0x465a4b=new _0x2dec2d(_0x543d6f);_0x234dbd=await _0x42a0cf[_0x556765(0x16e)](_0x465a4b,{'abortSignal':this[_0x556765(0x12c)][_0x556765(0x150)]}),await this[_0x556765(0x169)](_0x234dbd,_0x318c01,_0xcfd514);}}async[_0x21254e(0x15d)](_0x3be028,_0x5ac048,_0x289b8){const _0x5273e3=_0x21254e,_0xf58fc3=_0x3be028[_0x5273e3(0x170)],_0x3d163d=new TextDecoder(_0x5273e3(0x161));let _0x3589cc='';for await(const _0x27284b of _0xf58fc3)if(_0x27284b[_0x5273e3(0x16d)]){const _0x1f9e30=_0x3d163d[_0x5273e3(0x134)](_0x27284b[_0x5273e3(0x16d)][_0x5273e3(0x160)]),_0x36303f=JSON[_0x5273e3(0x176)](_0x1f9e30);_0x3589cc+=this[_0x5273e3(0x173)](_0x36303f,_0x5ac048),_0x289b8(_0x3589cc);}return Promise[_0x5273e3(0x124)]();}async[_0x21254e(0x128)](_0x2a785a,_0x2aa51b,_0x2744d9){const _0x598d67=_0x21254e,_0x219e69=_0x2a785a[_0x598d67(0x170)],_0x2bfbad=new TextDecoder(_0x598d67(0x161)),_0x3144c1=_0x219e69[_0x598d67(0x136)]();let _0x1b255a='',_0x15b534='',_0x5c1b36=!0x1;for(;!_0x5c1b36;){const {done:_0x389b08,value:_0x11983c}=await _0x3144c1[_0x598d67(0x156)]();if(_0x5c1b36=_0x389b08,_0x5c1b36)break;const _0xc772df=(_0x1b255a+_0x2bfbad[_0x598d67(0x134)](_0x11983c))[_0x598d67(0x148)]('\x0a')[_0x598d67(0x153)](_0x2853e5=>{const _0x1e366b=_0x598d67;try{return _0x1b255a='',JSON[_0x1e366b(0x176)](_0x2853e5);}catch(_0x2bfd7){return _0x1b255a=_0x2853e5,null;}})[_0x598d67(0x143)](_0x29407e=>null!==_0x29407e);_0xc772df[_0x598d67(0x144)]&&(_0x15b534+=_0xc772df[_0x598d67(0x153)](_0x227d6a=>this[_0x598d67(0x173)](_0x227d6a,_0x2aa51b))[_0x598d67(0x174)](''),_0x2744d9(_0x15b534));}return Promise[_0x598d67(0x124)]();}async[_0x21254e(0x169)](_0x7cf55f,_0x3370a3,_0x1fb6c5){const _0x59b3d7=_0x21254e;let _0x84d987;return _0x84d987=_0x7cf55f instanceof Response?await _0x7cf55f[_0x59b3d7(0x171)]():JSON[_0x59b3d7(0x176)](Buffer[_0x59b3d7(0x13e)](_0x7cf55f[_0x59b3d7(0x170)])[_0x59b3d7(0x151)](_0x59b3d7(0x12b))),(_0x1fb6c5(this[_0x59b3d7(0x173)](_0x84d987,_0x3370a3)),Promise[_0x59b3d7(0x124)]());}[_0x21254e(0x173)](_0x16964d,_0x47670e){const _0x26a77c=_0x21254e;switch(this[_0x26a77c(0x165)](_0x47670e)){case _0x26a77c(0x15b):return _0x16964d[_0x26a77c(0x127)];case _0x26a77c(0x167):return _0x16964d[_0x26a77c(0x138)][0x0][_0x26a77c(0x131)][_0x26a77c(0x16c)];case _0x26a77c(0x13c):return _0x16964d[_0x26a77c(0x15e)][0x0][_0x26a77c(0x16c)];case _0x26a77c(0x13b):return _0x16964d[_0x26a77c(0x142)];}}}