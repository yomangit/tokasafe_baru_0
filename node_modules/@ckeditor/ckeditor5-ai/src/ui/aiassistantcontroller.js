/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x419af2=_0x48b0;(function(_0x2b976d,_0x5c5b28){const _0x22dda4=_0x48b0,_0x4d513c=_0x2b976d();while(!![]){try{const _0x13bf4c=parseInt(_0x22dda4(0x66))/0x1*(-parseInt(_0x22dda4(0x99))/0x2)+parseInt(_0x22dda4(0xa3))/0x3*(parseInt(_0x22dda4(0xc4))/0x4)+parseInt(_0x22dda4(0x9e))/0x5+parseInt(_0x22dda4(0xa5))/0x6*(parseInt(_0x22dda4(0x67))/0x7)+parseInt(_0x22dda4(0xb6))/0x8*(parseInt(_0x22dda4(0xa1))/0x9)+-parseInt(_0x22dda4(0xab))/0xa*(parseInt(_0x22dda4(0xa4))/0xb)+-parseInt(_0x22dda4(0x73))/0xc;if(_0x13bf4c===_0x5c5b28)break;else _0x4d513c['push'](_0x4d513c['shift']());}catch(_0x2f4a89){_0x4d513c['push'](_0x4d513c['shift']());}}}(_0x3189,0x64e19));import{ObservableMixin as _0x5fd9ec}from'ckeditor5/src/utils.js';function _0x3189(){const _0x13421b=['rename','2753660YYlUFB','querySelector','isProcessing','89595lWRuWF','<h1></h1>','5862EZrdUH','4206510YPeaSF','1525110MHhvLx','destroy','viewToDom','htmlProcessor','custom','previousQuery','10tPpjTy','stopProcessing','```html','startsWith','view','previousContext','ELEMENT_NODE','div','nodeType','stringify','currentResponse','32lgwVZp','once','_parseAndNormalizeContent','updateView','message','length','previousActionId','_isH1TagSupportEnabled','finally','_normalizeResponseHeadings','from','textAdapter','abort','prompt','1264bPSysx','exec','render','1RYFMOD','7KaLaAi','makeRequest','serializeToString','text/html','value','handleError','element','set','innerHTML','currentContext','submitPrompt','_stripMarkdownSyntax','2794752CZvqam','mainAction','push','```','toModel','_handleQuery','toView','finishProcessing','_sanitizeHTML','endsWith','data','startProcessing','name','catch','parseFromString','match','set:currentContext','listenTo','body','_domParser','setContentOf','stopListening','childNodes','_xmlSerializer','_sanitizationContainer','initialContext','isRendered','processor','createElement','reset','editor','then','previousLabel','reverse','remove','document','editing','domConverter','867372WAlTnf','trim','substring','tryAgainEvent'];_0x3189=function(){return _0x13421b;};return _0x3189();}import{AIRequestError as _0x4d9fe6}from'../adapters/aiadapter.js';import{Matcher as _0x2da2ee,UpcastWriter as _0x5a82e5}from'ckeditor5/src/engine.js';const Z=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');function _0x48b0(_0x1ae779,_0x30aced){const _0x318960=_0x3189();return _0x48b0=function(_0x48b0ad,_0x101bb8){_0x48b0ad=_0x48b0ad-0x64;let _0x1e3af2=_0x318960[_0x48b0ad];return _0x1e3af2;},_0x48b0(_0x1ae779,_0x30aced);}export default class v extends/* #__PURE__ -- @preserve */
_0x5fd9ec(){constructor(_0x3ecbd4,_0x92587d,_0x4fa14f){const _0x41a46d=_0x48b0;super(),this[_0x41a46d(0x91)]=_0x3ecbd4,this[_0x41a46d(0xc1)]=_0x92587d,this[_0x41a46d(0x8b)]=document[_0x41a46d(0x8f)](_0x41a46d(0xb2)),this[_0x41a46d(0x86)]=new DOMParser(),this[_0x41a46d(0x8a)]=new XMLSerializer(),this[_0x41a46d(0xaf)]=_0x4fa14f,this[_0x41a46d(0x6e)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x41a46d(0x83),(_0x547ade,_0x35304c,_0x5d21e2)=>{const _0x297bf3=_0x41a46d;this[_0x297bf3(0xaf)][_0x297bf3(0x6b)]=this[_0x297bf3(0x7b)](_0x5d21e2);}),this[_0x41a46d(0x84)](this[_0x41a46d(0xaf)],_0x41a46d(0x71),(_0x329ff1,_0x428e52)=>{const _0x288245=_0x41a46d,_0x50ef4b=this[_0x288245(0x70)]||this[_0x288245(0x8c)];this[_0x288245(0x78)](_0x428e52,_0x50ef4b,_0x288245(0xa9));}),this[_0x41a46d(0x84)](this[_0x41a46d(0xaf)],_0x41a46d(0x9c),()=>{const _0xa8d698=_0x41a46d;this[_0xa8d698(0xaf)][_0xa8d698(0xc3)]=this[_0xa8d698(0x93)],this[_0xa8d698(0x78)](this[_0xa8d698(0xaa)],this[_0xa8d698(0xb0)],this[_0xa8d698(0xbc)],this[_0xa8d698(0x93)]);}),this[_0x41a46d(0x84)](this[_0x41a46d(0xaf)],_0x41a46d(0xac),()=>{const _0x158e84=_0x41a46d;this[_0x158e84(0xac)]();});}[_0x419af2(0xa6)](){const _0x3c477b=_0x419af2;this[_0x3c477b(0x88)]();}async[_0x419af2(0xb9)]({actionId:_0x6a08d4,query:_0x28977c,htmlContent:_0x274162,label:_0x11003f,mainActionLabel:_0x2d19d7}){const _0x5688bf=_0x419af2;this[_0x5688bf(0xaf)][_0x5688bf(0xc3)]=_0x11003f,this[_0x5688bf(0xaf)][_0x5688bf(0x74)]=_0x2d19d7,this[_0x5688bf(0x8c)]=_0x274162,_0x28977c&&(this[_0x5688bf(0xaf)][_0x5688bf(0x8d)]?this[_0x5688bf(0x78)](_0x28977c,_0x274162,_0x6a08d4,_0x11003f):this[_0x5688bf(0xaf)][_0x5688bf(0xb7)](_0x5688bf(0x65),()=>{const _0x53a456=_0x5688bf;this[_0x53a456(0x78)](_0x28977c,_0x274162,_0x6a08d4,_0x11003f);}));}[_0x419af2(0xac)](){const _0x575710=_0x419af2;this[_0x575710(0xa0)]&&(this[_0x575710(0xa0)]=!0x1,this[_0x575710(0xaf)][_0x575710(0x7a)](),this[_0x575710(0xc1)][_0x575710(0xc2)]());}[_0x419af2(0x90)](){const _0x42d104=_0x419af2;this[_0x42d104(0x8c)]='',this[_0x42d104(0x70)]='',this[_0x42d104(0xb5)]='',this[_0x42d104(0xb0)]='',this[_0x42d104(0xaa)]='',this[_0x42d104(0x93)]='',this[_0x42d104(0xbc)]=void 0x0,this[_0x42d104(0xaf)][_0x42d104(0x90)](),this[_0x42d104(0xac)]();}async[_0x419af2(0x78)](_0x201c36,_0x2d0c2a,_0x38e7d9,_0x1a80e8){const _0x306e33=_0x419af2;return this[_0x306e33(0xa0)]=!0x0,this[_0x306e33(0xaf)][_0x306e33(0x7e)](),this[_0x306e33(0xb0)]=_0x2d0c2a,this[_0x306e33(0xaa)]=_0x201c36,this[_0x306e33(0x93)]=_0x1a80e8||_0x201c36,this[_0x306e33(0xbc)]=_0x38e7d9,new Promise(_0x3f7b0b=>{const _0x50a508=_0x306e33;this[_0x50a508(0xc1)][_0x50a508(0x68)]({'query':_0x201c36,'context':_0x2d0c2a,'onData':_0x580724=>{const _0x9f0d8e=_0x50a508;this[_0x9f0d8e(0xb5)]=_0x580724,this[_0x9f0d8e(0x70)]=this[_0x9f0d8e(0xb8)](this[_0x9f0d8e(0xb5)]);},'actionId':_0x38e7d9})[_0x50a508(0x92)](()=>{const _0x3612aa=_0x50a508;!this[_0x3612aa(0x70)]&&this[_0x3612aa(0xb5)]&&(this[_0x3612aa(0x70)]=this[_0x3612aa(0xb8)](this[_0x3612aa(0xb5)],!0x0));})[_0x50a508(0x80)](_0x170fb7=>{const _0x4a58eb=_0x50a508;_0x170fb7 instanceof _0x4d9fe6?this[_0x4a58eb(0xaf)][_0x4a58eb(0x6c)](_0x170fb7[_0x4a58eb(0xba)]):this[_0x4a58eb(0xaf)][_0x4a58eb(0x6c)](),_0x3f7b0b();})[_0x50a508(0xbe)](()=>{const _0x1dad2b=_0x50a508;this[_0x1dad2b(0xac)](),_0x3f7b0b();});});}[_0x419af2(0xb8)](_0x55e3eb,_0x11662b=!0x1){const _0x10207f=_0x419af2,_0x48883f=Z[_0x10207f(0x64)](_0x55e3eb);_0x55e3eb=_0x48883f?_0x55e3eb[_0x10207f(0x9b)](_0x48883f[0x1][_0x10207f(0xbb)]):_0x55e3eb[_0x10207f(0xbb)]<0x64&&!_0x11662b?'':this[_0x10207f(0x72)](_0x55e3eb);const _0x3ac002=this[_0x10207f(0x86)][_0x10207f(0x81)](_0x55e3eb,_0x10207f(0x6a));if(_0x48883f){const _0x5e9801=Array[_0x10207f(0xc0)](_0x3ac002[_0x10207f(0x85)][_0x10207f(0x89)]);_0x5e9801[_0x10207f(0x94)]();for(const _0xb5ab9e of _0x5e9801){if(_0xb5ab9e[_0x10207f(0xb3)]==Node[_0x10207f(0xb1)])break;_0xb5ab9e[_0x10207f(0x95)]();}}const _0x45d898=this[_0x10207f(0x91)][_0x10207f(0x7d)][_0x10207f(0x8e)][_0x10207f(0x79)](this[_0x10207f(0x8a)][_0x10207f(0x69)](_0x3ac002[_0x10207f(0x85)]));return this[_0x10207f(0xbd)]()||this[_0x10207f(0xbf)](_0x45d898),this[_0x10207f(0x91)][_0x10207f(0x7d)][_0x10207f(0xb4)](this[_0x10207f(0x91)][_0x10207f(0x7d)][_0x10207f(0x77)](_0x45d898));}[_0x419af2(0xbf)](_0x4a0294){const _0x186d4f=_0x419af2,_0x265295=new _0x5a82e5(this[_0x186d4f(0x91)][_0x186d4f(0x97)][_0x186d4f(0xaf)][_0x186d4f(0x96)]),_0x1f85ae=new _0x2da2ee({'name':/^h[1-5]$/}),_0x44d90e=[];let _0x11cceb=!0x1;for(const _0x55fca6 of _0x4a0294)_0x55fca6['is'](_0x186d4f(0x6d))&&_0x1f85ae[_0x186d4f(0x82)](_0x55fca6)&&(_0x44d90e[_0x186d4f(0x75)](_0x55fca6),'h1'==_0x55fca6[_0x186d4f(0x7f)]&&(_0x11cceb=!0x0));if(_0x11cceb){for(const _0x31195d of _0x44d90e)_0x265295[_0x186d4f(0x9d)]('h'+(parseInt(_0x31195d[_0x186d4f(0x7f)][0x1])+0x1),_0x31195d);}}[_0x419af2(0xbd)](){const _0x3cbdce=_0x419af2,{data:_0x114422,editing:_0x58027f}=this[_0x3cbdce(0x91)],_0x50c506=_0x114422[_0x3cbdce(0xa8)][_0x3cbdce(0x79)](_0x3cbdce(0xa2)),_0x1c5004=_0x114422[_0x3cbdce(0x79)](_0x114422[_0x3cbdce(0x77)](_0x50c506));return!!_0x58027f[_0x3cbdce(0xaf)][_0x3cbdce(0x98)][_0x3cbdce(0xa7)](_0x1c5004)[_0x3cbdce(0x9f)]('h1');}[_0x419af2(0x7b)](_0x3c2c81){const _0x128366=_0x419af2;return this[_0x128366(0x91)][_0x128366(0x97)][_0x128366(0xaf)][_0x128366(0x98)][_0x128366(0x87)](this[_0x128366(0x8b)],_0x3c2c81),this[_0x128366(0x8b)][_0x128366(0x6f)];}[_0x419af2(0x72)](_0x1bfec2){const _0x53bb51=_0x419af2,_0x2e9f48=_0x1bfec2[_0x53bb51(0x9a)]();return _0x2e9f48[_0x53bb51(0xae)](_0x53bb51(0xad))?_0x2e9f48[_0x53bb51(0x7c)](_0x53bb51(0x76))?_0x2e9f48[_0x53bb51(0x9b)](0x7,_0x2e9f48[_0x53bb51(0xbb)]-0x3):_0x2e9f48[_0x53bb51(0x9b)](0x7):_0x1bfec2;}}