/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x399b22=_0x864a;function _0x5702(){const _0x257282=['then','attributes','startsWith','getUser','off','_fetchMissingUsersForThreads','304Fobnll','from','collaboration.channelId','1721348rBIrHW','getSuggestion','_waitForServiceReady','6531nhXWLv','addSuggestionData','values','set','371308cCNJiy','config','get','find','connected','connect','plugins','addToReconnectionStack','add','isConnected','adapter','data','delete','listenTo','_trackChangesService','getMany','connection','requires','_bufferedRequests','catch','398165weEtHf','open','480642UiJGUa','TrackChangesService','update','cloud-services-internal-error:\x20Not\x20connected.','editor','originalSuggestionId','message','init','state','size','reconnect','hasSuggestion','2519022RgcrZQ','addUser','261820cRfYLM','type','TrackChangesEditing','cloud-services-internal-error:\x20Request\x20timeout.','_saved','suggestionUpdated'];_0x5702=function(){return _0x257282;};return _0x5702();}(function(_0x480b26,_0x2663ba){const _0x369df9=_0x864a,_0x5ea7c4=_0x480b26();while(!![]){try{const _0x182657=parseInt(_0x369df9(0x188))/0x1+parseInt(_0x369df9(0x172))/0x2+-parseInt(_0x369df9(0x164))/0x3+-parseInt(_0x369df9(0x181))/0x4+-parseInt(_0x369df9(0x162))/0x5+parseInt(_0x369df9(0x170))/0x6+parseInt(_0x369df9(0x184))/0x7*(parseInt(_0x369df9(0x17e))/0x8);if(_0x182657===_0x2663ba)break;else _0x5ea7c4['push'](_0x5ea7c4['shift']());}catch(_0x170d7f){_0x5ea7c4['push'](_0x5ea7c4['shift']());}}}(_0x5702,0x4625d));import{Plugin as _0x398d67}from'ckeditor5/src/core.js';import{User as _0x47fb43,TrackChangesService as _0x36bd17}from'@ckeditor/ckeditor-cloud-services-collaboration/src/services.js';import _0x516501 from'../realtimecollaborativeediting/websocketgateway.js';import _0x2481cb from'../realtimecollaborativecomments/cloudservicescommentsadapter.js';function _0x864a(_0x432ce9,_0x3f3f90){const _0x57027f=_0x5702();return _0x864a=function(_0x864af2,_0xed0d14){_0x864af2=_0x864af2-0x15e;let _0x6b4d5f=_0x57027f[_0x864af2];return _0x6b4d5f;},_0x864a(_0x432ce9,_0x3f3f90);}import{Users as _0x43535c}from'ckeditor5-collaboration/src/collaboration-core.js';class f extends _0x398d67{static get[_0x399b22(0x15f)](){const _0x32633b=_0x399b22;return[_0x2481cb,_0x32633b(0x174),_0x516501];}constructor(_0x36ba88){const _0x1677cf=_0x399b22;super(_0x36ba88);const _0x3a9308=this[_0x1677cf(0x168)][_0x1677cf(0x189)][_0x1677cf(0x18a)](_0x1677cf(0x180));this[_0x1677cf(0x160)]=new Map(),this[_0x1677cf(0x196)]=new f[(_0x1677cf(0x165))](_0x3a9308);}[_0x399b22(0x16b)](){const _0x4d9be9=_0x399b22,_0xe43546=this[_0x4d9be9(0x168)][_0x4d9be9(0x18e)][_0x4d9be9(0x18a)](_0x516501),_0x446016=this[_0x4d9be9(0x168)][_0x4d9be9(0x18e)][_0x4d9be9(0x18a)](_0x4d9be9(0x174));return _0x446016[_0x4d9be9(0x192)]={'getSuggestion':async _0x3077e2=>{const _0x59ca24=_0x4d9be9;await this[_0x59ca24(0x183)]();const _0x6c4bea=await this[_0x59ca24(0x196)][_0x59ca24(0x18a)](_0x3077e2)[_0x59ca24(0x161)](ot);return await this[_0x59ca24(0x17d)]([_0x6c4bea]),_0x6c4bea;},'addSuggestion':async({id:_0x38b474,type:_0x408c8f,data:_0x150f86,originalSuggestionId:_0x4886c0,attributes:_0x16b76c})=>{const _0xe058b6=_0x4d9be9;await this[_0xe058b6(0x183)]();const _0x232cfa={'id':_0x38b474,'type':_0x408c8f,'data':_0x150f86,'originalSuggestionId':_0x4886c0,'attributes':_0x16b76c},_0x523d19=await this[_0xe058b6(0x196)][_0xe058b6(0x190)](_0x38b474,_0x408c8f,_0x150f86,_0x4886c0,_0x16b76c)[_0xe058b6(0x161)](_0x491998=>{if(rt(_0x491998))return new Promise(_0x535875=>{const _0x18e4d4=_0x864a;this[_0x18e4d4(0x160)][_0x18e4d4(0x187)](_0x38b474,{'resolve':_0x535875,'suggestionData':_0x232cfa});});throw _0x491998;});return this[_0xe058b6(0x160)][_0xe058b6(0x194)](_0x38b474),_0x523d19;},'updateSuggestion':async(_0x57b97d,_0x3bb0a4)=>{const _0x27cd86=_0x4d9be9;if(await this[_0x27cd86(0x183)](),_0x27cd86(0x163)!==_0x3bb0a4[_0x27cd86(0x16c)])return this[_0x27cd86(0x196)][_0x27cd86(0x166)](_0x57b97d,_0x3bb0a4)[_0x27cd86(0x161)](ot);}},this[_0x4d9be9(0x195)](this[_0x4d9be9(0x196)],_0x4d9be9(0x177),(_0x531cee,_0x5e26a1)=>{const _0x4c229b=_0x4d9be9;_0x446016[_0x4c229b(0x16f)](_0x5e26a1['id'])&&(_0x446016[_0x4c229b(0x182)](_0x5e26a1['id'])[_0x4c229b(0x179)]=_0x5e26a1[_0x4c229b(0x179)]);}),this[_0x4d9be9(0x196)][_0x4d9be9(0x18d)](_0xe43546[_0x4d9be9(0x15e)])[_0x4d9be9(0x178)](_0x17063d=>(_0xe43546[_0x4d9be9(0x18f)](this),this[_0x4d9be9(0x17d)](_0x17063d)[_0x4d9be9(0x178)](()=>{const _0x233a27=_0x4d9be9;for(const _0x55f856 of _0x17063d){_0x446016[_0x233a27(0x185)](_0x55f856)[_0x233a27(0x176)]=!0x0;}})));}async[_0x399b22(0x16e)](){const _0x5a0127=_0x399b22,_0x4412cd=this[_0x5a0127(0x168)][_0x5a0127(0x18e)][_0x5a0127(0x18a)](_0x5a0127(0x174)),{connection:_0x378b65}=this[_0x5a0127(0x168)][_0x5a0127(0x18e)][_0x5a0127(0x18a)](_0x516501),_0x3f5bf4=await this[_0x5a0127(0x196)][_0x5a0127(0x18d)](_0x378b65);await this[_0x5a0127(0x17d)](_0x3f5bf4);for(const {suggestionData:_0x4e54e3,resolve:_0x5d6fce}of this[_0x5a0127(0x160)][_0x5a0127(0x186)]()){let _0x2bda72=_0x3f5bf4[_0x5a0127(0x18b)](_0x14cae0=>_0x14cae0['id']===_0x4e54e3['id']);_0x2bda72||(_0x2bda72=await this[_0x5a0127(0x196)][_0x5a0127(0x190)](_0x4e54e3['id'],_0x4e54e3[_0x5a0127(0x173)],_0x4e54e3[_0x5a0127(0x193)],_0x4e54e3[_0x5a0127(0x169)])),_0x5d6fce(_0x2bda72);}for(const _0x2d6139 of _0x3f5bf4)_0x4412cd[_0x5a0127(0x16f)](_0x2d6139['id'])||_0x4412cd[_0x5a0127(0x185)](_0x2d6139);}async[_0x399b22(0x183)](){const _0x2b7550=_0x399b22;this[_0x2b7550(0x196)][_0x2b7550(0x191)]||await new Promise(_0x4035b4=>{const _0x482e5b=_0x2b7550;this[_0x482e5b(0x195)](this[_0x482e5b(0x196)],_0x482e5b(0x18c),_0xe5b51a=>{const _0x4e5350=_0x482e5b;_0xe5b51a[_0x4e5350(0x17c)](),_0x4035b4();});});}async[_0x399b22(0x17d)](_0xc4e454){const _0x434fa7=_0x399b22,_0x384bef=this[_0x434fa7(0x168)][_0x434fa7(0x18e)][_0x434fa7(0x18a)](_0x43535c),{connection:_0x1b7455}=this[_0x434fa7(0x168)][_0x434fa7(0x18e)][_0x434fa7(0x18a)](_0x516501),_0x1a8f28=new Set();for(const {authorId:_0xfbc55f}of _0xc4e454)_0x384bef[_0x434fa7(0x17b)](_0xfbc55f)||_0x1a8f28[_0x434fa7(0x190)](_0xfbc55f);if(0x0===_0x1a8f28[_0x434fa7(0x16d)])return;const _0x134fff=await _0x47fb43[_0x434fa7(0x197)](_0x1b7455,Array[_0x434fa7(0x17f)](_0x1a8f28));for(const _0x44b149 of _0x134fff)_0x384bef[_0x434fa7(0x17b)](_0x44b149['id'])||_0x384bef[_0x434fa7(0x171)](_0x44b149);}}f[_0x399b22(0x165)]=_0x36bd17;export default f;function ot(_0x2167c7){if(rt(_0x2167c7))return new Promise(()=>{});throw _0x2167c7;}function rt(_0x3dbaf8){const _0x1d438f=_0x399b22;return _0x3dbaf8[_0x1d438f(0x16a)][_0x1d438f(0x17a)](_0x1d438f(0x167))||_0x3dbaf8[_0x1d438f(0x16a)][_0x1d438f(0x17a)](_0x1d438f(0x175));}