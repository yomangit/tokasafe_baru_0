/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x3a2e(){const _0x2d5cb0=['107IlTseL','sessions-register-already-registered','6776820eEWnxr','remove','change:state','fire','_handleSessionAdd','defineMe','forEach','Sessions','has','user','pluginName','add','context','isPremiumPlugin','clear','4157616CmDsFg','listenTo','orderNumber','allConnectedUsers','sessionId','requires','assign','channelSessions','sessionAdd:','connected','delete','6394zRTNMh','get','5510538CeECVk','connection','isMe','3600401BdhFOH','isOfficialPlugin','getUserBySessionId','_users','2957436NrgDgm','register','_uniqueUsersCount','state','getUser','channelConnectedUsers','_registeredSessions','values','_handleSessionRemove','unregister','set','addUser','mySessionId','plugins','_createUser','8661104vTOAuz','size','stopListening','role','getUserRole','init','getUserSessions','sessions-unregister-not-exist'];_0x3a2e=function(){return _0x2d5cb0;};return _0x3a2e();}const _0x102b61=_0x263e;(function(_0xb0869b,_0x14bcd0){const _0x3cd27c=_0x263e,_0xbc3783=_0xb0869b();while(!![]){try{const _0x2bc6a2=parseInt(_0x3cd27c(0x179))/0x1*(-parseInt(_0x3cd27c(0x159))/0x2)+parseInt(_0x3cd27c(0x162))/0x3+-parseInt(_0x3cd27c(0x14e))/0x4+-parseInt(_0x3cd27c(0x17b))/0x5+parseInt(_0x3cd27c(0x15b))/0x6+parseInt(_0x3cd27c(0x15e))/0x7+parseInt(_0x3cd27c(0x171))/0x8;if(_0x2bc6a2===_0x14bcd0)break;else _0xbc3783['push'](_0xbc3783['shift']());}catch(_0x455f11){_0xbc3783['push'](_0xbc3783['shift']());}}}(_0x3a2e,0xba9d1));import{ContextPlugin as _0xb0535f}from'ckeditor5/src/core.js';import{Collection as _0x4a72c7,CKEditorError as _0x32a39a}from'ckeditor5/src/utils.js';import _0x964da9 from'./websocketgateway.js';function _0x263e(_0x2896f8,_0x345c60){const _0x3a2e29=_0x3a2e();return _0x263e=function(_0x263ed8,_0x3dd54c){_0x263ed8=_0x263ed8-0x14d;let _0x36fd59=_0x3a2e29[_0x263ed8];return _0x36fd59;},_0x263e(_0x2896f8,_0x345c60);}import{Users as _0x415def}from'ckeditor5-collaboration/src/collaboration-core.js';export default class i extends _0xb0535f{static get[_0x102b61(0x185)](){const _0x15b5c0=_0x102b61;return _0x15b5c0(0x182);}static get[_0x102b61(0x15f)](){return!0x0;}static get[_0x102b61(0x188)](){return!0x0;}static get[_0x102b61(0x153)](){return[_0x964da9,_0x415def];}constructor(_0x2e1b13){const _0x3e65ec=_0x102b61;super(_0x2e1b13),this[_0x3e65ec(0x155)]=new Map(),this[_0x3e65ec(0x167)]=new Map(),this[_0x3e65ec(0x151)]=new _0x4a72c7(),this[_0x3e65ec(0x168)]=new Map(),this[_0x3e65ec(0x164)]=0x0,this[_0x3e65ec(0x161)]=this[_0x3e65ec(0x187)][_0x3e65ec(0x16f)][_0x3e65ec(0x15a)](_0x415def);}[_0x102b61(0x176)](){const _0x15bf4c=_0x102b61,_0x363fd3=this[_0x15bf4c(0x187)][_0x15bf4c(0x16f)][_0x15bf4c(0x15a)](_0x964da9);this[_0x15bf4c(0x14f)](_0x363fd3,_0x15bf4c(0x17d),(_0x1e5652,_0x2b8eb8,_0x57e155)=>{const _0x4a266c=_0x15bf4c;if(_0x4a266c(0x157)!==_0x57e155)this[_0x4a266c(0x155)][_0x4a266c(0x181)](_0x4dd0cc=>_0x4dd0cc[_0x4a266c(0x14d)]()),this[_0x4a266c(0x167)][_0x4a266c(0x181)](_0x4c7829=>_0x4c7829[_0x4a266c(0x14d)]()),this[_0x4a266c(0x151)][_0x4a266c(0x14d)]();else{for(const [_0x11c082,_0x2d0921]of this[_0x4a266c(0x168)])for(const _0x3c582f of _0x2d0921)this[_0x4a266c(0x17f)](_0x11c082,_0x3c582f);}}),this[_0x15bf4c(0x170)](_0x363fd3[_0x15bf4c(0x15c)]['me'],!0x0);}[_0x102b61(0x163)](_0x2faec3,_0x13d787){const _0x5a4efa=_0x102b61;if(this[_0x5a4efa(0x168)][_0x5a4efa(0x183)](_0x2faec3))throw new _0x32a39a(_0x5a4efa(0x17a),null,{'channelId':_0x2faec3});this[_0x5a4efa(0x168)][_0x5a4efa(0x16c)](_0x2faec3,_0x13d787),this[_0x5a4efa(0x155)][_0x5a4efa(0x16c)](_0x2faec3,new _0x4a72c7()),this[_0x5a4efa(0x167)][_0x5a4efa(0x16c)](_0x2faec3,new _0x4a72c7()),this[_0x5a4efa(0x14f)](_0x13d787,_0x5a4efa(0x186),(_0x12fe67,_0x1fdf3f)=>this[_0x5a4efa(0x17f)](_0x2faec3,_0x1fdf3f)),this[_0x5a4efa(0x14f)](_0x13d787,_0x5a4efa(0x17c),(_0x4a7357,_0x40fd5f)=>this[_0x5a4efa(0x16a)](_0x2faec3,_0x40fd5f));for(const _0x47a873 of _0x13d787)this[_0x5a4efa(0x17f)](_0x2faec3,_0x47a873);}[_0x102b61(0x16b)](_0x5829f8){const _0x5986e9=_0x102b61;if(!this[_0x5986e9(0x168)][_0x5986e9(0x183)](_0x5829f8))throw new _0x32a39a(_0x5986e9(0x178),null,{'channelId':_0x5829f8});const _0x490f3a=this[_0x5986e9(0x168)][_0x5986e9(0x15a)](_0x5829f8);this[_0x5986e9(0x173)](_0x490f3a);for(const _0x25adbd of _0x490f3a)_0x5986e9(0x157)===this[_0x5986e9(0x187)][_0x5986e9(0x16f)][_0x5986e9(0x15a)](_0x964da9)[_0x5986e9(0x165)]&&this[_0x5986e9(0x16a)](_0x5829f8,_0x25adbd);this[_0x5986e9(0x168)][_0x5986e9(0x158)](_0x5829f8),this[_0x5986e9(0x155)][_0x5986e9(0x158)](_0x5829f8),this[_0x5986e9(0x167)][_0x5986e9(0x158)](_0x5829f8);}get[_0x102b61(0x16e)](){const _0x560872=_0x102b61;return this[_0x560872(0x187)][_0x560872(0x16f)][_0x560872(0x15a)](_0x964da9)[_0x560872(0x15c)][_0x560872(0x152)];}[_0x102b61(0x160)](_0x1751f8){const _0x15d696=_0x102b61;for(const _0x47bfe5 of this[_0x15d696(0x155)][_0x15d696(0x169)]())for(const _0x1b82a3 of _0x47bfe5)if(_0x1b82a3['id']===_0x1751f8)return _0x1b82a3[_0x15d696(0x184)];}[_0x102b61(0x177)](_0x24454f,_0x47211b){const _0x4313c8=_0x102b61,_0x554180=_0x47211b?[this[_0x4313c8(0x155)][_0x4313c8(0x15a)](_0x47211b)]:this[_0x4313c8(0x155)][_0x4313c8(0x169)](),_0x481a08=new Set();for(const _0x5f0b2f of _0x554180)for(const _0x4072b0 of _0x5f0b2f)_0x4072b0[_0x4313c8(0x184)]['id']===_0x24454f['id']&&_0x481a08[_0x4313c8(0x186)](_0x4072b0['id']);return _0x481a08;}[_0x102b61(0x175)](_0x32712c){const _0x3291aa=_0x102b61;for(const _0x3276cd of this[_0x3291aa(0x155)][_0x3291aa(0x169)]())for(const _0x4726bc of _0x3276cd)if(_0x4726bc[_0x3291aa(0x184)]===_0x32712c)return _0x4726bc[_0x3291aa(0x174)];}[_0x102b61(0x17f)](_0x5c9c89,_0x41e781){const _0x54fa6e=_0x102b61;if(_0x54fa6e(0x157)!==this[_0x54fa6e(0x187)][_0x54fa6e(0x16f)][_0x54fa6e(0x15a)](_0x964da9)[_0x54fa6e(0x165)])return;const _0x1655c7=_0x41e781[_0x54fa6e(0x184)],_0x2f89e2=this[_0x54fa6e(0x161)][_0x54fa6e(0x166)](_0x1655c7['id'])||this[_0x54fa6e(0x170)](_0x1655c7),_0x207127=Object[_0x54fa6e(0x154)]({},_0x41e781,{'user':_0x2f89e2});this[_0x54fa6e(0x155)][_0x54fa6e(0x15a)](_0x5c9c89)[_0x54fa6e(0x186)](_0x207127);const _0x3c8dd9=this[_0x54fa6e(0x167)][_0x54fa6e(0x15a)](_0x5c9c89);_0x3c8dd9[_0x54fa6e(0x183)](_0x2f89e2['id'])||_0x3c8dd9[_0x54fa6e(0x186)](_0x2f89e2),this[_0x54fa6e(0x151)][_0x54fa6e(0x183)](_0x2f89e2['id'])||this[_0x54fa6e(0x151)][_0x54fa6e(0x186)](_0x2f89e2,_0x2f89e2[_0x54fa6e(0x15d)]?0x0:void 0x0),this[_0x54fa6e(0x17e)](_0x54fa6e(0x156)+_0x5c9c89,{'channelId':_0x5c9c89,'session':_0x207127});}[_0x102b61(0x16a)](_0x571f34,_0x1faf22){const _0x486e16=_0x102b61;if(_0x486e16(0x157)!==this[_0x486e16(0x187)][_0x486e16(0x16f)][_0x486e16(0x15a)](_0x964da9)[_0x486e16(0x165)])return;const _0x20d3e3=this[_0x486e16(0x167)][_0x486e16(0x15a)](_0x571f34),_0x55ff47=_0x1faf22[_0x486e16(0x184)];_0x55ff47['id']&&(this[_0x486e16(0x155)][_0x486e16(0x15a)](_0x571f34)[_0x486e16(0x17c)](_0x1faf22['id']),_0x20d3e3[_0x486e16(0x183)](_0x55ff47['id'])&&!this[_0x486e16(0x177)](_0x55ff47,_0x571f34)[_0x486e16(0x172)]&&_0x20d3e3[_0x486e16(0x17c)](_0x55ff47['id']),this[_0x486e16(0x151)][_0x486e16(0x15a)](_0x55ff47['id'])&&!this[_0x486e16(0x177)](_0x55ff47)[_0x486e16(0x172)]&&this[_0x486e16(0x151)][_0x486e16(0x17c)](_0x55ff47['id']));}[_0x102b61(0x170)](_0x5d0635,_0x18c577){const _0x3f27a8=_0x102b61,_0x2e8c33=this[_0x3f27a8(0x161)][_0x3f27a8(0x16d)](_0x5d0635);return _0x18c577&&this[_0x3f27a8(0x161)][_0x3f27a8(0x180)](_0x5d0635['id']),_0x2e8c33[_0x3f27a8(0x150)]=this[_0x3f27a8(0x164)]++,_0x2e8c33;}}