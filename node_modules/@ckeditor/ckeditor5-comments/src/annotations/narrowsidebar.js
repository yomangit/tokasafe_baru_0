/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2204ab=_0x147a;(function(_0x201ca3,_0x415a7f){const _0x2b1adf=_0x147a,_0x3b8a24=_0x201ca3();while(!![]){try{const _0x448faa=parseInt(_0x2b1adf(0x1cb))/0x1*(parseInt(_0x2b1adf(0x223))/0x2)+parseInt(_0x2b1adf(0x1c6))/0x3*(-parseInt(_0x2b1adf(0x217))/0x4)+parseInt(_0x2b1adf(0x1df))/0x5*(parseInt(_0x2b1adf(0x1da))/0x6)+-parseInt(_0x2b1adf(0x1ee))/0x7*(parseInt(_0x2b1adf(0x1fa))/0x8)+parseInt(_0x2b1adf(0x1c3))/0x9+-parseInt(_0x2b1adf(0x1e1))/0xa+-parseInt(_0x2b1adf(0x234))/0xb;if(_0x448faa===_0x415a7f)break;else _0x3b8a24['push'](_0x3b8a24['shift']());}catch(_0x1d790b){_0x3b8a24['push'](_0x3b8a24['shift']());}}}(_0x2e95,0xdc917));import{ContextPlugin as _0x3a7ea4,Context as _0x5e9059}from'ckeditor5/src/core.js';import _0x2abfd5 from'./annotationsuis.js';import _0x2f16d5 from'./sidebar.js';function _0x147a(_0x1ed021,_0x550615){const _0x2e955d=_0x2e95();return _0x147a=function(_0x147a5a,_0x3f7c65){_0x147a5a=_0x147a5a-0x1b8;let _0xeac205=_0x2e955d[_0x147a5a];return _0xeac205;},_0x147a(_0x1ed021,_0x550615);}import _0x46072f from'./view/annotationcounterbuttonview.js';import{BalloonPanelView as _0x4d5937,BodyCollection as _0x4f13e1}from'ckeditor5/src/ui.js';import{CKEditorError as _0x25a48f,DomEmitterMixin as _0x59b3ba,keyCodes as _0x3c0282,Collection as _0x456bd8}from'ckeditor5/src/utils.js';function _0x2e95(){const _0x3f699d=['clear','change:container','resize','4tfQVsj','stopListening','isVisible','_attachListeners','add','keyCode','_domEmitter','isAttached','from','init','addEventListener','plugins','stopPropagation','rearrange','_manuallyClosedAnnotationViews','removeEventListener','_setSelectedAnnotations','3099987SFZPvL','unpin','view','type','attach','northArrowSouthWest','_annotationToNarrowView','Esc','create','_attachToContainer','locale','ready','4527090uYGAZK','_editorAnnotations','includes','96vWbwCq','set:container','narrowsidebar-attach-already-attached','refreshPositioning','addAnnotation','626342OSvlYe','context','focus','EditorAnnotations','delete','stop','_detachListeners','first','esc','high','editors','cancel','getOrderedSelectedAnnotations','contains','set','53004nXQysH','getByView','element','number','southArrowNorthEast','830UvWbys','listenTo','8817130yLSbWl','off','low','detachFromDom','bind','_selectedAnnotations','values','attachToDom','has','isDirty','requires','_destroyEditorAnnotationsIntegration','register','7PikBdX','isPremiumPlugin','setActiveAnnotation','_annotations','activeAnnotation','northArrowSouthEast','_integrateWithEditorAnnotations','focusableElements','balloonPanelView','content','pin','_detachFromContainer','549576PvyjpE','destroy','_refreshPositioningDebounced','northArrowSouth','mousedown','change:height','detach','narrowSidebar','narrowsidebar-detach-not-attached','NarrowSidebar','southArrowNorthWest','blur','annotations','keydown','remove','ck-sidebar--narrow','length','bodyCollection','target','defaultPositions','pluginName','hasDomSelection','getSidebarItemView','_showBalloon','preventDefault','southArrowNorth','preventClosingBalloon','_refreshPositioning','execute','135808YuqAHw','uiUpdate','_updateBalloonPosition','isOfficialPlugin','_hideBalloon','refresh','get','find','annotationType'];_0x2e95=function(){return _0x3f699d;};return _0x2e95();}import'../../theme/sidebar-narrow.css';import{debounce as _0x10336d}from'lodash-es';export default class n extends _0x3a7ea4{static get[_0x2204ab(0x1eb)](){return[_0x2f16d5,_0x2abfd5];}static get[_0x2204ab(0x20e)](){const _0x5b8024=_0x2204ab;return _0x5b8024(0x203);}static get[_0x2204ab(0x21a)](){return!0x0;}static get[_0x2204ab(0x1ef)](){return!0x0;}constructor(_0x2c1dd5){const _0xae998=_0x2204ab;super(_0x2c1dd5),this[_0xae998(0x22a)]=!0x1,this[_0xae998(0x231)]=new Set(),this[_0xae998(0x229)]=Object[_0xae998(0x1bf)](_0x59b3ba),this[_0xae998(0x1bd)]=new Map(),this[_0xae998(0x1d9)](_0xae998(0x1f2),null),this[_0xae998(0x206)]=null,this[_0xae998(0x1e6)]=[],this[_0xae998(0x1c4)]=new _0x456bd8(),this[_0xae998(0x1fc)]=_0x10336d(()=>{const _0x4357b1=_0xae998;this[_0x4357b1(0x215)]();},0xfa,{'leading':!0x1});}[_0x2204ab(0x22c)](){const _0x2a1e2a=_0x2204ab;this[_0x2a1e2a(0x1cc)][_0x2a1e2a(0x22e)][_0x2a1e2a(0x21d)](_0x2abfd5)[_0x2a1e2a(0x1ed)](_0x2a1e2a(0x201),this),this[_0x2a1e2a(0x20b)]=new _0x4f13e1(this[_0x2a1e2a(0x1cc)][_0x2a1e2a(0x1c1)]),this[_0x2a1e2a(0x1f6)]=new _0x4d5937(this[_0x2a1e2a(0x1cc)][_0x2a1e2a(0x1c1)]),this[_0x2a1e2a(0x20b)][_0x2a1e2a(0x1e8)](),this[_0x2a1e2a(0x20b)][_0x2a1e2a(0x227)](this[_0x2a1e2a(0x1f6)]);}[_0x2204ab(0x1bb)](_0x319f0a){const _0x57c93d=_0x2204ab;this[_0x57c93d(0x206)]=_0x319f0a;const _0x2f91c5=this[_0x57c93d(0x1cc)][_0x57c93d(0x22e)][_0x57c93d(0x21d)](_0x2f16d5),_0x4168d7=this[_0x57c93d(0x1f6)];if(_0x2f91c5[_0x57c93d(0x1f1)]=_0x319f0a,this[_0x57c93d(0x22a)])throw new _0x25a48f(_0x57c93d(0x1c8),this);this[_0x57c93d(0x22a)]=!0x0,this[_0x57c93d(0x1e0)](_0x2f91c5,_0x57c93d(0x1c7),()=>{const _0x18527d=_0x57c93d;this[_0x18527d(0x200)](),this[_0x18527d(0x1e0)](_0x2f91c5,_0x18527d(0x221),_0x141d02=>{const _0x28b462=_0x18527d;_0x141d02[_0x28b462(0x1e2)](),this[_0x28b462(0x1bb)](_0x319f0a);});}),_0x2f91c5[_0x57c93d(0x1c0)]({'viewClass':_0x57c93d(0x209),'spaceBetweenItems':0x5});const _0x189b4c=_0x4a28a5=>{const _0x51df89=_0x57c93d,_0x23a427=new _0x46072f(this[_0x51df89(0x1cc)][_0x51df89(0x1c1)]);_0x2f91c5[_0x51df89(0x1ca)](_0x4a28a5,_0x23a427),this[_0x51df89(0x1bd)][_0x51df89(0x1d9)](_0x4a28a5,_0x23a427),_0x23a427[_0x51df89(0x1e5)](_0x51df89(0x1ea),_0x51df89(0x21f),_0x51df89(0x1dd))['to'](_0x4a28a5[_0x51df89(0x1b9)],_0x51df89(0x1ea),_0x51df89(0x1ba),_0x51df89(0x20a)),_0x23a427['on'](_0x51df89(0x216),()=>{const _0x205137=_0x51df89;this[_0x205137(0x231)][_0x205137(0x220)](),_0x4168d7[_0x205137(0x1f7)][_0x205137(0x1d2)]!==_0x4a28a5[_0x205137(0x1b9)]?(this[_0x205137(0x211)](_0x4a28a5),_0x4a28a5[_0x205137(0x1b9)][_0x205137(0x1dc)][_0x205137(0x1cd)](),this[_0x205137(0x1f0)](_0x4a28a5)):this[_0x205137(0x1f0)](null);});};for(const _0xbf4cd7 of _0x319f0a)_0x189b4c(_0xbf4cd7);this[_0x57c93d(0x1e0)](_0x319f0a,_0x57c93d(0x227),(_0x4da6aa,_0x587c0c)=>{_0x189b4c(_0x587c0c);}),this[_0x57c93d(0x1e0)](_0x319f0a,_0x57c93d(0x208),(_0x5da6db,_0x150d95,_0x1f9acd)=>{const _0x20e674=_0x57c93d;this[_0x20e674(0x1bd)][_0x20e674(0x21d)](_0x150d95)[_0x20e674(0x1fb)](),this[_0x20e674(0x1bd)][_0x20e674(0x1cf)](_0x150d95),_0x2f91c5[_0x20e674(0x230)]({'removedAnnotation':_0x150d95,'previousAnnotation':_0x319f0a[_0x20e674(0x21d)](_0x1f9acd-0x1),'nextAnnotation':_0x319f0a[_0x20e674(0x21d)](_0x1f9acd+0x1)}),_0x150d95===this[_0x20e674(0x1f2)]&&this[_0x20e674(0x1f0)](null);},{'priority':_0x57c93d(0x1e3)}),this[_0x57c93d(0x1e0)](_0x319f0a,_0x57c93d(0x1cd),(_0x166695,_0x35c20a)=>{const _0x2797fa=_0x57c93d;this[_0x2797fa(0x1f0)](_0x35c20a);}),this[_0x57c93d(0x1e0)](_0x319f0a,_0x57c93d(0x205),()=>{const _0xb20587=_0x57c93d;this[_0xb20587(0x1f0)](null);}),this[_0x57c93d(0x229)][_0x57c93d(0x1e0)](document,_0x57c93d(0x207),(_0x556eb1,_0x3c1196)=>{const _0x1dcb1a=_0x57c93d;_0x3c1196[_0x1dcb1a(0x228)]===_0x3c0282[_0x1dcb1a(0x1d3)]&&_0x4168d7[_0x1dcb1a(0x225)]&&(this[_0x1dcb1a(0x231)][_0x1dcb1a(0x227)](_0x4168d7[_0x1dcb1a(0x1f7)][_0x1dcb1a(0x1d2)]),this[_0x1dcb1a(0x21b)](),_0x3c1196[_0x1dcb1a(0x22f)](),_0x3c1196[_0x1dcb1a(0x212)]());}),this[_0x57c93d(0x229)][_0x57c93d(0x1e0)](document,_0x57c93d(0x1fe),(_0x276f52,_0x4142b0)=>{const _0x3fa877=_0x57c93d,_0x557a7b=_0x4142b0[_0x3fa877(0x20c)];_0x4168d7[_0x3fa877(0x225)]&&_0x4168d7[_0x3fa877(0x1dc)][_0x3fa877(0x1d8)](_0x557a7b)||_0x2f91c5[_0x3fa877(0x1b9)][_0x3fa877(0x1dc)][_0x3fa877(0x1d8)](_0x557a7b)||_0x276f52[_0x3fa877(0x214)]||this[_0x3fa877(0x1f2)]&&this[_0x3fa877(0x1f2)][_0x3fa877(0x1f5)][_0x3fa877(0x21e)](_0x21c0a0=>_0x21c0a0[_0x3fa877(0x1d8)](_0x557a7b))||(this[_0x3fa877(0x231)][_0x3fa877(0x220)](),this[_0x3fa877(0x21b)](),this[_0x3fa877(0x1f0)](null));});const _0x107a7b=this[_0x57c93d(0x1cc)]instanceof _0x5e9059?this[_0x57c93d(0x1cc)][_0x57c93d(0x1d5)]:new _0x456bd8([this[_0x57c93d(0x1cc)]]);for(const _0x3a76ec of _0x107a7b)this[_0x57c93d(0x1f4)](_0x3a76ec);this[_0x57c93d(0x1e0)](_0x107a7b,_0x57c93d(0x227),(_0x50c45d,_0x1d64e6)=>{const _0x210006=_0x57c93d;this[_0x210006(0x1e0)](_0x1d64e6,_0x210006(0x1c2),()=>{const _0xf0bfe=_0x210006;this[_0xf0bfe(0x1f4)](_0x1d64e6);});}),this[_0x57c93d(0x1e0)](_0x107a7b,_0x57c93d(0x208),(_0x12ad24,_0x5362c1)=>{const _0x69a945=_0x57c93d;_0x5362c1[_0x69a945(0x22e)][_0x69a945(0x1e9)](_0x69a945(0x1ce))&&this[_0x69a945(0x1ec)](_0x5362c1[_0x69a945(0x22e)][_0x69a945(0x21d)](_0x69a945(0x1ce)));}),window[_0x57c93d(0x22d)](_0x57c93d(0x222),this[_0x57c93d(0x1fc)]),this[_0x57c93d(0x215)]();}[_0x2204ab(0x1f0)](_0x4e40af){const _0x403401=_0x2204ab;if(_0x4e40af===this[_0x403401(0x1f2)])return;const _0x5812d5=this[_0x403401(0x1cc)][_0x403401(0x22e)][_0x403401(0x21d)](_0x2f16d5);if(_0x5812d5[_0x403401(0x21c)]({'blurredAnnotation':this[_0x403401(0x1f2)],'activatedAnnotation':_0x4e40af,'disableAnimationOnActivatedAnnotation':!0x0}),_0x4e40af)_0x5812d5[_0x403401(0x210)](_0x4e40af)?this[_0x403401(0x211)](_0x4e40af):this[_0x403401(0x21b)]();else this[_0x403401(0x21b)]();this[_0x403401(0x1f2)]=_0x4e40af;}[_0x2204ab(0x200)](){const _0x33f9bb=_0x2204ab;if(!this[_0x33f9bb(0x22a)])throw new _0x25a48f(_0x33f9bb(0x202),this);this[_0x33f9bb(0x1f0)](null);const _0x1ebc3d=this[_0x33f9bb(0x1cc)][_0x33f9bb(0x22e)][_0x33f9bb(0x21d)](_0x2f16d5);this[_0x33f9bb(0x21b)](),Array[_0x33f9bb(0x22b)](this[_0x33f9bb(0x1bd)][_0x33f9bb(0x1e7)](),_0x38d2cf=>_0x38d2cf[_0x33f9bb(0x1fb)]()),this[_0x33f9bb(0x1bd)][_0x33f9bb(0x220)](),_0x1ebc3d[_0x33f9bb(0x1f9)](this[_0x33f9bb(0x206)]),this[_0x33f9bb(0x224)](),this[_0x33f9bb(0x229)][_0x33f9bb(0x224)](),this[_0x33f9bb(0x1cc)]instanceof _0x5e9059&&this[_0x33f9bb(0x224)](this[_0x33f9bb(0x1cc)][_0x33f9bb(0x1d5)]);for(const _0x1e6885 of Array[_0x33f9bb(0x22b)](this[_0x33f9bb(0x1c4)]))this[_0x33f9bb(0x1ec)](_0x1e6885);window[_0x33f9bb(0x232)](_0x33f9bb(0x222),this[_0x33f9bb(0x1fc)]),this[_0x33f9bb(0x1fc)][_0x33f9bb(0x1d6)](),this[_0x33f9bb(0x1e6)]=[],this[_0x33f9bb(0x22a)]=!0x1,this[_0x33f9bb(0x206)]=null;}[_0x2204ab(0x1fb)](){const _0x10d649=_0x2204ab;this[_0x10d649(0x22a)]&&this[_0x10d649(0x200)](),this[_0x10d649(0x20b)][_0x10d649(0x1e4)]();}[_0x2204ab(0x1f4)](_0x53769d){const _0xb51e72=_0x2204ab;if(!_0x53769d[_0xb51e72(0x22e)][_0xb51e72(0x1e9)](_0xb51e72(0x1ce)))return;const _0x424fa3=_0x53769d[_0xb51e72(0x22e)][_0xb51e72(0x21d)](_0xb51e72(0x1ce)),_0x4cbe8f=this[_0xb51e72(0x1cc)][_0xb51e72(0x22e)][_0xb51e72(0x21d)](_0x2f16d5),_0x1a8899=this[_0xb51e72(0x206)],_0x5ecf11=this[_0xb51e72(0x1f6)],_0x45e267=()=>{const _0x3c33ae=_0xb51e72,_0x2d5fde=_0x424fa3[_0x3c33ae(0x1d7)]({'annotations':this[_0x3c33ae(0x206)],'activeAnnotation':this[_0x3c33ae(0x1f2)]});this[_0x3c33ae(0x233)](_0x2d5fde),this[_0x3c33ae(0x1f0)](_0x2d5fde[0x0]||null);};this[_0xb51e72(0x1e0)](_0x424fa3,_0xb51e72(0x21c),_0x45e267),this[_0xb51e72(0x1e0)](_0x424fa3,_0xb51e72(0x205),(_0x1e3f0d,{isAnnotationTracked:_0x4a2dfa})=>{const _0x332c04=_0xb51e72;this[_0x332c04(0x1f2)]&&_0x4a2dfa(this[_0x332c04(0x1f2)])&&(this[_0x332c04(0x233)]([]),this[_0x332c04(0x1f0)](null));}),this[_0xb51e72(0x1e0)](_0x424fa3,_0xb51e72(0x218),()=>{const _0x371d64=_0xb51e72;this[_0x371d64(0x1fc)]();}),this[_0xb51e72(0x1e0)](_0x1a8899,_0xb51e72(0x205),_0x2d22d0=>{const _0xb5f9c3=_0xb51e72;_0x424fa3[_0xb5f9c3(0x20f)]()&&_0x2d22d0[_0xb5f9c3(0x1d0)]();},{'priority':_0xb51e72(0x1d4)}),this[_0xb51e72(0x1e0)](this[_0xb51e72(0x229)],_0xb51e72(0x1fe),(_0x1f7e82,_0x3b5c56)=>{const _0x401a4a=_0xb51e72,_0x3046a5=_0x3b5c56[_0x401a4a(0x20c)];_0x5ecf11[_0x401a4a(0x225)]&&_0x5ecf11[_0x401a4a(0x1dc)][_0x401a4a(0x1d8)](_0x3046a5)||_0x4cbe8f[_0x401a4a(0x1b9)][_0x401a4a(0x1dc)][_0x401a4a(0x1d8)](_0x3046a5)||this[_0x401a4a(0x1f2)]&&_0x424fa3[_0x401a4a(0x20f)]()&&(_0x45e267(),_0x1f7e82[_0x401a4a(0x214)]=!0x0);},{'priority':_0xb51e72(0x1d4)}),this[_0xb51e72(0x1c4)][_0xb51e72(0x227)](_0x424fa3);}[_0x2204ab(0x1ec)](_0x2d849c){const _0x1b6396=_0x2204ab;_0x2d849c&&(this[_0x1b6396(0x224)](_0x2d849c),this[_0x1b6396(0x1c4)][_0x1b6396(0x208)](_0x2d849c));}[_0x2204ab(0x233)](_0x5884a8){const _0x1b6818=_0x2204ab;for(const _0x468ec0 of this[_0x1b6818(0x1e6)])_0x5884a8[_0x1b6818(0x1c5)](_0x468ec0)||this[_0x1b6818(0x231)][_0x1b6818(0x1cf)](_0x468ec0[_0x1b6818(0x1b9)]);this[_0x1b6818(0x1e6)]=_0x5884a8;}[_0x2204ab(0x215)](){const _0x4463f9=_0x2204ab,_0xb95c9f=this[_0x4463f9(0x1f6)];this[_0x4463f9(0x206)][_0x4463f9(0x1c9)](),_0xb95c9f[_0x4463f9(0x225)]&&this[_0x4463f9(0x219)]();}[_0x2204ab(0x211)](_0x249ff1){const _0x3ed640=_0x2204ab;if(this[_0x3ed640(0x231)][_0x3ed640(0x1e9)](_0x249ff1[_0x3ed640(0x1b9)]))return;const _0x2a2f91=this[_0x3ed640(0x1f6)][_0x3ed640(0x1f7)][_0x3ed640(0x1d2)];_0x2a2f91!==_0x249ff1[_0x3ed640(0x1b9)]?(_0x2a2f91&&this[_0x3ed640(0x1d1)](_0x2a2f91),this[_0x3ed640(0x226)](_0x249ff1[_0x3ed640(0x1b9)]),this[_0x3ed640(0x1f6)][_0x3ed640(0x1f7)][_0x3ed640(0x220)](),this[_0x3ed640(0x1f6)][_0x3ed640(0x1f7)][_0x3ed640(0x227)](_0x249ff1[_0x3ed640(0x1b9)]),this[_0x3ed640(0x219)]()):this[_0x3ed640(0x219)]();}[_0x2204ab(0x219)](){const _0x2125a0=_0x2204ab,_0x100fcd=this[_0x2125a0(0x1f6)][_0x2125a0(0x1f7)][_0x2125a0(0x1d2)],_0xdb13cf=_0x100fcd&&this[_0x2125a0(0x206)][_0x2125a0(0x1db)](_0x100fcd);if(!_0xdb13cf||!this[_0x2125a0(0x1bd)][_0x2125a0(0x1e9)](_0xdb13cf))return;const _0x256a32=this[_0x2125a0(0x1bd)][_0x2125a0(0x21d)](_0xdb13cf)[_0x2125a0(0x1dc)],_0x2c2d5c=(function(){const _0x7a5027=_0x2125a0,_0x425d61=_0x4d5937[_0x7a5027(0x20d)];return[_0x425d61[_0x7a5027(0x1de)],_0x425d61[_0x7a5027(0x1f3)],_0x425d61[_0x7a5027(0x213)],_0x425d61[_0x7a5027(0x1fd)],_0x425d61[_0x7a5027(0x204)],_0x425d61[_0x7a5027(0x1bc)]];}());this[_0x2125a0(0x1f6)][_0x2125a0(0x1f8)]({'target':_0x256a32,'positions':_0x2c2d5c});}[_0x2204ab(0x21b)](){const _0x6f532d=_0x2204ab,_0x46f966=this[_0x6f532d(0x1f6)],_0x380c63=_0x46f966[_0x6f532d(0x1f7)][_0x6f532d(0x1d2)];_0x380c63&&(this[_0x6f532d(0x1d1)](_0x380c63),_0x46f966[_0x6f532d(0x1b8)](),_0x46f966[_0x6f532d(0x1f7)][_0x6f532d(0x220)]());}[_0x2204ab(0x226)](_0x42aaef){const _0x44e609=_0x2204ab;this[_0x44e609(0x1e0)](_0x42aaef,_0x44e609(0x1ff),()=>this[_0x44e609(0x219)]()),this[_0x44e609(0x1e0)](_0x42aaef,_0x44e609(0x1be),(_0x401144,_0x549e22)=>{const _0x10a4a0=_0x44e609;this[_0x10a4a0(0x231)][_0x10a4a0(0x227)](_0x42aaef),this[_0x10a4a0(0x21b)](),_0x549e22();});}[_0x2204ab(0x1d1)](_0x94f599){const _0x342c90=_0x2204ab;this[_0x342c90(0x224)](_0x94f599);}}