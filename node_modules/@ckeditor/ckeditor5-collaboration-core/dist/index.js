/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ContextPlugin as _0x59be17,Editor as _0xdcebcd,icons as _0x1be3f8}from'@ckeditor/ckeditor5-core/dist/index.js';import{CKEditorError as _0x41b92e,Collection as _0x1adc2d,uid as _0x565043,first as _0xb0af1b,FocusTracker as _0x161b7e,KeystrokeHandler as _0x39f86a}from'@ckeditor/ckeditor5-utils/dist/index.js';import{View as _0x3e122a,IconView as _0x1a8d05,ButtonView as _0x4280db,DropdownButtonView as _0x481ea7,FocusCycler as _0x1d6223,isViewWithFocusCycler as _0x296200}from'@ckeditor/ckeditor5-ui/dist/index.js';import _0x4c1e3c from'date-fns/format/index.js';import _0x56cee8 from'date-fns/parseISO/index.js';import _0x2ed182 from'date-fns/differenceInCalendarDays/index.js';class o extends _0x59be17{static get['pluginName'](){return'Permissions';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['setPermissions'](_0x34edef,_0x499f79){let _0x4b8184;if(_0x499f79||(_0x499f79=this['context']['config']['get']('collaboration.channelId')),this['context']['config']['get']('collaboration.channelId')==_0x499f79?_0x4b8184=this['context']:'editors'in this['context']&&this['context']['editors']&&(_0x4b8184=this['context']['editors']['find'](_0x7a09d0=>_0x7a09d0['config']['get']('collaboration.channelId')==_0x499f79)),!_0x4b8184)throw new _0x41b92e('permissions-set-permissions-invalid-channel-id',null);const _0x20c59d=_0x4b8184['plugins'],_0x57130d=_0x20c59d['has']('CommentsRepository')?_0x20c59d['get']('CommentsRepository'):void 0x0,_0xe8a416=_0x20c59d['has']('CommentsOnly')&&_0x20c59d['get']('CommentsOnly'),_0x56bf98=_0x34edef['includes']('document:write'),_0x478456=_0x34edef['includes']('comment:modify_all'),_0x19bd72=_0x34edef['includes']('comment:admin'),_0x54da13=_0x34edef['includes']('comment:write'),_0x4cb576=_0x54da13||_0x19bd72,_0x428fbc=_0x4cb576||_0x478456,_0x48f1cf=_0x56bf98||_0x4cb576;(_0xe8a416&&(_0xe8a416['isEnabled']=!_0x56bf98&&_0x428fbc),_0x4b8184 instanceof _0xdcebcd)&&(!(_0x56bf98||_0x428fbc&&_0x57130d)?_0x4b8184['enableReadOnlyMode']('no-permissions'):_0x4b8184['disableReadOnlyMode']('no-permissions'));if(_0x57130d){_0x57130d['setPermissions']({'admin':_0x19bd72,'modifyAll':_0x478456,'write':_0x54da13,'resolve':_0x48f1cf},_0x499f79);const _0x482676=_0x4b8184 instanceof _0xdcebcd&&_0x4b8184['commands']['get']('addCommentThread');_0x482676&&(_0x4cb576?_0x482676['clearForceDisabled']('noPermissions'):_0x482676['forceDisabled']('noPermissions'));}}}function r(_0x5a9a79,_0x44ebba){const t=_0x5a9a79['t'];switch(_0x44ebba){case'Anonymous':return t('Anonymous');case'Yes':return t('Yes');case'No':return t('No');case'Are\x20you\x20sure?':return t('Are\x20you\x20sure?');default:return'';}}class l extends _0x59be17{['users'];['_licenseKeyCheckInterval'];['_lastColor'];['_myId'];['_locale'];static get['pluginName'](){return'Users';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[o];}constructor(_0xe088db){super(_0xe088db),this['context']['config']['define']('users.anonymousUserId','anonymous-user'),this['context']['config']['define']('users.colorsCount',0x8),this['users']=new _0x1adc2d(),this['_locale']=_0xe088db['locale'],this['_licenseKeyCheckInterval']=null,this['_lastColor']=0x0,this['_myId']=null,this['decorate']('getOperationAuthor');}['init'](){const _0x303b32=this['context'];this['licenseKey']=_0x303b32['config']['get']('licenseKey');const _0x24023d=['licenseKeyTrial','licenseKeyInvalid','licenseKeyValid','licenseKeyTrialLimit:operations','licenseKeyTrialLimit:time','licenseKeyTrialLimit:revisions'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0xce615b;for(const _0x51526c in _0x303b32){const _0x3eb196=_0x303b32[_0x51526c];if(_0x24023d['includes'](_0x3eb196)){delete _0x303b32[_0x51526c],_0xce615b=_0x3eb196;break;}}if('licenseKeyInvalid'===_0xce615b)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x41b92e('invalid-license-key',null);if('licenseKeyTrial'===_0xce615b&&console['info']('You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20collaboration\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.'),'licenseKeyTrialLimit:operations'===_0xce615b)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x41b92e('trial-license-key-reached-limit-changes',null);if('licenseKeyTrialLimit:time'===_0xce615b)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x41b92e('trial-license-key-reached-limit-time',null);if('licenseKeyTrialLimit:revisions'===_0xce615b)throw clearInterval(this['_licenseKeyCheckInterval']),new _0x41b92e('trial-license-key-reached-limit-revisions',null);'licenseKeyValid'===_0xce615b&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8),this['_addAnonymousUser']();}get['me'](){return null==this['_myId']?null:this['getUser'](this['_myId']);}['addUser']({id:_0x27db22,name:_0x52f4d9,..._0x593780}){if(!_0x27db22||'string'!=typeof _0x27db22)throw new _0x41b92e('users-add-invalid-id');if(this['users']['has'](_0x27db22))throw new _0x41b92e('users-add-duplicated-id',null,{'id':_0x27db22});const _0x436500={..._0x593780,'id':_0x27db22,'name':u(this['_locale'],_0x52f4d9),'color':this['_getNextColor']()};_0x436500['name']=u(this['_locale'],_0x436500['name']);const _0x46534c=new P(_0x436500);return this['users']['add'](_0x46534c),_0x46534c;}['getUser'](_0x24d45f){return this['users']['get'](_0x24d45f);}['useAnonymousUser'](){const _0x35b5a3=this['context']['config']['get']('users.anonymousUserId');this['_myId']||this['defineMe'](_0x35b5a3);}['defineMe'](_0x142a45){if(this['_myId'])throw new _0x41b92e('users-me-already-defined',null);const _0x4c6b21=this['getUser'](_0x142a45);if(!_0x4c6b21)throw new _0x41b92e('users-me-missing-user',null);this['_myId']=_0x142a45,_0x4c6b21['_isMe']=!0x0;}['getOperationAuthor'](){return this['me'];}['destroy'](){super['destroy'](),clearInterval(this['_licenseKeyCheckInterval']);}['_getNextColor'](){const _0x1feff8=this['context']['config']['get']('users.colorsCount');return this['_lastColor']>=_0x1feff8&&(this['_lastColor']=0x0),new a(this['_lastColor']++);}['_addAnonymousUser'](){const _0x2b5554=this['context']['config']['get']('users.anonymousUserId');this['addUser']({'id':_0x2b5554,'name':r(this['_locale'],'Anonymous')})['_isAnonymous']=!0x0;}}class P{['id'];['color'];['name'];['avatar'];['_isMe'];['_isAnonymous'];constructor(_0x4b78f1){this['id']=_0x4b78f1['id'],this['color']=_0x4b78f1['color'],this['name']=_0x4b78f1['name'],this['avatar']=_0x4b78f1['avatar'],this['_isAnonymous']=!0x1,this['_isMe']=!0x1;}get['isAnonymous'](){return this['_isAnonymous'];}get['isMe'](){return this['_isMe'];}get['initials'](){const _0x1e495b=this['name']['split']('\x20');return 0x1===_0x1e495b['length']?this['_getInitial'](_0x1e495b[0x0]):this['_getInitial'](_0x1e495b[0x0])+this['_getInitial'](_0x1e495b[_0x1e495b['length']-0x1]);}['_getInitial'](_0x32412e){return _0x32412e['charAt'](0x0)['toUpperCase']();}}function u(_0x5788b8,_0x35adfd=''){return''==(_0x35adfd=_0x35adfd['trim']())?r(_0x5788b8,'Anonymous'):_0x35adfd;}class a{['_id'];constructor(_0x214ee3){this['_id']=_0x214ee3;}['getBackgroundColorClass'](){return'ck-user__bg-color--'+this['_id'];}['getSelectionClass'](){return'ck-user__selection--'+this['_id'];}['getMarkerClass'](){return'ck-user__marker--'+this['_id'];}}class H extends _0x3e122a{['name'];['notificationView'];constructor(_0x2027f5,_0x169999,_0x491e9d){super(_0x2027f5),this['name']=_0x169999['name'],this['notificationView']=null;const _0x59cdee=['ck','ck-user'],_0x79db97=['ck','ck-user__img'];if(_0x169999['isAnonymous']&&_0x79db97['push']('ck-user__anonymous'),!_0x169999['isAnonymous']&&_0x169999['isMe']&&_0x59cdee['push']('ck-user_me'),_0x169999['avatar']&&_0x79db97['push']('ck-user__avatar'),_0x491e9d){const _0x6a3caf=new _0x1a8d05();_0x6a3caf['extendTemplate']({'attributes':{'class':['ck-user__icon']}}),_0x6a3caf['content']='<!--\x0a\x0a\x20What\x20you\x27re\x20currently\x20looking\x20at\x20is\x20the\x20source\x20code\x20of\x20a\x20legally\x20protected,\x20proprietary\x20software.\x0a\x20CKEditor\x205\x20Collaboration\x20is\x20licensed\x20under\x20a\x20commercial\x20license\x20and\x20protected\x20by\x20copyright\x20law.\x20Where\x20not\x20otherwise\x20indicated,\x0a\x20all\x20CKEditor\x205\x20Collaboration\x20content\x20is\x20authored\x20by\x20CKSource\x20engineers\x20and\x20consists\x20of\x20CKSource-owned\x20intellectual\x20property.\x0a\x0a\x20Copyright\x20(c)\x202003-2024,\x20CKSource\x20Holding\x20sp.\x20z\x20o.o.\x20All\x20rights\x20reserved.\x0a\x0a!-->\x0a\x0a<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M10\x200C4.48\x200\x200\x204.48\x200\x2010s4.48\x2010\x2010\x2010\x2010-4.48\x2010-10S15.52\x200\x2010\x200zm1\x2015H9v-2h2v2zm0-4H9V5h2v6z\x22/></svg>\x0a',this['notificationView']={'tag':'div','attributes':{'class':['ck','ck-user__notification'],'data-cke-tooltip-position':'n','data-cke-tooltip-text':_0x491e9d},'children':[_0x6a3caf]};}const _0x41fdbb=[{'tag':'div','attributes':{'class':_0x79db97,'style':{'background-image':_0x169999['avatar']?'url(\x27'+_0x169999['avatar']+'\x27)':''}}},{'tag':'div','attributes':{'class':_0x169999['avatar']?'ck\x20ck-user__name\x20ck-user__name--hidden':'ck\x20ck-user__name','aria-label':_0x169999['name']},'children':[{'text':_0x169999['initials']}]}];this['notificationView']&&_0x41fdbb['push'](this['notificationView']),this['setTemplate']({'tag':'div','attributes':{'class':_0x59cdee,'data-user-id':_0x169999['id']},'children':_0x41fdbb});}}class J extends _0x3e122a{['id'];constructor(_0x237c0a,_0x4a2a1e){super(_0x237c0a),this['id']='ck-aria-description-'+_0x565043(),this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-aria-description'],'id':this['id']},'children':[{'text':_0x4a2a1e}]});}}class U extends _0x4280db{['render'](){super['render'](),V(this);}}class Y extends _0x481ea7{['render'](){super['render'](),V(this);}}function V(_0x32b87f){_0x32b87f['listenTo'](_0x32b87f['element'],'mousedown',(_0x4a0dd2,_0x1c6e6e)=>{_0x1c6e6e['stopPropagation'](),_0x1c6e6e['preventDefault']();}),_0x32b87f['listenTo'](_0x32b87f['element'],'mouseup',()=>{_0x32b87f['element']['focus']();});}function E(_0x313223={}){if(void 0x0!==_0x313223['dateTimeFormat']&&'function'!=typeof _0x313223['dateTimeFormat'])throw new _0x41b92e('invalid-date-time-format');return _0x22c8b7=>{const _0x5c0dc4='string'==typeof _0x22c8b7?_0x56cee8(_0x22c8b7):_0x22c8b7,_0x531df6=new Date(),_0x42ea74=_0x2ed182(_0x531df6,_0x5c0dc4);return _0x313223['dateTimeFormat']?_0x313223['dateTimeFormat'](_0x5c0dc4):_0x4c1e3c(_0x5c0dc4,0x0===_0x42ea74?'\x27Today\x27\x20hh:mma':0x1===_0x42ea74?'\x27Yesterday\x27\x20hh:mma':_0x42ea74<0x7?'\x27Last\x27\x20EEEE\x20hh:mma':'MM-dd-yyyy\x20hh:mma');};}function g(_0x5b2f3d,_0xc49d64){const _0x3a85c0=_0x5b2f3d['mapper']['markerNameToElements'](_0xc49d64['name']);if(!_0x3a85c0)return null;const _0x22eb36=_0xb0af1b(_0x3a85c0['values']());return _0x5b2f3d['view']['domConverter']['mapViewToDom'](_0x22eb36)||null;}function R(_0x4835bc,_0x16e12a){if(0x0===_0x16e12a['length'])return null;const _0x5601f8=[],_0x34e49e=_0x4835bc['view']['domConverter'];for(const _0x554d6b of _0x16e12a){const _0xdccede=_0x4835bc['mapper']['markerNameToElements'](_0x554d6b['name']);if(!_0xdccede)continue;const _0xbf3dad=Array['from'](_0xdccede)['map'](_0x8597e3=>_0x34e49e['mapViewToDom'](_0x8597e3))['filter'](_0x39bc9f=>!!_0x39bc9f);_0x5601f8['push'](..._0xbf3dad);}if(0x0===_0x5601f8['length'])return null;const _0x41e38d=[];for(const _0x8f348e of _0x5601f8){const _0x555453=_0x8f348e['getClientRects']()['item'](0x0);_0x555453&&_0x41e38d['push']({'x':_0x555453['x'],'y':_0x555453['y'],'domElement':_0x8f348e});}return 0x0===_0x41e38d['length']?null:(_0x41e38d['sort']((_0x26cd76,_0x134ff1)=>_0x26cd76['y']-_0x134ff1['y']||_0x26cd76['x']-_0x134ff1['x']),_0x41e38d['map'](_0x39a0ac=>_0x39a0ac['domElement']));}function Z(_0x4e8f34,{limit:_0x325ece,suffix:_0x169c56='...'}){const _0x316a36=[];let _0x220ae1=0x0;const _0x152c74=_0x4e8f34['replace'](/</g,'\x0a<')['replace'](/>/g,'>\x0a')['replace'](/^\n/g,'')['replace'](/\n$/g,'')['split']('\x0a');for(let _0x49a95b=0x0;_0x49a95b<_0x152c74['length'];_0x49a95b++){let _0x3f00f9=_0x152c74[_0x49a95b];const _0x4cf4ad=$(_0x3f00f9);if(_0x3f00f9['startsWith']('<')){if(_0x220ae1>=_0x325ece){const _0x3ea18c=_0x3f00f9['match'](/[a-zA-Z]+/);if(!_0x3ea18c){_0x152c74[_0x49a95b]='';continue;}const _0x44f396=_0x3ea18c[0x0];_0x3f00f9['startsWith']('</')?(_0x316a36['length']&&(_0x3f00f9=''),_0x316a36['pop']()):(_0x316a36['push'](_0x44f396),_0x3f00f9='');}}else{if(_0x220ae1>=_0x325ece)_0x3f00f9='';else{if(_0x220ae1+_0x4cf4ad['length']>=_0x325ece){let _0x3dc99b=_0x325ece-_0x220ae1;if('\x20'===_0x4cf4ad[_0x3dc99b-0x1])_0x3dc99b--;else{const _0x537068=_0x4cf4ad['slice'](_0x3dc99b)['indexOf']('\x20');-0x1!==_0x537068?_0x3dc99b+=_0x537068:_0x3dc99b=_0x3f00f9['length'];}_0x3f00f9=_0x4cf4ad['slice'](0x0,_0x3dc99b)['join']('')+_0x169c56,_0x220ae1=_0x325ece;}else _0x220ae1+=_0x4cf4ad['length'];}}_0x152c74[_0x49a95b]=_0x3f00f9;}return _0x152c74['join']('\x0a')['replace'](/\n/g,'');}function $(_0x160a76){const _0xd98b1c=[];for(let _0x1184b1=0x0;_0x1184b1<_0x160a76['length'];_0x1184b1++){const _0x36266b=_0x160a76['substring'](_0x1184b1)['match'](/^&[a-z0-9#]+;/);if(_0x36266b){const _0x373a57=_0x36266b[0x0];_0xd98b1c['push'](_0x373a57),_0x1184b1+=_0x373a57['length']-0x1;}else _0xd98b1c['push'](_0x160a76[_0x1184b1]);}return _0xd98b1c;}class h extends _0x3e122a{['submitView'];['cancelView'];['focusTracker'];['keystrokes'];['focusCycler'];['focusables'];constructor(_0x4a46b2){super(_0x4a46b2);const _0x14d6c3=this['bindTemplate'];this['set']('message',r(_0x4a46b2,'Are\x20you\x20sure?')),this['submitView']=this['_createButtonView'](_0x4a46b2,r(_0x4a46b2,'Yes'),_0x1be3f8['check'],'submit'),this['cancelView']=this['_createButtonView'](_0x4a46b2,r(_0x4a46b2,'No'),_0x1be3f8['cancel'],'cancel'),this['focusables']=this['createCollection']([this['submitView'],this['cancelView']]),this['focusTracker']=new _0x161b7e(),this['keystrokes']=new _0x39f86a(),this['focusCycler']=new _0x1d6223({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-thread__remove-confirm'],'tabindex':-0x1,'role':'alertdialog'},'children':[{'tag':'div','attributes':{'class':'ck-thread__remove-confirm-inner','role':'presentation'},'children':[{'tag':'p','children':[{'text':_0x14d6c3['to']('message')}]},{'tag':'div','attributes':{'class':'ck-thread__remove-confirm-actions'},'children':[this['submitView'],this['cancelView']]}]}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['focus'](){this['cancelView']['element']['focus']({'preventScroll':!0x0});}['_createButtonView'](_0x3c1902,_0x403230,_0x32b23b,_0x1be0e1){const _0x2e5352=new _0x4280db(_0x3c1902);return _0x2e5352['label']=_0x403230,_0x2e5352['icon']=_0x32b23b,_0x2e5352['extendTemplate']({'attributes':{'class':'ck-thread__remove-confirm-'+_0x1be0e1}}),_0x2e5352['on']('execute',()=>this['fire'](_0x1be0e1)),_0x2e5352;}['_setupKeyboardNavigation'](){this['focusables']['forEach'](_0x3baee0=>{this['keystrokes']['listenTo'](_0x3baee0['element']),this['focusTracker']['add'](_0x3baee0['element']);}),this['keystrokes']['set']('esc',(_0x29bccb,_0x31e5b9)=>{this['fire']('cancel'),_0x31e5b9();});}}function m(_0x5c9e5f){return class extends _0x5c9e5f{['showConfirm'](_0x3fbb00,_0x2286bc){return this['confirmView']=new h(this['locale']),this['confirmView']['render'](),this['confirmView']['message']=_0x3fbb00,this['confirmView']['once']('cancel',()=>{this['_removeConfirm']();}),this['confirmView']['once']('submit',()=>{this['_removeConfirm']();}),_0x2286bc['appendChild'](this['confirmView']['element']),this['registerChild'](this['confirmView']),this['confirmView']['focus'](),this['set']('isConfirm',!0x0),new Promise(_0x5874f8=>this['confirmView']['on']('submit',_0x5874f8));}['cancelConfirm'](){this['isConfirm']&&this['confirmView']['fire']('cancel');}['_removeConfirm'](){this['element']&&this['confirmView']&&this['confirmView']['element']&&(this['element']['focus'](),this['confirmView']['element']['remove'](),this['deregisterChild'](this['confirmView']),this['isConfirm']=!0x1,this['fire']('removeConfirm'),this['confirmView']['destroy'](),this['confirmView']=void 0x0);}};}function M(_0x2ac003){let _0xc90c4b=0x0,_0x5e2922=0x0;for(const _0x2e6a39 of q(_0x2ac003))_0xc90c4b=(_0xc90c4b<<0x5)-_0xc90c4b+_0x2e6a39,_0xc90c4b|=0x0,[_0xc90c4b,_0x5e2922]=[_0x5e2922,_0xc90c4b];return z(_0xc90c4b)+z(_0x5e2922);}function*O(_0x567f55){null==_0x567f55||null==_0x567f55?yield 0x12b9b0a1:0x0===_0x567f55||!0x1===_0x567f55?yield 0x0:0x1===_0x567f55||0x1==_0x567f55?yield 0x1:Array['isArray'](_0x567f55)?yield*function*(_0x2d01e7){for(const _0x226563 of _0x2d01e7)yield*O(_0x226563);}(_0x567f55):'object'==typeof _0x567f55?yield*q(_0x567f55):'string'==typeof _0x567f55?yield*v(_0x567f55):'number'==typeof _0x567f55&&(yield _0x567f55);}function*q(_0x5b9cd5){if(yield w('{'),_0x5b9cd5){const _0x104ce0=Object['keys'](_0x5b9cd5)['sort']();for(const _0x395c66 of _0x104ce0){yield*v(_0x395c66),yield w(':');const _0x3f06a8=_0x5b9cd5[_0x395c66];yield*O(_0x3f06a8);}}yield w('}');}function*v(_0x58e95e){yield w('\x22');for(const _0x1c2879 of _0x58e95e)yield w(_0x1c2879);yield w('\x22');}function w(_0x115f74){return _0x115f74['charCodeAt'](0x0);}function z(_0x5f1290){return(_0x5f1290*=Math['sign'](_0x5f1290))['toString'](0x24);}const W=['initialData','context','toolbar','rootsAttributes'],D=['WebSocketGateway','RevisionTracker','Autosave','WordCount','DocumentOutline','WProofreader'];function S(_0x5d2c5f,_0x47a3c1,_0x181d2d,_0x435cac=[]){const _0x2e4ce1='string'==typeof _0x5d2c5f?_0x181d2d['get'](_0x5d2c5f)['constructor']:_0x5d2c5f['prototype']['constructor'];if(_0x47a3c1['has'](_0x2e4ce1))return _0x47a3c1['get'](_0x2e4ce1);_0x47a3c1['set'](_0x2e4ce1,!0x0);const _0x41ee88=[...D,..._0x435cac]['map'](_0x335212=>{if(_0x181d2d['has'](_0x335212))return _0x181d2d['get'](_0x335212)['constructor'];})['filter'](_0xb58de=>_0xb58de);if(_0x2e4ce1&&_0x41ee88['includes'](_0x2e4ce1))return _0x47a3c1['set'](_0x2e4ce1,!0x1),!0x1;if(!_0x2e4ce1['requires'])return _0x47a3c1['set'](_0x2e4ce1,!0x0),!0x0;const _0xecd5d8=_0x2e4ce1['requires']['every'](_0x5c7748=>S(_0x5c7748,_0x47a3c1,_0x181d2d,_0x435cac));return _0x47a3c1['set'](_0x2e4ce1,_0xecd5d8),_0xecd5d8;}function C(_0xba2d4b,_0x8af435){const _0x513dbe={};for(const _0x1f93d5 of _0xba2d4b['config']['names']())W['includes'](_0x1f93d5)||(_0x513dbe[_0x1f93d5]=_0xba2d4b['config']['get'](_0x1f93d5));const _0x2a37da=_0x513dbe['plugins']||[],_0x3613bc=_0xba2d4b['constructor']['builtinPlugins']||[],_0x127010=_0x2a37da['length']?_0x2a37da:_0x3613bc,_0xd19907=_0x513dbe['extraPlugins']||[];delete _0x513dbe['extraPlugins'];const _0x20990f=_0x513dbe['removePlugins']||[];delete _0x513dbe['removePlugins'];const _0x259a99=_0xba2d4b['_context']['config']['get']('plugins')||[],_0x74f6d7=_0x127010['concat'](_0xd19907)['concat'](_0x259a99)['map'](_0x4acd3f=>'string'==typeof _0x4acd3f?_0x3613bc['find'](_0x157e5b=>_0x157e5b['pluginName']==_0x4acd3f):_0x4acd3f)['filter'](_0x1fcb37=>!_0x20990f['includes'](_0x1fcb37)&&!_0x20990f['includes'](_0x1fcb37['pluginName'])),_0x5907c3=Array['from'](new Set(_0x74f6d7)),_0xef4f93=new Map();return _0x513dbe['plugins']=_0x5907c3['filter'](_0x1a5880=>S(_0x1a5880,_0xef4f93,_0xba2d4b['plugins'],_0x8af435)),_0x513dbe;}function B(_0x5bbcc0,_0x13c8ed){const _0x459d74=[];_0x5bbcc0['document']['selection']['on']('change:range',()=>{const _0x1f374f=function(_0x212b96,_0x5ab51e){const _0x35fd71=[];for(const _0x37798e of _0x212b96['markers']){const _0x5cdf41=_0x37798e['getRange']();(_0x5cdf41['containsPosition'](_0x5ab51e)||_0x5cdf41['start']['isEqual'](_0x5ab51e)||_0x5cdf41['end']['isEqual'](_0x5ab51e))&&_0x35fd71['push'](_0x37798e);}return _0x35fd71;}(_0x5bbcc0,_0x5bbcc0['document']['selection']['focus']),_0x36bd90=[],_0x353b44=[],_0x90dab6=[];for(const _0x3f91b7 of _0x459d74)_0x1f374f['includes'](_0x3f91b7)||_0x36bd90['push'](_0x3f91b7);for(const _0x423fce of _0x1f374f)_0x459d74['includes'](_0x423fce)||_0x353b44['push'](_0x423fce),_0x90dab6['push'](_0x423fce);(_0x36bd90['length']||_0x353b44['length'])&&_0x13c8ed({'left':_0x36bd90,'entered':_0x353b44}),_0x459d74['length']=0x0,_0x459d74['push'](..._0x90dab6);});}const Q='Ctrl+Shift+E';function T(_0x596aa9,_0x4b092a){const _0x5b9734=_0x596aa9['element'];_0x596aa9['keystrokes']['listenTo'](_0x5b9734);for(const _0x1ef3d of _0x4b092a)K(_0x596aa9,_0x1ef3d);_0x4b092a['on']('change',(_0x20e7c6,_0x4369ae)=>{for(const _0x5853ab of _0x4369ae['removed'])_(_0x596aa9,_0x5853ab);for(const _0x5571e0 of Array['from'](_0x4369ae['added'])['reverse']())K(_0x596aa9,_0x5571e0);}),_0x596aa9['keystrokes']['set']('enter',(_0xb64411,_0x46e2f7)=>{_0x5b9734===_0xb64411['target']&&(_0x596aa9['focusCycler']['focusFirst'](),_0x46e2f7());},{'filter':_0x552715=>_0x552715['target']===_0x5b9734}),_0x596aa9['keystrokes']['set']('esc',(_0x16b688,_0x24b043)=>{_0x5b9734!==_0x16b688['target']?_0x596aa9['focus']():_0x596aa9['fire']('escape'),_0x24b043();}),_0x596aa9['keystrokes']['set']('arrowdown',(_0x2ac2d9,_0x24097a)=>{_0x5b9734===_0x2ac2d9['target']&&(_0x596aa9['fire']('arrowdown'),_0x24097a());}),_0x596aa9['keystrokes']['set']('arrowup',(_0xf2defd,_0x899e84)=>{_0x5b9734===_0xf2defd['target']&&(_0x596aa9['fire']('arrowup'),_0x899e84());});}function K(_0x1c7147,_0x26ee84){_0x26ee84['isRendered']&&(_0x1c7147['focusTracker']['add'](_0x26ee84['element']),_0x1c7147['keystrokes']['listenTo'](_0x26ee84['element']),_0x296200(_0x26ee84)&&function(_0x4638fb,_0x6b3438){const _0x2ef615=_0x4638fb['actions'],_0x544342=_0x6b3438['actions'];for(const _0x534a0f of Object['keys'](_0x2ef615))if(_0x534a0f in _0x544342&&_0x2ef615[_0x534a0f]!==_0x544342[_0x534a0f])return!0x1;return!0x0;}(_0x1c7147['focusCycler'],_0x26ee84['focusCycler'])&&_0x1c7147['focusCycler']['chain'](_0x26ee84['focusCycler']));}function _(_0x510037,_0x597bfe){_0x510037['focusTracker']['remove'](_0x597bfe['element']),_0x510037['keystrokes']['stopListening'](_0x597bfe['element']),_0x296200(_0x597bfe)&&_0x510037['focusCycler']['unchain'](_0x597bfe['focusCycler']);}export{J as AriaDescriptionView,m as ConfirmMixin,Q as FOCUS_ANNOTATION_KEYSTROKE,U as LateFocusButtonView,Y as LateFocusDropdownButtonView,o as Permissions,H as UserView,l as Users,R as getAllMarkersDomElementsSorted,E as getDateTimeFormatter,g as getMarkerDomElement,M as hashObject,C as sanitizeEditorConfig,T as setupThreadKeyboardNavigation,B as surroundingMarkersDetector,Z as trimHtml};