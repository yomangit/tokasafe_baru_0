/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Command as ts,Plugin as _0x236ed3,PendingActions as _0x5c6943,icons as _0x287c41}from'@ckeditor/ckeditor5-core/dist/index.js';import{CKEditorError as _0x208bcb,ObservableMixin as _0x5898eb,uid as _0x2ea0eb,insertToPriorityArray as _0x570de3,priorities as _0x131ea4,logWarning as _0x34c1eb,getEnvKeystrokeText as _0x244bcf,FocusTracker as _0x1fcb16,KeystrokeHandler as _0xe419f6,Collection as Wt}from'@ckeditor/ckeditor5-utils/dist/index.js';import{normalizeColorOptions as _0x1739ac,View as _0x57133b,ViewCollection as _0x534e8d,FocusCycler as _0xdab5ab,ViewModel as _0x103217,createDropdown as Qt,SplitButtonView as _0xbb00d9,addListToDropdown as Kt,MenuBarMenuView as Yt,MenuBarMenuListView as Zt,ListSeparatorView as Xt,MenuBarMenuListItemView as te,MenuBarMenuListItemButtonView as _0x122f37}from'@ckeditor/ckeditor5-ui/dist/index.js';import{Users as _0x113ad9,hashObject as _0x2162a8,surroundingMarkersDetector as _0x52d039,FOCUS_ANNOTATION_KEYSTROKE as _0x283245,AriaDescriptionView as _0x31bfef,setupThreadKeyboardNavigation as _0x38dc1d,trimHtml as _0xf2e268,UserView as _0x5c548e,LateFocusButtonView as _0x20bc20,getDateTimeFormatter as _0x3970d4,getAllMarkersDomElementsSorted as _0x11fcdd,sanitizeEditorConfig as _0x2efe98}from'ckeditor5-collaboration/dist/index.js';import{Element as _0x12e789,LiveRange as _0x3a44ac,LivePosition as _0x3645f3}from'@ckeditor/ckeditor5-engine/dist/index.js';import{setHighlightHandling as _0x3946b1,toWidget as _0x176fdc}from'@ckeditor/ckeditor5-widget/dist/index.js';import{cloneDeep as _0x5c1218,set as _0x2f5af7,isEqual as _0x991291,unset as _0x5d4fc6,omit as Rt}from'lodash-es';import{Delete as _0x5e29ae,Input as tr}from'@ckeditor/ckeditor5-typing/dist/index.js';import{Enter as _0x341ab9,ShiftEnter as _0x427652}from'@ckeditor/ckeditor5-enter/dist/index.js';class B extends ts{['_enabledCommands'];constructor(_0x28a4d6,_0x31e4bd){super(_0x28a4d6),this['_enabledCommands']=_0x31e4bd,this['value']=!0x1,this['refresh'](),this['_isEnabledBasedOnSelection']=!0x1;}['refresh'](){this['isEnabled']=!0x0;}['execute'](){this['value']=!this['value'],this['value']?this['_disableUnsupportedCommands']():this['_enableCommands']();}['_disableUnsupportedCommands'](){for(const _0x5d26c1 of this['editor']['commands']['commands']())_0x5d26c1['affectsData']&&!this['_enabledCommands']['has'](_0x5d26c1)&&_0x5d26c1['forceDisabled']('TrackChangesCommand');}['_enableCommands'](){for(const _0x214ef0 of this['editor']['commands']['commands']())_0x214ef0['affectsData']&&!this['_enabledCommands']['has'](_0x214ef0)&&_0x214ef0['clearForceDisabled']('TrackChangesCommand');}}class x extends ts{['_suggestions'];constructor(_0x491e52,_0xcf00b4){super(_0x491e52),this['_suggestions']=_0xcf00b4,this['refresh'](),this['_isEnabledBasedOnSelection']=!0x1;}['refresh'](){this['isEnabled']=!0x0;}['execute'](_0x434f20){const _0x24aa23=this['_suggestions']['get'](_0x434f20);if(!_0x24aa23)throw new _0x208bcb('track-changes-accept-suggestion-not-found',this);const _0x268597=_0x24aa23['getRanges']();this['editor']['model']['canEditAt'](_0x268597)&&this['editor']['plugins']['get']('TrackChangesEditing')['acceptSuggestion'](_0x24aa23);}}class O extends ts{['_suggestions'];constructor(_0x106cc3,_0x655383){super(_0x106cc3),this['_suggestions']=_0x655383,this['refresh'](),this['_isEnabledBasedOnSelection']=!0x1;}['refresh'](){this['isEnabled']=!0x0;}['execute'](_0x3b10d9){const _0x20cc3e=this['_suggestions']['get'](_0x3b10d9);if(!_0x20cc3e)throw new _0x208bcb('track-changes-discard-suggestion-not-found',this);const _0x172f13=_0x20cc3e['getRanges']();this['editor']['model']['canEditAt'](_0x172f13)&&this['editor']['plugins']['get']('TrackChangesEditing')['discardSuggestion'](_0x20cc3e);}}function ls(_0x545bde,_0x1acc58){let _0x2a1a73='';return _0x2a1a73+=_0x545bde['split']('*')['map']((_0x4d1c5a,_0x49e900)=>_0x49e900%0x2!=0x0?'<span\x20class=\x22ck-suggestion-type\x22>'+nn(_0x4d1c5a)+'</span>':nn(_0x4d1c5a))['join'](''),_0x1acc58&&(_0x2a1a73+='<span\x20class=\x22ck-suggestion-color\x22\x20style=\x22background-color:\x20'+_0x1acc58['value']+'\x22\x20title=\x22'+_0x1acc58['title']+'\x22></span>'),_0x2a1a73;}function nn(_0x461b34){const _0x570a3b=document['createElement']('span');return _0x570a3b['innerText']=_0x461b34,_0x570a3b['innerHTML'];}function ss(_0x406d90){return _0x406d90['sort']((_0x336de1,_0x4153ba)=>'deletion'==_0x336de1['type']&&'deletion'!=_0x4153ba['type']?-0x1:'deletion'!=_0x336de1['type']&&'deletion'==_0x4153ba['type']?0x1:0x0);}function to(_0x8fbddf,_0xd59aeb){let _0x4c006d,_0x2c2ccc=0x0;const _0x321534=[],_0xeafbc3=_0xd59aeb['schema'];for(;_0x2c2ccc<_0x8fbddf['length'];){const _0x3c3e5e=_0x8fbddf[_0x2c2ccc],_0x2fce8b=_0x8fbddf[_0x2c2ccc+0x1];_0x4c006d||(_0x4c006d=_0xd59aeb['createPositionBefore'](_0x3c3e5e)),on(_0xd59aeb,_0x3c3e5e,_0x2fce8b)||(_0x321534['push'](_0xd59aeb['createRange'](_0x4c006d,_0xeafbc3['isObject'](_0x3c3e5e)?_0xd59aeb['createPositionAfter'](_0x3c3e5e):_0xd59aeb['createPositionAt'](_0x3c3e5e,'end'))),_0x4c006d=null),_0x2c2ccc++;}return _0x321534;}function on(_0x580e1a,_0x27300a,_0x2b28e9){if(!_0x2b28e9)return!0x1;const _0x15d85f=_0x580e1a['createPositionAfter'](_0x27300a),_0x14319f=_0x580e1a['createPositionBefore'](_0x2b28e9);return _0x15d85f['isTouching'](_0x14319f);}function rs(_0x49e666,_0x41b632,_0x1f37b6){for(;_0x1f37b6['length'];){const _0x27ec0e=_0x1f37b6['splice'](0x0,0x64);_0x49e666['change'](()=>{for(const _0x4e0851 of _0x27ec0e)_0x4e0851['isInContent']&&_0x41b632['execute'](_0x4e0851['id']);});}}class R extends ts{['_command'];['_suggestions'];constructor(_0x4c2d6e,_0x5ebf8a,_0x59c263){super(_0x4c2d6e),this['_command']=_0x5ebf8a,this['_suggestions']=_0x59c263,this['refresh'](),this['_isEnabledBasedOnSelection']=!0x1;}['refresh'](){const _0x14b26f=Array['from'](this['_suggestions']['values']())['some'](_0x43adf6=>_0x43adf6['isInContent']);this['isEnabled']=this['_command']['isEnabled']&&_0x14b26f;}['execute'](){const _0x2fcd6a=ss(Array['from'](this['_suggestions']['values']()));for(const _0x178f1a of _0x2fcd6a){const _0x3d9798=_0x178f1a['getRanges']();if(!this['editor']['model']['canEditAt'](_0x3d9798))return;}rs(this['editor']['model'],this['_command'],_0x2fcd6a);}}class E extends ts{['_command'];['_suggestions'];['_selectedSuggestions'];constructor(_0x4d9443,_0x5aa1e5,_0x2c77cf){super(_0x4d9443),this['_command']=_0x5aa1e5,this['_suggestions']=_0x2c77cf,this['_selectedSuggestions']=new Set(),this['refresh'](),this['_isEnabledBasedOnSelection']=!0x1;}['refresh'](){const _0x41dd3f=this['editor']['model']['document']['selection'],_0x458810=Array['from'](this['_suggestions']['values']());this['_selectedSuggestions']=function(_0x53d7de,_0x44a6b2){const _0x353477=Array['from'](_0x53d7de['getRanges']()),_0x37da2a=new Set();for(const _0x2bc283 of _0x44a6b2)if(_0x2bc283['isInContent']){for(const _0x23b2e1 of _0x353477)for(const _0x5a47c4 of _0x2bc283['getRanges']())(_0x23b2e1['isIntersecting'](_0x5a47c4)||_0x53d7de['isCollapsed']&&!_0x2bc283['isMultiRange']&&_0x2bc283['next']&&_0x5a47c4['end']['isTouching'](_0x23b2e1['start']))&&_0x37da2a['add'](_0x2bc283);}return _0x37da2a;}(_0x41dd3f,_0x458810),this['isEnabled']=this['_command']['isEnabled']&&!!this['_selectedSuggestions']['size'];}['execute'](){const _0x135b04=ss(Array['from'](this['_selectedSuggestions']));for(const _0x2d2a5a of _0x135b04){const _0x225fef=_0x2d2a5a['getRanges']();if(!this['editor']['model']['canEditAt'](_0x225fef))return;}rs(this['editor']['model'],this['_command'],_0x135b04);}}class u extends/* #__PURE__ -- @preserve */
_0x5898eb(){['id'];['type'];['subType'];['author'];['creator'];['isExternal'];['data'];['createdAt'];['_isDataLoaded']=!0x1;['_model'];['_onAccept'];['_onDiscard'];['_onAttributesChange'];['_markerNames'];constructor(_0x576de7,_0x11ff21){super(),this['id']=_0x11ff21['id'],this['type']=_0x11ff21['type'],this['subType']=_0x11ff21['subType']||null,this['author']=_0x11ff21['author'],this['creator']=_0x11ff21['creator']||_0x11ff21['author'],this['isExternal']=Boolean(_0x11ff21['attributes']&&_0x11ff21['attributes']['@external']),this['data']=null,this['_model']=_0x576de7,this['_onAccept']=_0x11ff21['onAccept'],this['_onDiscard']=_0x11ff21['onDiscard'],this['_onAttributesChange']=_0x11ff21['onAttributesChange'],this['_markerNames']=new Set(),this['createdAt']=null,this['set']('authoredAt',null),this['set']('attributes',_0x11ff21['attributes']||{}),this['set']('previous',null),this['set']('next',null),this['set']('commentThread',null),this['set']('_saved',!0x1),this['decorate']('accept'),this['decorate']('discard');}get['head'](){let _0x41735b=this;for(;_0x41735b['previous'];)_0x41735b=_0x41735b['previous'];return _0x41735b;}get['hasComments'](){return!!this['commentThread']&&this['commentThread']['length']>0x0;}get['isMultiRange'](){if(0x0==this['_markerNames']['size'])return!0x1;return 0x6==Array['from'](this['_markerNames'])[0x0]['split'](':')['length'];}get['isInContent'](){return null!==this['getFirstMarker']();}['addMarkerName'](_0x4601c4){this['_markerNames']['add'](_0x4601c4);}['getMarkerNames'](){return Array['from'](this['_markerNames']);}['getMarkers'](){return this['getMarkerNames']()['map'](_0x5b17e4=>this['_model']['markers']['get'](_0x5b17e4))['filter'](_0x2560ae=>_0x2560ae);}['getFirstMarker'](){return this['getMarkers']()[0x0]||null;}['removeMarkers'](){this['_model']['change'](_0x4ae114=>{for(const _0xfa22ac of this['getMarkers']())_0x4ae114['removeMarker'](_0xfa22ac);}),this['_markerNames']['clear']();}['removeMarker'](_0x5bddf2){this['_model']['change'](_0xc4d9c=>{_0xc4d9c['removeMarker'](_0x5bddf2);}),this['_markerNames']['delete'](_0x5bddf2);}['addRange'](_0x12a42d){const _0x1030d7='suggestion:'+this['type']+':'+this['subType']+':'+this['id']+':'+this['creator']['id']+':'+u['getMultiRangeId']();this['addMarkerName'](_0x1030d7),this['_model']['change'](_0xaff567=>{_0xaff567['addMarker'](_0x1030d7,{'range':_0x12a42d,'usingOperation':!0x0,'affectsData':!0x0});});}['isIntersectingWithRange'](_0x196cb0){for(const _0x418d58 of this['getRanges']())if(_0x418d58['isIntersecting'](_0x196cb0))return!0x0;return!0x1;}['getRanges'](){return this['getMarkers']()['map'](_0x5a9704=>_0x5a9704['getRange']());}['getItems'](){return this['getRanges']()['reduce']((_0xf936ed,_0x595f7a)=>[..._0xf936ed,..._0x595f7a['getItems']()],[]);}['getFirstRange'](){return this['getFirstMarker']()?.['getRange']()||null;}['getContainedElement'](){const _0x44febc=this['getRanges']();if(0x1!=_0x44febc['length'])return null;const _0x271806=_0x44febc[0x0],_0x54de1b=_0x271806['start']['nodeAfter'],_0x54ffd7=_0x271806['end']['nodeBefore'];return _0x54de1b instanceof _0x12e789?_0x54de1b!=_0x54ffd7?null:_0x54de1b:null;}['accept'](){this['_onAccept'](this['getRanges'](),this['data'],this['attributes']),this['removeMarkers']();}['discard'](){this['_onDiscard'](this['getRanges'](),this['data'],this['attributes']),this['removeMarkers']();}['getAllAdjacentSuggestions'](){const _0x14ca11=[];let _0x15933e=this['head'];for(;_0x15933e;)_0x14ca11['push'](_0x15933e),_0x15933e=_0x15933e['next'];return _0x14ca11;}['setAttribute'](_0x1128b2,_0x11b944){const _0xf592e5=_0x5c1218(this['attributes']);_0x2f5af7(_0xf592e5,_0x1128b2,_0x11b944),_0x991291(_0xf592e5,this['attributes'])||(this['attributes']=_0xf592e5,this['_onAttributesChange'](_0xf592e5));}['removeAttribute'](_0x408caf){const _0x5ee482=_0x5c1218(this['attributes']);_0x5d4fc6(_0x5ee482,_0x408caf),_0x991291(_0x5ee482,this['attributes'])||(this['attributes']=_0x5ee482,this['_onAttributesChange'](this['attributes']));}['toJSON'](){return{'id':this['id'],'type':this['subType']?this['type']+':'+this['subType']:this['type'],'authorId':this['creator']['id'],'createdAt':this['createdAt'],'hasComments':this['hasComments'],'data':this['data'],'attributes':this['attributes']};}static['getMultiRangeId'](){return _0x2ea0eb()['substr'](0x1,0x5);}}function o(_0x281033,_0x45cfc4,_0x1f9e71){const _0x241231=_0x281033['t'],t=_0x281033['t'];switch(_0x45cfc4){case'Track\x20changes':return t('Track\x20changes');case'Accept\x20suggestion':return t('Accept\x20suggestion');case'Discard\x20suggestion':return t('Discard\x20suggestion');case'Accept\x20all\x20suggestions':return t('Accept\x20all\x20suggestions');case'Accept\x20all\x20selected\x20suggestions':return t('Accept\x20all\x20selected\x20suggestions');case'Discard\x20all\x20suggestions':return t('Discard\x20all\x20suggestions');case'Discard\x20all\x20selected\x20suggestions':return t('Discard\x20all\x20selected\x20suggestions');case'*Reset\x20font\x20size*':return t('*Reset\x20font\x20size*');case'*Reset\x20font\x20family*':return t('*Reset\x20font\x20family*');case'*Reset\x20font\x20color*':return t('*Reset\x20font\x20color*');case'*Reset\x20font\x20background\x20color*':return t('*Reset\x20font\x20background\x20color*');case'*Remove\x20image\x20text\x20alternative*':return t('*Remove\x20image\x20text\x20alternative*');case'*Reset\x20image\x20width*':return t('*Reset\x20image\x20width*');case'*Remove\x20link*':return t('*Remove\x20link*');case'*Check\x20item*':return t('*Check\x20item*');case'*Uncheck\x20item*':return t('*Uncheck\x20item*');case'*Remove\x20all\x20formatting*':return t('*Remove\x20all\x20formatting*');case'*Replace\x20table\x20cells*':return t('*Replace\x20table\x20cells*');case'*Merge\x20cells*':return t('*Merge\x20cells*');case'*Split\x20cell:*\x20vertically':return t('*Split\x20cell:*\x20vertically');case'*Split\x20cell:*\x20horizontally':return t('*Split\x20cell:*\x20horizontally');case'*Indent:*\x20%0':return t('*Indent:*\x20%0',_0x1f9e71);case'*Outdent:*\x20%0':return t('*Outdent:*\x20%0',_0x1f9e71);case'*Change\x20to:*\x20%0':return t('*Change\x20to:*\x20%0',_0x1f9e71);case'*Insert:*\x20%0':return t('*Insert:*\x20%0',_0x1f9e71);case'*Format:*\x20%0':return t('*Format:*\x20%0',_0x1f9e71);case'*Format:*\x20change\x20table\x20properties':return t('*Format:*\x20change\x20table\x20properties');case'*Format:*\x20change\x20table\x20cell\x20properties':return t('*Format:*\x20change\x20table\x20cell\x20properties');case'*Format:*\x20insert\x20into\x20%0':return t('*Format:*\x20insert\x20into\x20%0',_0x1f9e71);case'*Format:*\x20remove\x20from\x20%0':return t('*Format:*\x20remove\x20from\x20%0',_0x1f9e71);case'*Replace\x20image\x20URL*':return t('*Replace\x20image\x20URL*');case'*Format:*\x20resize\x20table':return t('*Format:*\x20resize\x20table');case'*Format:*\x20set\x20order\x20to\x20reversed':return t('*Format:*\x20set\x20order\x20to\x20reversed');case'*Format:*\x20set\x20order\x20to\x20regular':return t('*Format:*\x20set\x20order\x20to\x20regular');case'*Format:*\x20set\x20start\x20index\x20to\x20%0':return t('*Format:*\x20set\x20start\x20index\x20to\x20%0',_0x1f9e71);case'*Change\x20%0\x20content*':return t('*Change\x20%0\x20content*',_0x1f9e71);case'*Remove:*\x20%0':return t('*Remove:*\x20%0',_0x1f9e71);case'*Merge:*\x20%0':return t('*Merge:*\x20%0',_0x1f9e71);case'*Split:*\x20%0':return t('*Split:*\x20%0',_0x1f9e71);case'*Remove\x20format:*\x20%0':return t('*Remove\x20format:*\x20%0',_0x1f9e71);case'*Set\x20font\x20size:*\x20%0':return t('*Set\x20font\x20size:*\x20%0',_0x1f9e71);case'*Set\x20font\x20family:*\x20%0':return t('*Set\x20font\x20family:*\x20%0',_0x1f9e71);case'*Set\x20format\x20to:*\x20%0':return t('*Set\x20format\x20to:*\x20%0',_0x1f9e71);case'*Set\x20font\x20color:*\x20%0':return t('*Set\x20font\x20color:*\x20%0',_0x1f9e71);case'*Set\x20font\x20background\x20color:*\x20%0':return t('*Set\x20font\x20background\x20color:*\x20%0',_0x1f9e71);case'*Set\x20format:*\x20%0':return t('*Set\x20format:*\x20%0',_0x1f9e71);case'*Set\x20image\x20text\x20alternative:*\x20%0':return t('*Set\x20image\x20text\x20alternative:*\x20%0',_0x1f9e71);case'*Set\x20image\x20width:*\x20%0':return t('*Set\x20image\x20width:*\x20%0',_0x1f9e71);case'*Set\x20link:*\x20%0':return t('*Set\x20link:*\x20%0',_0x1f9e71);case'*Set\x20highlight:*\x20%0':return t('*Set\x20highlight:*\x20%0',_0x1f9e71);case'*Remove\x20highlight*':return t('*Remove\x20highlight*');case'FORMAT_HIGHLIGHT':return t({'string':'highlight','id':'FORMAT_HIGHLIGHT'});case'FORMAT_RESTRICTED_ENABLED':return t({'string':'*Enable\x20in\x20restricted\x20editing\x20mode*','id':'FORMAT_RESTRICTED_ENABLED'});case'FORMAT_RESTRICTED_DISABLED':return t({'string':'*Disable\x20in\x20restricted\x20editing\x20mode*','id':'FORMAT_RESTRICTED_DISABLED'});case'ELEMENT_TABLE':return t({'string':'table','plural':'%0\x20tables','id':'ELEMENT_TABLE'},_0x1f9e71);case'ELEMENT_PARAGRAPH':return t({'string':'paragraph','plural':'%0\x20paragraphs','id':'ELEMENT_PARAGRAPH'},_0x1f9e71);case'ELEMENT_PAGE_BREAK':return t({'string':'page\x20break','plural':'%0\x20page\x20breaks','id':'ELEMENT_PAGE_BREAK'},_0x1f9e71);case'ELEMENT_MEDIA':return t({'string':'media\x20item','plural':'%0\x20media\x20items','id':'ELEMENT_MEDIA'},_0x1f9e71);case'ELEMENT_IMAGE':return t({'string':'image','plural':'%0\x20images','id':'ELEMENT_IMAGE'},_0x1f9e71);case'ELEMENT_INLINE_IMAGE':return t({'string':'image','plural':'%0\x20images','id':'ELEMENT_INLINE_IMAGE'},_0x1f9e71);case'FORMAT_SIDE_IMAGE':return t({'string':'side\x20image','id':'FORMAT_SIDE_IMAGE'});case'ELEMENT_CAPTION':return t({'string':'caption','id':'ELEMENT_CAPTION'});case'ELEMENT_HORIZONTAL_LINE':return t({'string':'horizontal\x20line','plural':'%0\x20horizontal\x20lines','id':'ELEMENT_HORIZONTAL_LINE'},_0x1f9e71);case'ELEMENT_HTML_EMBED':return t({'string':'HTML\x20embed','plural':'%0\x20HTML\x20embeds','id':'ELEMENT_HTML_EMBED'},_0x1f9e71);case'ELEMENT_HEADING':return t({'string':'heading\x20(level\x20%1)','plural':'%0\x20headings\x20(level\x20%1)','id':'ELEMENT_HEADING'},_0x1f9e71);case'ELEMENT_HEADING_CUSTOM':return t({'string':'heading\x20(%1)','plural':'%0\x20headings\x20(%1)','id':'ELEMENT_HEADING_CUSTOM'},_0x1f9e71);case'ELEMENT_LIST_ITEM':return t({'string':'list\x20item','plural':'%0\x20list\x20items','id':'ELEMENT_LIST_ITEM'},_0x1f9e71);case'ELEMENT_DEFAULT_LIST_DEFAULT':return t({'string':'default\x20list\x20style','id':'ELEMENT_DEFAULT_LIST_DEFAULT'});case'ELEMENT_BULLETED_LIST':return t({'string':'bulleted\x20list','id':'ELEMENT_BULLETED_LIST'});case'ELEMENT_BULLETED_LIST_DEFAULT':return t({'string':'bulleted\x20list\x20(default)','id':'ELEMENT_BULLETED_LIST_DEFAULT'});case'ELEMENT_BULLETED_LIST_CIRCLE':return t({'string':'bulleted\x20list\x20(circle)','id':'ELEMENT_BULLETED_LIST_CIRCLE'});case'ELEMENT_BULLETED_LIST_DISC':return t({'string':'bulleted\x20list\x20(disc)','id':'ELEMENT_BULLETED_LIST_DISC'});case'ELEMENT_BULLETED_LIST_SQUARE':return t({'string':'bulleted\x20list\x20(square)','id':'ELEMENT_BULLETED_LIST_SQUARE'});case'ELEMENT_NUMBERED_LIST_DEFAULT':return t({'string':'numbered\x20list\x20(default)','id':'ELEMENT_NUMBERED_LIST_DEFAULT'});case'ELEMENT_NUMBERED_LIST':return t({'string':'numbered\x20list','id':'ELEMENT_NUMBERED_LIST'});case'ELEMENT_NUMBERED_LIST_DECIMAL':return t({'string':'numbered\x20list\x20(decimal)','id':'ELEMENT_NUMBERED_LIST_DECIMAL'});case'ELEMENT_NUMBERED_LIST_DECIMAL_LEADING_ZERO':return t({'string':'numbered\x20list\x20(decimal\x20with\x20leading\x20zero)','id':'ELEMENT_NUMBERED_LIST_DECIMAL_LEADING_ZERO'});case'ELEMENT_NUMBERED_LIST_LOWER_LATIN':return t({'string':'numbered\x20list\x20(lower-latin)','id':'ELEMENT_NUMBERED_LIST_LOWER_LATIN'});case'ELEMENT_NUMBERED_LIST_LOWER_ROMAN':return t({'string':'numbered\x20list\x20(lower-roman)','id':'ELEMENT_NUMBERED_LIST_LOWER_ROMAN'});case'ELEMENT_NUMBERED_LIST_UPPER_LATIN':return t({'string':'numbered\x20list\x20(upper-latin)','id':'ELEMENT_NUMBERED_LIST_UPPER_LATIN'});case'ELEMENT_NUMBERED_LIST_UPPER_ROMAN':return t({'string':'numbered\x20list\x20(upper-roman)','id':'ELEMENT_NUMBERED_LIST_UPPER_ROMAN'});case'ELEMENT_TODO_LIST':return t({'string':'to-do\x20list','id':'ELEMENT_TODO_LIST'});case'ELEMENT_MULTI_LEVEL_LIST':return t({'string':'multi-level\x20list','id':'ELEMENT_MULTI_LEVEL_LIST'});case'REPLACE_TEXT':return t({'string':'*Replace:*\x20%0\x20*with*\x20%1','id':'REPLACE_TEXT'},_0x1f9e71);case'ELEMENT_SPACE':return t({'string':'space','plural':'%0\x20spaces','id':'ELEMENT_SPACE'},_0x1f9e71);case'FORMAT_ALIGNMENT':return t({'string':'alignment','id':'FORMAT_ALIGNMENT'});case'FORMAT_ALIGN_TO_LEFT':return t({'string':'align\x20to\x20left','id':'FORMAT_ALIGN_TO_LEFT'});case'FORMAT_ALIGN_TO_RIGHT':return t({'string':'align\x20to\x20right','id':'FORMAT_ALIGN_TO_RIGHT'});case'FORMAT_ALIGN_TO_CENTER':return t({'string':'align\x20to\x20center','id':'FORMAT_ALIGN_TO_CENTER'});case'FORMAT_JUSTIFY_TEXT':return t({'string':'justify','id':'FORMAT_JUSTIFY_TEXT'});case'FORMAT_BOLD':return t({'string':'bold','id':'FORMAT_BOLD'});case'FORMAT_ITALIC':return t({'string':'italic','id':'FORMAT_ITALIC'});case'FORMAT_UNDERLINE':return t({'string':'underline','id':'FORMAT_UNDERLINE'});case'FORMAT_CODE':return t({'string':'code','id':'FORMAT_CODE'});case'FORMAT_STRIKETHROUGH':return t({'string':'strikethrough','id':'FORMAT_STRIKETHROUGH'});case'FORMAT_SUBSCRIPT':return t({'string':'subscript','id':'FORMAT_SUBSCRIPT'});case'FORMAT_SUPERSCRIPT':return t({'string':'superscript','id':'FORMAT_SUPERSCRIPT'});case'ELEMENT_BLOCK_QUOTE':return t({'string':'block\x20quote','id':'ELEMENT_BLOCK_QUOTE'});case'ELEMENT_CODE_BLOCK':return t({'string':'code\x20block','plural':'%0\x20code\x20blocks','id':'ELEMENT_CODE_BLOCK'},_0x1f9e71);case'FORMAT_HEADER_COLUMN':return t({'string':'header\x20column','id':'FORMAT_HEADER_COLUMN'});case'FORMAT_REGULAR_COLUMN':return t({'string':'regular\x20column','id':'FORMAT_REGULAR_COLUMN'});case'FORMAT_HEADER_ROW':return t({'string':'header\x20row','id':'FORMAT_HEADER_ROW'});case'FORMAT_REGULAR_ROW':return t({'string':'regular\x20row','id':'FORMAT_REGULAR_ROW'});case'FORMAT_INDENT':return t({'string':'indent','id':'FORMAT_INDENT'});case'FORMAT_LIST_REVERSED':return t({'string':'list\x20reversed','id':'FORMAT_LIST_REVERSED'});case'FORMAT_LIST_START':return t({'string':'list\x20start','id':'FORMAT_LIST_START'});case'FORMAT_FONT_SIZE':return t({'string':'font\x20size','id':'FORMAT_FONT_SIZE'});case'FORMAT_FONT_FAMILY':return t({'string':'font\x20family','id':'FORMAT_FONT_FAMILY'});case'FORMAT_FONT_COLOR':return t({'string':'font\x20color','id':'FORMAT_FONT_COLOR'});case'FORMAT_FONT_BACKGROUND':return t({'string':'font\x20background\x20color','id':'FORMAT_FONT_BACKGROUND'});case'FORMAT_IMAGE_SIZE':return t({'string':'image\x20size','id':'FORMAT_IMAGE_SIZE'});case'FORMAT_STYLE':return t({'string':'style','id':'FORMAT_STYLE'});case'PENDING_ACTION_SUGGESTION':return t({'string':'Unsaved\x20change\x20in\x20suggestion.','id':'PENDING_ACTION_SUGGESTION'});case'ELEMENT_TABLE_WITH_TEXT':return t({'string':'table\x20*with\x20text*\x20%0','id':'ELEMENT_TABLE_WITH_TEXT'},_0x1f9e71);case'ELEMENT_TABLE_ROW':return t({'string':'table\x20row','plural':'%0\x20table\x20rows','id':'ELEMENT_TABLE_ROW'},_0x1f9e71);case'ELEMENT_TABLE_ROW_WITH_TEXT':return t({'string':'table\x20row\x20*with\x20text*\x20%1','plural':'%0\x20table\x20rows\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_ROW_WITH_TEXT'},_0x1f9e71);case'ELEMENT_TABLE_COLUMN':return t({'string':'table\x20column','plural':'%0\x20table\x20columns','id':'ELEMENT_TABLE_COLUMN'},_0x1f9e71);case'ELEMENT_TABLE_COLUMN_WITH_TEXT':return t({'string':'table\x20column\x20*with\x20text*\x20%1','plural':'%0\x20table\x20columns\x20*with\x20text*\x20%1','id':'ELEMENT_TABLE_COLUMN_WITH_TEXT'},_0x1f9e71);case'ELEMENT_TABLE_OF_CONTENTS':return t({'string':'table\x20of\x20contents','plural':'%0\x20tables\x20of\x20contents','id':'ELEMENT_TABLE_OF_CONTENTS'},_0x1f9e71);case'ELEMENT_LINE_BREAK':return t({'id':'ELEMENT_LINE_BREAK','string':'line\x20break','plural':'%0\x20line\x20breaks'},_0x1f9e71);case'ELEMENT_TITLE':return t({'id':'ELEMENT_TITLE','string':'title'});case'ELEMENT_MERGE_FIELD':return t({'id':'ELEMENT_MERGE_FIELD','string':'merge\x20field','plural':'%0\x20merge\x20fields'},_0x1f9e71);case'EXTERNAL_SUGGESTION':return t({'id':'EXTERNAL_SUGGESTION','string':'This\x20suggestion\x20comes\x20from\x20an\x20external\x20source.'});case'EXTERNAL_IMPORT_WORD_SUGGESTION':return t({'string':'This\x20suggestion\x20comes\x20from\x20an\x20imported\x20Word\x20file.','id':'EXTERNAL_IMPORT_WORD_SUGGESTION'});case'EXTERNAL_AVATAR':return _0x241231({'string':'Displayed\x20author\x20name\x20comes\x20from\x20external\x20source\x20(added\x20by\x20%0)','id':'EXTERNAL_AVATAR'},_0x1f9e71);case'EXTERNAL_IMPORT_WORD_AVATAR':return _0x241231({'string':'Displayed\x20author\x20name\x20comes\x20from\x20a\x20Word\x20document\x20imported\x20by\x20%0','id':'EXTERNAL_IMPORT_WORD_AVATAR'},_0x1f9e71);case'ENTER_INSERTION_SUGGESTION_ANNOUNCEMENT':return t({'string':'Entering\x20insertion\x20suggestion.\x20Press\x20%0\x20to\x20go\x20to\x20the\x20discussion.','id':'ENTER_INSERTION_SUGGESTION_ANNOUNCEMENT'},_0x1f9e71);case'LEAVE_INSERTION_SUGGESTION_ANNOUNCEMENT':return t({'string':'Leaving\x20insertion\x20suggestion.','id':'LEAVE_INSERTION_SUGGESTION_ANNOUNCEMENT'});case'ENTER_DELETION_SUGGESTION_ANNOUNCEMENT':return t({'string':'Entering\x20deletion\x20suggestion.\x20Press\x20%0\x20to\x20go\x20to\x20the\x20discussion.','id':'ENTER_DELETION_SUGGESTION_ANNOUNCEMENT'},_0x1f9e71);case'LEAVE_DELETION_SUGGESTION_ANNOUNCEMENT':return t({'string':'Leaving\x20deletion\x20suggestion.','id':'LEAVE_DELETION_SUGGESTION_ANNOUNCEMENT'});case'ENTER_FORMATTING_SUGGESTION_ANNOUNCEMENT':return t({'string':'Entering\x20formatting\x20suggestion.\x20Press\x20%0\x20to\x20go\x20to\x20the\x20discussion.','id':'ENTER_FORMATTING_SUGGESTION_ANNOUNCEMENT'},_0x1f9e71);case'LEAVE_FORMATTING_SUGGESTION_ANNOUNCEMENT':return t({'string':'Leaving\x20formatting\x20suggestion.','id':'LEAVE_FORMATTING_SUGGESTION_ANNOUNCEMENT'});case'SUGGESTION_THREAD_ARIA_LABEL':return t({'string':'Suggestion\x20by\x20%1.\x20Created\x20on\x20%2.\x20%0\x20reply.\x20%3','plural':'Suggestion\x20by\x20%1.\x20Created\x20on\x20%2.\x20%0\x20replies.\x20%3','id':'SUGGESTION_THREAD_ARIA_LABEL'},_0x1f9e71);case'SUGGESTION_THREAD_DESCRIPTION':return t({'string':'Press\x20Enter\x20for\x20more\x20options.\x20Press\x20Escape\x20to\x20exit.','id':'SUGGESTION_THREAD_DESCRIPTION'});default:return _0x45cfc4;}}class f{['_customCallbacks'];['_itemLabels'];['_itemLabelsCallbacks'];['_attributeLabels'];['_schema'];['_locale'];constructor(_0x19f120,_0x39e470){this['_customCallbacks']=[],this['_itemLabels']=new Map(),this['_itemLabelsCallbacks']=[],this['_attributeLabels']=new Map(),this['_schema']=_0x19f120,this['_locale']=_0x39e470;}['getDescriptions'](_0x12b808){const _0x13dc60=[],_0x1986bd=new Set(),_0x4d738a=new Set();for(let _0x46a378=0x0;_0x46a378<_0x12b808['length'];_0x46a378++){const _0x8dfe4=_0x12b808[_0x46a378];if(!_0x8dfe4['isInContent'])continue;const _0x3c48d6=this['_handleCustomCallbackDescription'](_0x8dfe4);if(_0x3c48d6){if(null!=_0x8dfe4['subType']){if(_0x1986bd['has'](_0x8dfe4['subType']))continue;_0x1986bd['add'](_0x8dfe4['subType']);}_0x13dc60['push'](_0x3c48d6);}else{if('attribute'!=_0x8dfe4['type'])'insertion'!=_0x8dfe4['type']&&'deletion'!=_0x8dfe4['type']||this['_handleInsertRemoveSuggestionDescription'](_0x13dc60,_0x8dfe4,_0x12b808[_0x46a378+0x1]);else{const _0x497f96=_0x8dfe4['data']['key'];if(_0x4d738a['has'](_0x497f96))continue;_0x4d738a['add'](_0x8dfe4['data']['key']),_0x497f96==m?this['_handleRenameSuggestionDescription'](_0x13dc60,_0x8dfe4):this['_handleAttributeSuggestionDescription'](_0x13dc60,_0x8dfe4);}}}return this['_resolveDescriptionItems'](_0x13dc60);}['registerDescriptionCallback'](_0x29298f){this['_customCallbacks']['push'](_0x29298f);}['registerElementLabel'](_0x5f1ec1,_0x3d13eb,_0x4ae292=_0x131ea4['normal']){'function'==typeof _0x5f1ec1?_0x570de3(this['_itemLabelsCallbacks'],{'matchingCallback':_0x5f1ec1,'label':_0x3d13eb,'priority':_0x4ae292}):this['_itemLabels']['set'](_0x5f1ec1,_0x3d13eb);}['registerAttributeLabel'](_0x288587,_0x7f8c30){this['_attributeLabels']['set'](_0x288587,_0x7f8c30);}['getItemLabel'](_0x4cd9f,_0x5439bb=0x1){let _0x473aa0;for(const _0x965119 of this['_itemLabelsCallbacks'])if(_0x965119['matchingCallback'](_0x4cd9f)){_0x473aa0=_0x965119['label'];break;}return _0x473aa0||(_0x473aa0=this['_itemLabels']['get'](_0x4cd9f['name'])),_0x473aa0?_0x473aa0(_0x5439bb):0x1!==_0x5439bb?_0x5439bb+'\x20'+_0x4cd9f['name']+'s':''+_0x4cd9f['name'];}['_addDescriptionItems'](_0x3a8b71,_0x2a3686){const _0x303433=_0x2a3686['getFirstRange']()['getWalker'](),_0x17fb16='insertion'==_0x2a3686['type']?'add':'remove';for(const _0xa96c96 of _0x303433){const _0x4dd92e=_0xa96c96['item'],_0x47c657=_0x3a8b71[_0x3a8b71['length']-0x1];if(_0x4dd92e['is']('$textProxy'))_0x47c657&&_0x47c657['type']['indexOf']('Container')>-0x1&&_0x3a8b71['pop'](),_0x47c657&&'text'==_0x47c657['type']?_0x47c657[_0x17fb16]+=_0x4dd92e['data']:_0x3a8b71['push']({'type':'text','add':'add'==_0x17fb16?_0x4dd92e['data']:'','remove':'remove'==_0x17fb16?_0x4dd92e['data']:''});else{if(this['_schema']['isObject'](_0x4dd92e)){const _0x992abe=_0x4dd92e;if(_0x47c657&&_0x47c657['type']['indexOf']('Container')>-0x1&&_0x3a8b71['pop'](),'elementEnd'==_0xa96c96['type'])continue;_0x47c657&&_0x47c657['type']==_0x17fb16+'Object'&&_0x47c657['element']['name']==_0x992abe['name']?_0x47c657['quantity']++:_0x3a8b71['push']({'type':_0x17fb16+'Object','element':_0x992abe,'quantity':0x1}),_0x303433['skip'](_0x40ef89=>!('elementEnd'==_0x40ef89['type']&&_0x40ef89['item']==_0x4dd92e));}else{if(this['_schema']['checkChild'](_0x4dd92e,'$text')||_0x4dd92e['is']('element','softBreak')){const _0x3c1823=_0x4dd92e;if('add'==_0x17fb16&&'elementStart'==_0xa96c96['type']||'remove'==_0x17fb16&&'elementEnd'==_0xa96c96['type'])continue;if(_0x47c657&&-0x1==_0x47c657['type']['indexOf']('Container')){'text'==_0x47c657['type']&&(_0x47c657[_0x17fb16]+='\x0a');continue;}let _0x4e58f6;if(_0x4e58f6='add'==_0x17fb16?_0x3c1823['nextSibling']&&!this['_schema']['isObject'](_0x3c1823['nextSibling'])?_0x3c1823['nextSibling']:null:_0x3c1823['previousSibling']&&!this['_schema']['isObject'](_0x3c1823['previousSibling'])?_0x3c1823['previousSibling']:null,_0x3c1823['isEmpty']||_0x4e58f6&&_0x4e58f6['isEmpty']){const _0x222235=_0x4e58f6&&_0x4e58f6['isEmpty']?_0x4e58f6:_0x3c1823;_0x47c657&&_0x47c657['type']==_0x17fb16+'EmptyContainer'&&_0x47c657['element']['name']==_0x222235['name']?_0x47c657['quantity']++:_0x3a8b71['push']({'type':_0x17fb16+'EmptyContainer','element':_0x222235,'quantity':0x1});}else _0x3a8b71['push']({'type':_0x17fb16+'Container','element':_0x3c1823});}}}}}['_resolveDescriptionItems'](_0x54708c){const _0x11ed29=this['_locale'],_0x1c7cdc=[],_0x311cb3=[],_0x12a1ed=[];for(const _0x3264ab of _0x54708c)switch(_0x3264ab['type']){case'text':if(_0x3264ab['add']=_0x3264ab['add']['replace'](/(\S)\u000A+(\S)/g,'$1\x20$2')['replace'](/\u000A/g,''),_0x3264ab['remove']=_0x3264ab['remove']['replace'](/(\S)\u000A+(\S)/g,'$1\x20$2')['replace'](/\u000A/g,''),''!=_0x3264ab['add']&&''!=_0x3264ab['remove']){_0x1c7cdc['push']({'type':'replace','content':o(_0x11ed29,'REPLACE_TEXT',['\x22'+_0x3264ab['remove']+'\x22','\x22'+_0x3264ab['add']+'\x22'])});continue;}if(null!=_0x3264ab['add']['match'](/^ +$/)){_0x1c7cdc['push']({'type':'insertion','content':o(_0x11ed29,'*Insert:*\x20%0',o(_0x11ed29,'ELEMENT_SPACE',_0x3264ab['add']['length']))});continue;}if(null!=_0x3264ab['remove']['match'](/^ +$/)){_0x1c7cdc['push']({'type':'deletion','content':o(_0x11ed29,'*Remove:*\x20%0',o(_0x11ed29,'ELEMENT_SPACE',_0x3264ab['remove']['length']))});continue;}if(''!=_0x3264ab['add']){_0x1c7cdc['push']({'type':'insertion','content':o(_0x11ed29,'*Insert:*\x20%0','\x22'+_0x3264ab['add']+'\x22')});continue;}_0x1c7cdc['push']({'type':'deletion','content':o(_0x11ed29,'*Remove:*\x20%0','\x22'+_0x3264ab['remove']+'\x22')});continue;case'addEmptyContainer':case'addObject':_0x1c7cdc['push']({'type':'insertion','content':o(_0x11ed29,'*Insert:*\x20%0',this['getItemLabel'](_0x3264ab['element'],_0x3264ab['quantity']))});continue;case'removeEmptyContainer':case'removeObject':_0x1c7cdc['push']({'type':'deletion','content':o(_0x11ed29,'*Remove:*\x20%0',this['getItemLabel'](_0x3264ab['element'],_0x3264ab['quantity']))});continue;case'addContainer':_0x1c7cdc['push']({'type':'insertion','content':o(_0x11ed29,'*Split:*\x20%0',this['getItemLabel'](_0x3264ab['element'],_0x3264ab['quantity']))});continue;case'removeContainer':_0x1c7cdc['push']({'type':'deletion','content':o(_0x11ed29,'*Merge:*\x20%0',this['getItemLabel'](_0x3264ab['element'],_0x3264ab['quantity']))});continue;case'addFormat':_0x311cb3['push'](_0x3264ab['key']);continue;case'removeFormat':_0x12a1ed['push'](_0x3264ab['key']);continue;default:_0x1c7cdc['push'](_0x3264ab);}if(_0x311cb3['length']){const _0x2dc1d4=_0x311cb3['map'](_0x25d020=>this['_attributeLabels']['has'](_0x25d020)?this['_attributeLabels']['get'](_0x25d020):_0x25d020)['join'](',\x20');_0x1c7cdc['push']({'type':'format','content':o(this['_locale'],'*Set\x20format:*\x20%0',_0x2dc1d4)});}if(_0x12a1ed['length']){const _0x133075=_0x12a1ed['map'](_0x5311a4=>this['_attributeLabels']['has'](_0x5311a4)?this['_attributeLabels']['get'](_0x5311a4):_0x5311a4)['join'](',\x20');_0x1c7cdc['push']({'type':'format','content':o(this['_locale'],'*Remove\x20format:*\x20%0',_0x133075)});}return _0x1c7cdc;}['_handleCustomCallbackDescription'](_0x3424f8){for(const _0x3ec963 of this['_customCallbacks']){const _0x70a3aa=_0x3ec963(_0x3424f8);if(_0x70a3aa&&'type'in _0x70a3aa)return _0x70a3aa;}}['_handleAttributeSuggestionDescription'](_0x53a8a4,_0x32d09c){const _0xe82a8b=_0x32d09c['data'],_0x1bc00f=void 0x0===_0xe82a8b['newValue']?'removeFormat':'addFormat';_0x53a8a4['push']({'type':_0x1bc00f,'key':_0xe82a8b['key']});}['_handleRenameSuggestionDescription'](_0x4e2280,_0x150367){_0x4e2280['push']({'type':'format','content':o(this['_locale'],'*Change\x20to:*\x20%0',this['getItemLabel'](_0x150367['getFirstRange']()['start']['nodeAfter'],0x1))});}['_handleInsertRemoveSuggestionDescription'](_0x3ecc68,_0x232ade,_0x36d57c){if(this['_addDescriptionItems'](_0x3ecc68,_0x232ade),_0x36d57c&&_0x36d57c['getFirstRange']()&&!_0x232ade['getFirstRange']()['end']['isEqual'](_0x36d57c['getFirstRange']()['start'])){const _0x4b3563=_0x3ecc68[_0x3ecc68['length']-0x1],_0x19f02f='insertion'==_0x232ade['type']?'add':'remove';_0x4b3563&&'text'==_0x4b3563['type']&&(_0x4b3563[_0x19f02f]+='\x0a');}}}class V extends _0x236ed3{['afterInit'](){const _0x23a4d1=this['editor'],_0x406762=_0x23a4d1['plugins']['get']('TrackChangesEditing');_0x23a4d1['commands']['get']('showAIAssistant')&&_0x406762['enableCommand']('showAIAssistant');}}class U extends _0x236ed3{['afterInit'](){const _0x1e0906=this['editor'],_0x123ad6=_0x1e0906['locale'];if(!_0x1e0906['plugins']['has']('AlignmentEditing'))return;const _0x5b72fb=_0x1e0906['plugins']['get']('TrackChangesEditing');_0x5b72fb['enableDefaultAttributesIntegration']('alignment'),_0x5b72fb['registerBlockAttribute']('alignment'),_0x5b72fb['descriptionFactory']['registerAttributeLabel']('alignment',o(_0x123ad6,'FORMAT_ALIGNMENT')),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x280da9=this['editor'],_0x19bd8c=_0x280da9['locale'];_0x280da9['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x46875c=>{if('formatBlock'!=_0x46875c['type'])return;const {data:_0x34de60}=_0x46875c;if(_0x34de60&&'alignment'==_0x34de60['commandName']){const _0x218b80=_0x34de60['commandParams'][0x0]['value'];return{'type':'format','content':o(_0x19bd8c,'*Format:*\x20%0',function(_0x5c452c){switch(_0x5c452c){case'left':return o(_0x19bd8c,'FORMAT_ALIGN_TO_LEFT');case'right':return o(_0x19bd8c,'FORMAT_ALIGN_TO_RIGHT');case'center':return o(_0x19bd8c,'FORMAT_ALIGN_TO_CENTER');case'justify':return o(_0x19bd8c,'FORMAT_JUSTIFY_TEXT');}}(_0x218b80))};}});}}const ti=['BoldEditing','ItalicEditing','UnderlineEditing','CodeEditing','StrikethroughEditing','SubscriptEditing','SuperscriptEditing'];class G extends _0x236ed3{['afterInit'](){const _0x41795f=this['editor'],_0x5174a4=_0x41795f['plugins']['get']('TrackChangesEditing'),_0x45d7c4=_0x41795f['locale'];for(const _0x13210b of ti){if(!_0x41795f['plugins']['has'](_0x13210b))continue;const _0x6aafc6=_0x13210b['slice'](0x0,-0x7)['toLowerCase'](),_0x1ec749='FORMAT_'+_0x6aafc6['toUpperCase']();_0x5174a4['enableDefaultAttributesIntegration'](_0x6aafc6),_0x5174a4['registerInlineAttribute'](_0x6aafc6),_0x5174a4['descriptionFactory']['registerAttributeLabel'](_0x6aafc6,o(_0x45d7c4,_0x1ec749));}this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x335272=this['editor'],_0x56f5df=_0x335272['locale'],_0x29c0b2=_0x335272['plugins']['get']('TrackChangesEditing');function _0x57c8d8(_0x38ddf9,_0x4df6c8){_0x29c0b2['descriptionFactory']['registerDescriptionCallback'](_0x3a4346=>{if('formatInline'!=_0x3a4346['type'])return;const {data:_0x16e3ba}=_0x3a4346;return _0x16e3ba&&_0x16e3ba['commandName']===_0x38ddf9?_0x16e3ba['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x56f5df,'*Format:*\x20%0',_0x4df6c8)}:{'type':'format','content':o(_0x56f5df,'*Remove\x20format:*\x20%0',_0x4df6c8)}:void 0x0;});}_0x57c8d8('bold',o(_0x56f5df,'FORMAT_BOLD')),_0x57c8d8('italic',o(_0x56f5df,'FORMAT_ITALIC')),_0x57c8d8('underline',o(_0x56f5df,'FORMAT_UNDERLINE')),_0x57c8d8('code',o(_0x56f5df,'FORMAT_CODE')),_0x57c8d8('strikethrough',o(_0x56f5df,'FORMAT_STRIKETHROUGH')),_0x57c8d8('subscript',o(_0x56f5df,'FORMAT_SUBSCRIPT')),_0x57c8d8('superscript',o(_0x56f5df,'FORMAT_SUPERSCRIPT'));}}class F extends _0x236ed3{['afterInit'](){const _0x21732c=this['editor'],_0x35240b=_0x21732c['locale'];if(!_0x21732c['plugins']['has']('BlockQuoteEditing'))return;const _0x195984=_0x21732c['plugins']['get']('TrackChangesEditing'),_0x9ee4d2=this['editor']['commands']['get']('blockQuote');_0x195984['enableCommand']('blockQuote',(_0x41fc3f,_0x3984b6={})=>{const _0x367d72=this['editor']['model']['document']['selection'],_0x415135=_0x3984b6&&void 0x0!==_0x3984b6['forceValue']?_0x3984b6['forceValue']:!_0x9ee4d2['value'];let _0x2a1555=[];if(_0x415135){const _0x1f0db4=Array['from'](_0x367d72['getSelectedBlocks']())['filter'](_0x4935fa=>oo(_0x4935fa)||function(_0x508ea6,_0x226bd6){const _0x55a22e=_0x226bd6['checkChild'](_0x508ea6['parent'],'blockQuote'),_0x9d4af9=_0x226bd6['checkChild'](['$root','blockQuote'],_0x508ea6);return _0x55a22e&&_0x9d4af9;}(_0x4935fa,this['editor']['model']['schema']));_0x2a1555=to(_0x1f0db4,_0x21732c['model']);}else{const _0x346826=Array['from'](_0x367d72['getSelectedBlocks']())['filter'](_0x1f7b01=>oo(_0x1f7b01));_0x2a1555=to(_0x346826,_0x21732c['model']);}_0x21732c['model']['change'](()=>{for(const _0x8fa992 of _0x2a1555)_0x195984['markBlockFormat'](_0x8fa992,{'commandName':'blockQuote','commandParams':[{'forceValue':_0x415135}]});});}),_0x195984['descriptionFactory']['registerDescriptionCallback'](_0x3d89fb=>{const {data:_0x287376}=_0x3d89fb;if(_0x287376&&'blockQuote'==_0x287376['commandName']){const _0xb67d32=o(_0x35240b,'ELEMENT_BLOCK_QUOTE');return _0x287376['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x35240b,'*Set\x20format:*\x20%0',_0xb67d32)}:{'type':'format','content':o(_0x35240b,'*Remove\x20format:*\x20%0',_0xb67d32)};}});}}function oo(_0x550646){return'blockQuote'==_0x550646['parent']['name'];}class L extends _0x236ed3{['afterInit'](){const _0x5e430b=this['editor'];_0x5e430b['plugins']['has']('CaseChange')&&(_0x5e430b['plugins']['get']('TrackChangesEditing')['enableCommand']('changeCaseUpper'),_0x5e430b['plugins']['get']('TrackChangesEditing')['enableCommand']('changeCaseLower'),_0x5e430b['plugins']['get']('TrackChangesEditing')['enableCommand']('changeCaseTitle'));}}class H extends _0x236ed3{['afterInit'](){const _0x35957d=this['editor'];_0x35957d['commands']['get']('ckbox')&&_0x35957d['plugins']['get']('TrackChangesEditing')['enableCommand']('ckbox');}}class J extends _0x236ed3{['afterInit'](){const _0x5a063b=this['editor'];if(!_0x5a063b['plugins']['has']('CodeBlock'))return;const _0x297ec4=_0x5a063b['plugins']['get']('TrackChangesEditing'),_0x54a70e=_0x5a063b['locale'],_0x9bfdab=_0x5a063b['config']['get']('codeBlock')['languages'],_0x158a59=_0x5a063b['commands']['get']('codeBlock');_0x297ec4['enableCommand']('indentCodeBlock'),_0x297ec4['enableCommand']('outdentCodeBlock'),_0x297ec4['enableCommand']('codeBlock',(_0x251a14,_0x374aa4={})=>{const _0x403b8f=_0x5a063b['model'],_0xc492d6=_0x5a063b['model']['document']['selection'],_0x694a20=_0x374aa4&&void 0x0!==_0x374aa4['forceValue']?_0x374aa4['forceValue']:!_0x158a59['value'];let _0x41082c;_0x374aa4['language']||(_0x374aa4['language']=_0x9bfdab[0x0]['language']),_0x41082c=_0x694a20?Array['from'](_0xc492d6['getSelectedBlocks']())['filter'](_0x303868=>eo(_0x303868)||function(_0x2a99e2,_0x51da6e){if(_0x2a99e2['is']('rootElement')||_0x51da6e['isLimit'](_0x2a99e2))return!0x1;return _0x51da6e['checkChild'](_0x2a99e2['parent'],'codeBlock');}(_0x303868,_0x403b8f['schema'])):Array['from'](_0xc492d6['getSelectedBlocks']())['filter'](_0x5553a6=>eo(_0x5553a6));const _0x24b1e3=to(_0x41082c,_0x403b8f);_0x403b8f['change'](()=>{for(const _0x538aed of _0x24b1e3)_0x297ec4['markBlockFormat'](_0x538aed,{'commandName':'codeBlock','commandParams':[{..._0x374aa4,'forceValue':_0x694a20}],'formatGroupId':'blockName'});});}),(_0x297ec4['descriptionFactory']['registerElementLabel']('codeBlock',_0x37f7f0=>o(_0x54a70e,'ELEMENT_CODE_BLOCK',_0x37f7f0)),_0x297ec4['descriptionFactory']['registerDescriptionCallback'](_0x4c1e3d=>{if('formatBlock'!=_0x4c1e3d['type'])return;const _0x2c1ee7=_0x54a70e['t'],{data:_0x29a62a}=_0x4c1e3d;if(!_0x29a62a||'codeBlock'!=_0x29a62a['commandName'])return;const _0x4e5627=_0x29a62a['commandParams'][0x0]['language'],_0x31436e=_0x2c1ee7(_0x9bfdab['find'](_0x3e1a89=>_0x3e1a89['language']===_0x4e5627)['label'])['toLowerCase']();return _0x29a62a['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x54a70e,'*Set\x20format:*\x20%0',o(_0x54a70e,'ELEMENT_CODE_BLOCK',0x1)+'\x20('+_0x31436e+')')}:{'type':'format','content':o(_0x54a70e,'*Remove\x20format:*\x20%0',o(_0x54a70e,'ELEMENT_CODE_BLOCK',0x1))};}));}}function eo(_0x5ca8c2){return'codeBlock'==_0x5ca8c2['name'];}class q extends _0x236ed3{['afterInit'](){const _0x144d38=this['editor'];if(!_0x144d38['plugins']['has']('CommentsEditing'))return;_0x144d38['plugins']['get']('TrackChangesEditing')['enableCommand']('addCommentThread');}}function io(_0x274e30,_0xfefb57,_0x2369af){const _0x3169aa=[];for(const _0x1a31b4 of _0xfefb57['getItems']())_0x1a31b4['hasAttribute'](_0x274e30)&&_0x3169aa['push'](_0x2369af['createRangeOn'](_0x1a31b4));return _0x3169aa;}function _e(_0x166e19,_0x35f0a6,{showActiveMarker:_0x2522d6=!0x0}={}){const _0x406f67=_0x166e19['plugins']['get']('TrackChangesEditing');return(_0x1eb348,_0x2571d8,_0x37050a)=>{if(!_0x37050a['consumable']['test'](_0x2571d8['markerRange'],_0x1eb348['name']))return;const _0x3ffd4b=_0x2571d8['markerRange']['getWalker'](),_0x357de5=_0x2571d8['markerRange']['start'],_0x4550e3=_0x166e19['model']['schema'];let _0x2cd18e=null,_0x1be2bd=null,_0x126e60=!0x1,_0x44cb07=!0x1;for(const _0x2b3b53 of _0x3ffd4b){const _0x10838e=_0x2b3b53['item'];_0x126e60=_0x126e60||_0x4550e3['isContent'](_0x10838e);const _0x20d9f4=_0x37050a['mapper']['toViewElement'](_0x10838e);if(_0x20d9f4&&_0x20d9f4['getCustomProperty']('addHighlight'))return;'elementEnd'==_0x2b3b53['type']&&(_0x4550e3['isBlock'](_0x10838e)&&!_0x4550e3['isLimit'](_0x10838e)&&(_0x10838e['nextSibling']||_0x357de5['isAtEnd']?_0x2cd18e&&_0x2cd18e['parent']==_0x10838e||(_0x2cd18e=_0x10838e,_0x58cdc7(_0x2b3b53['previousPosition']),_0x44cb07=!0x0):_0x1be2bd=_0x1be2bd||_0x2b3b53['previousPosition']));}function _0x58cdc7(_0x6e4a04){const {authorId:_0x2b46cc}=_0x406f67['_splitMarkerName'](_0x2571d8['markerName']),_0x2e4ce8=_0x37050a['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-'+_0x35f0a6,'data-author-id':_0x2b46cc}),_0x10f217=_0x37050a['mapper']['toViewPosition'](_0x6e4a04);_0x2522d6&&_0x406f67['activeMarkers']['includes'](_0x2571d8['markerName'])&&_0x37050a['writer']['addClass']('ck-suggestion-marker--active',_0x2e4ce8),_0x37050a['writer']['insert'](_0x10f217,_0x2e4ce8),_0x37050a['mapper']['bindElementToMarker'](_0x2e4ce8,_0x2571d8['markerName']);}_0x126e60||_0x44cb07||!_0x1be2bd||_0x58cdc7(_0x1be2bd);};}class z extends _0x236ed3{static get['requires'](){return[_0x5e29ae];}['init'](){const _0x11f737=this['editor'],_0x463a4e=_0x11f737['plugins']['get']('TrackChangesEditing');_0x463a4e['enableCommand']('delete');const _0x2a5404=_0x11f737['commands']['get']('deleteForward');_0x463a4e['enableCommand']('deleteForward',(_0xc53921,_0x3c1fd3={})=>{const _0xd03bfd=_0x11f737['model']['createSelection'](_0x11f737['model']['document']['selection']);_0xd03bfd['isCollapsed']&&_0x11f737['model']['modifySelection'](_0xd03bfd,{'direction':'forward','unit':_0x3c1fd3['unit']});const _0x43bb69=_0xd03bfd['getFirstRange'](),_0x1fa957=_0x3a44ac['fromRange'](_0x43bb69);let _0x1671f4;_0xc53921(_0x3c1fd3),_0x1671f4='$graveyard'==_0x1fa957['root']['rootName']?_0x11f737['model']['createRange'](_0x43bb69['start']):_0x11f737['model']['createRange'](_0x1fa957['start'],_0x1fa957['end']),_0x1fa957['detach'](),_0x11f737['model']['enqueueChange'](_0x2a5404['buffer']['batch'],_0x4b456b=>{_0x2a5404['buffer']['lock'](),_0x4b456b['setSelection'](_0x4b456b['createRange'](_0x1671f4['end'])),_0x2a5404['buffer']['unlock']();});}),_0x11f737['editing']['downcastDispatcher']['on']('addMarker:suggestion:deletion',_e(_0x11f737,'merge'),{'priority':'high'}),_0x11f737['data']['downcastDispatcher']['on']('addMarker:suggestion:deletion',(_0x3b1743,_0x230ad5,_0x4e9a6d)=>{_0x4e9a6d['options']['showSuggestionHighlights']&&_e(_0x11f737,'merge',{'showActiveMarker':!0x1})['bind'](this)(_0x3b1743,_0x230ad5,_0x4e9a6d);},{'priority':'high'}),_0x11f737['editing']['downcastDispatcher']['on']('removeMarker:suggestion:deletion',(_0x17d377,_0x437bcc,_0x13fa9a)=>{const _0x4acb4e=_0x13fa9a['mapper']['markerNameToElements'](_0x437bcc['markerName']);if(_0x4acb4e){for(const _0x3d0793 of _0x4acb4e)_0x3d0793['is']('uiElement')&&(_0x13fa9a['mapper']['unbindElementFromMarkerName'](_0x3d0793,_0x437bcc['markerName']),_0x13fa9a['writer']['remove'](_0x3d0793));}},{'priority':'high'});}}class K extends _0x236ed3{['afterInit'](){const _0x5bcbe0=this['editor'];if(!_0x5bcbe0['plugins']['has']('ListEditing'))return;const _0x7672b4=_0x5bcbe0['locale'],_0x16a1a8=_0x5bcbe0['plugins']['get']('TrackChangesEditing'),_0x3a9bdd=_0x5bcbe0['plugins']['has']('TodoListEditing'),_0x2fa44d=!!_0x5bcbe0['config']['get']('list.multiBlock');function _0x83bc3c(_0x1bdfa9){return{'type':'format','content':''+o(_0x7672b4,'*Set\x20format:*\x20%0',_0x1bdfa9)};}function _0x4dfdc9(_0x343c6a){return{'type':'format','content':''+o(_0x7672b4,'*Remove\x20format:*\x20%0',_0x343c6a)};}_0x16a1a8['enableDefaultAttributesIntegration']('numberedList'),_0x16a1a8['enableDefaultAttributesIntegration']('bulletedList'),_0x16a1a8['enableDefaultAttributesIntegration']('customNumberedList'),_0x16a1a8['enableDefaultAttributesIntegration']('customBulletedList'),_0x16a1a8['enableDefaultAttributesIntegration']('indentList'),_0x16a1a8['enableDefaultAttributesIntegration']('outdentList'),_0x16a1a8['enableDefaultAttributesIntegration']('splitListItemAfter'),_0x16a1a8['enableDefaultAttributesIntegration']('splitListItemBefore'),_0x16a1a8['registerBlockAttribute']('listItemId'),_0x16a1a8['registerBlockAttribute']('listType'),_0x16a1a8['registerBlockAttribute']('listIndent'),_0x2fa44d&&(_0x16a1a8['enableDefaultAttributesIntegration']('mergeListItemBackward'),_0x16a1a8['enableDefaultAttributesIntegration']('mergeListItemForward')),_0x3a9bdd&&(_0x16a1a8['enableDefaultAttributesIntegration']('todoList'),_0x16a1a8['enableDefaultAttributesIntegration']('checkTodoList'),_0x16a1a8['registerBlockAttribute']('todoListChecked'),_0x16a1a8['descriptionFactory']['registerDescriptionCallback'](_0x4ebe2f=>{const {data:_0x491fee}=_0x4ebe2f;if(_0x491fee&&'todoListChecked'==_0x491fee['key'])return{'type':'format','content':_0x491fee['newValue']?o(_0x7672b4,'*Check\x20item*'):o(_0x7672b4,'*Uncheck\x20item*')};}),this['editor']['model']['document']['registerPostFixer'](_0x34fd5e=>{if(_0x34fd5e['batch']['isUndo'])return!0x1;let _0x499fdc=!0x1;const _0x50032e=_0x16a1a8['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x42a04b=>'todoListChecked'===_0x16a1a8['_getAttributeKey'](_0x42a04b));for(const _0x5dabfa of _0x50032e){'todo'!=_0x5dabfa['getFirstRange']()['start']['nodeAfter']['getAttribute']('listType')&&(_0x16a1a8['_findSuggestions'](_0x5dabfa['getFirstRange'](),'attribute')['find'](_0x3f9270=>'listType'===_0x16a1a8['_getAttributeKey'](_0x3f9270['suggestion']))||(_0x34fd5e['removeMarker'](_0x5dabfa['getFirstMarker']()),_0x499fdc=!0x0));}return _0x499fdc;})),_0x16a1a8['descriptionFactory']['registerAttributeLabel']('listIndent',o(_0x7672b4,'FORMAT_INDENT'));const _0x4afac7={'type':'format','content':''};_0x16a1a8['descriptionFactory']['registerDescriptionCallback'](_0x18e632=>{const {data:_0x1f46e2}=_0x18e632;if(!_0x1f46e2||'listType'!=_0x1f46e2['key'])return;let _0x26e51b=_0x18e632['head'];for(;_0x26e51b;){if(_0x26e51b['data']&&(('listStyle'==_0x26e51b['data']['key']||'listMarkerStyle'==_0x26e51b['data']['key'])&&(_0x26e51b['data']['newValue']&&'default'!=_0x26e51b['data']['newValue']||'default'!=_0x26e51b['data']['oldValue']&&!_0x1f46e2['newValue'])||!_0x2fa44d&&_0x26e51b['data']['key']==m))return _0x4afac7;_0x26e51b=_0x26e51b['next'];}if(null==_0x1f46e2['newValue'])switch(_0x1f46e2['oldValue']){case'bulleted':return _0x4dfdc9(o(_0x7672b4,'ELEMENT_BULLETED_LIST'));case'numbered':return _0x4dfdc9(o(_0x7672b4,'ELEMENT_NUMBERED_LIST'));case'todo':return _0x4dfdc9(o(_0x7672b4,'ELEMENT_TODO_LIST'));}switch(_0x1f46e2['newValue']){case'bulleted':return _0x83bc3c(o(_0x7672b4,'ELEMENT_BULLETED_LIST'));case'numbered':return _0x83bc3c(o(_0x7672b4,'ELEMENT_NUMBERED_LIST'));case'todo':return _0x83bc3c(o(_0x7672b4,'ELEMENT_TODO_LIST'));}}),_0x16a1a8['descriptionFactory']['registerDescriptionCallback'](_0x3a0fa1=>{const {data:_0x342191}=_0x3a0fa1;if(_0x342191&&'listIndent'==_0x342191['key'])return null==_0x342191['newValue']||null==_0x342191['oldValue']&&0x0==_0x342191['newValue']?_0x4afac7:void 0x0;}),_0x16a1a8['descriptionFactory']['registerDescriptionCallback'](_0x296b21=>{if('attribute'!=_0x296b21['type'])return;const {data:_0x399a5a}=_0x296b21;if(!_0x399a5a||'listItemId'!=_0x399a5a['key'])return;const _0x1e135f=Ee(_0x296b21);return'newValue'==_0x1e135f?{'type':'format','content':o(_0x7672b4,'*Merge:*\x20list\x20item')}:'oldValue'==_0x1e135f?{'type':'format','content':o(_0x7672b4,'*Split:*\x20list\x20item')}:_0x4afac7;}),_0x5bcbe0['model']['document']['registerPostFixer'](_0x4f079d=>this['listItemIdFixer'](_0x4f079d)),_0x5bcbe0['model']['document']['registerPostFixer'](_0x401404=>this['noTrackChangesFixer'](_0x401404)),_0x5bcbe0['model']['document']['on']('change:data',(_0x3dd845,_0x3a9b7c)=>{if(_0x3a9b7c['isUndo']||!_0x3a9b7c['isLocal'])return!0x1;this['assureChains']();},{'priority':'high'}),this['_supportLegacySuggestions']();}['listItemIdFixer'](_0x3f807a){if(_0x3f807a['batch']['isUndo']||!_0x3f807a['batch']['isLocal'])return!0x1;let _0x43b996=!0x1;const _0x104d3e=this['editor']['plugins']['get']('TrackChangesEditing')['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x48b2b8=>_0x48b2b8['data']&&'listItemId'==_0x48b2b8['data']['key'])['filter'](_0x112ead=>_0x112ead['data']['newValue']&&_0x112ead['data']['oldValue']);for(const _0x5341bd of _0x104d3e)Ee(_0x5341bd)||(_0x3f807a['removeMarker'](_0x5341bd['getFirstMarker']()),_0x43b996=!0x0);return _0x43b996;}['noTrackChangesFixer'](_0x2e3a10){if(_0x2e3a10['batch']['isUndo']||!_0x2e3a10['batch']['isLocal'])return!0x1;const _0x4db420=this['editor']['plugins']['get']('TrackChangesEditing');if(_0x4db420['trackChangesCommand']['value'])return!0x1;let _0x43511c=!0x1;const _0x3296aa=['listType','listItemId','listIndent','listStyle','listStart','listReversed','todoListCheck','listMarker','listMarkerStyle'],_0x4bd4e8=this['editor']['model']['document']['differ']['getChanges']()['filter'](_0x1f9010=>'attribute'==_0x1f9010['type'])['filter'](_0x47c4f9=>_0x3296aa['includes'](_0x47c4f9['attributeKey']));if(0x0==_0x4bd4e8['length'])return _0x43511c;for(const _0x12b56b of _0x4bd4e8){const _0x1a7fb0=_0x4db420['_findSuggestions'](_0x12b56b['range'],'attribute')['filter'](_0x867b6c=>!_0x867b6c['meta']['isNextTo'])['map'](_0x51c988=>_0x51c988['suggestion'])['filter'](_0x161dc6=>{const _0xcf1e6=_0x4db420['_getAttributeKey'](_0x161dc6);return _0x3296aa['includes'](_0xcf1e6);});if(_0x1a7fb0['length']){for(const _0x1ec7c5 of _0x1a7fb0)_0x2e3a10['removeMarker'](_0x1ec7c5['getFirstMarker']());_0x43511c=!0x0;}}return _0x43511c;}['assureChains'](){const _0x20f2ad=this['editor']['plugins']['get']('TrackChangesEditing'),_0x2f8b7c=['listType','listItemId','listIndent','listStyle','listStart','listReversed','todoListCheck','listMarker','listMarkerStyle'];let _0x223854;const _0x13b7f9=new Set(this['editor']['model']['document']['differ']['getChangedMarkers']()['filter'](_0x3d8220=>{if(_0x3d8220['data']['oldRange']||!_0x3d8220['data']['newRange'])return null;if(!_0x3d8220['name']['startsWith']('suggestion:attribute:'))return null;const {id:_0x565168}=_0x20f2ad['_splitMarkerName'](_0x3d8220['name']);if(!_0x20f2ad['hasSuggestion'](_0x565168))return null;const _0x2f385f=_0x20f2ad['getSuggestion'](_0x565168);return _0x2f8b7c['includes'](_0x2f385f['data']['key']);})['map'](_0x52bd6c=>{const {id:_0x3e407c}=_0x20f2ad['_splitMarkerName'](_0x52bd6c['name']),_0x412e7f=_0x20f2ad['getSuggestion'](_0x3e407c);return _0x223854=_0x412e7f['attributes']['groupId'],_0x412e7f['getFirstRange']()['start']['nodeAfter'];}));if(0x0==_0x13b7f9['size'])return;const _0x52a8bc=_0x20f2ad['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x53ccaf=>'attribute'==_0x53ccaf['type']&&_0x53ccaf['data']&&_0x2f8b7c['includes'](_0x53ccaf['data']['key'])&&_0x53ccaf['attributes']['groupId']!=_0x223854)['map'](_0x31f60d=>({'listItem':_0x31f60d['getFirstRange']()['start']['nodeAfter'],'groupId':_0x31f60d['attributes']['groupId']})),_0x2ef062=new Set();for(const {groupId:_0x3ed71b,listItem:_0x4d2aa7}of _0x52a8bc)_0x13b7f9['has'](_0x4d2aa7)&&_0x2ef062['add'](_0x3ed71b);for(const _0x205298 of _0x20f2ad['getSuggestions']())_0x2ef062['has'](_0x205298['attributes']['groupId'])&&_0x205298['setAttribute']('groupId',_0x223854);}['_supportLegacySuggestions'](){const _0x1a7710=this['editor'],_0x138c55=_0x1a7710['locale'],_0x424164=_0x1a7710['plugins']['get']('TrackChangesEditing');this['_registerLegacyDescription'](),_0x424164['_suggestionFactory']['registerCustomCallback']('formatBlock','documentList','accept',function(_0x41a254,_0x446237){const _0x39edb8=[];for(let _0x96e08b of _0x41a254)_0x96e08b['start']['nodeAfter']===_0x96e08b['end']['parent']&&(_0x96e08b=_0x1a7710['model']['createRange'](_0x1a7710['model']['createPositionAt'](_0x96e08b['start']['nodeAfter'],0x0))),_0x39edb8['push'](_0x96e08b);_0x1a7710['model']['change'](_0x5b3368=>{const _0xfc0644=_0x1a7710['model']['document']['selection'],_0x4cd0c2=Array['from'](_0xfc0644['getRanges']())['map'](_0x2a74dc=>_0x3a44ac['fromRange'](_0x2a74dc));_0x5b3368['setSelection'](_0x39edb8),_0x1a7710['commands']['get'](_0x446237['commandName'])['refresh'](),_0x446237['commandParams']['push']({'forceDefaultExecution':!0x0}),_0x1a7710['execute'](_0x446237['commandName'],..._0x446237['commandParams']),_0x5b3368['setSelection'](_0x4cd0c2);for(const _0x2c5eb4 of _0x4cd0c2)_0x2c5eb4['detach']();});}),_0x424164['descriptionFactory']['registerElementLabel'](function(_0x465e33){const _0x2ab886=!_0x1a7710['model']['schema']['isObject'](_0x465e33),_0x38bc0c=_0x465e33['previousSibling'],_0x33cca9=_0x465e33['nextSibling'],_0x57941c=_0x465e33['getAttribute']('listItemId'),_0x57edaa=!_0x38bc0c||_0x38bc0c['getAttribute']('listItemId')!==_0x57941c,_0x4a2611=!_0x33cca9||_0x33cca9['getAttribute']('listItemId')!==_0x57941c;return _0x2ab886&&Boolean(_0x57941c)&&_0x57edaa&&_0x4a2611;},_0x4f1bf1=>o(_0x138c55,'ELEMENT_LIST_ITEM',_0x4f1bf1));}['_registerLegacyDescription'](){const _0x15abf2=this['editor'],_0x4723eb=_0x15abf2['locale'];function _0x5e29e8(_0x4c8202){const _0x1f6124=_0x15abf2['commands']['get']('bulletedList')['value'],_0x13ac3c=_0x15abf2['commands']['get']('numberedList')['value'];return'numberedList'===_0x4c8202?_0x1f6124:_0x13ac3c;}_0x15abf2['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](function(_0x1c4e42){if('formatBlock'!=_0x1c4e42['type'])return;const {data:_0x4baec2}=_0x1c4e42;if(!_0x4baec2)return;let _0xdbd47,_0x1f6d13,_0x5a7d21,_0x295989;switch(_0x4baec2['commandName']){case'bulletedList':_0x5a7d21=_0x4baec2['commandParams'][0x0]['forceValue'],_0x295989=_0x5e29e8(_0x4baec2['commandName']),_0xdbd47=_0x5a7d21?'*Format:*\x20insert\x20into\x20%0':'*Format:*\x20remove\x20from\x20%0',!_0x295989&&_0x15abf2['config']['get']('list.multiBlock')||(_0xdbd47='*Change\x20to:*\x20%0'),_0x1f6d13={'type':'format','content':o(_0x4723eb,_0xdbd47,o(_0x4723eb,'ELEMENT_BULLETED_LIST'))};break;case'numberedList':_0x5a7d21=_0x4baec2['commandParams'][0x0]['forceValue'],_0x295989=_0x5e29e8(_0x4baec2['commandName']),_0xdbd47=_0x5a7d21?'*Format:*\x20insert\x20into\x20%0':'*Format:*\x20remove\x20from\x20%0',!_0x295989&&_0x15abf2['config']['get']('list.multiBlock')||(_0xdbd47='*Change\x20to:*\x20%0'),_0x1f6d13={'type':'format','content':o(_0x4723eb,_0xdbd47,o(_0x4723eb,'ELEMENT_NUMBERED_LIST'))};break;case'indentList':_0xdbd47='*Indent:*\x20%0',_0x1f6d13={'type':'format','content':o(_0x4723eb,_0xdbd47,o(_0x4723eb,'ELEMENT_LIST_ITEM'))};break;case'outdentList':_0xdbd47=function(_0x4f3c0b){const _0x44e0bf=_0x4f3c0b['getFirstRange']();let _0x54b627=_0x44e0bf['start']['nodeAfter'];for(;_0x54b627&&_0x44e0bf['containsItem'](_0x54b627);){if(_0x54b627['getAttribute']('listIndent')>0x0)return!0x1;_0x54b627=_0x54b627['nextSibling'];}return!0x0;}(_0x1c4e42)?o(_0x4723eb,'*Format:*\x20remove\x20from\x20%0',o(_0x4723eb,function(_0x1b10e3){return'ELEMENT_'+_0x1b10e3['getFirstRange']()['start']['nodeAfter']['getAttribute']('listType')['toUpperCase']()+'_LIST';}(_0x1c4e42))):o(_0x4723eb,'*Outdent:*\x20%0',o(_0x4723eb,'ELEMENT_LIST_ITEM')),_0x1f6d13={'type':'format','content':_0xdbd47};break;case'mergeListItemBackward':case'mergeListItemForward':!0x1===_0x4baec2['multipleBlocks']&&(_0xdbd47='*Merge:*\x20%0',_0x1f6d13={'type':'deletion','content':o(_0x4723eb,_0xdbd47,o(_0x4723eb,'ELEMENT_LIST_ITEM'))});}return _0x1f6d13;});}}function Ee(_0x37eefa){let _0x293348=_0x37eefa['getFirstRange']()['start']['nodeAfter']['previousSibling'];for(;_0x293348;){const _0x2a6c96=_0x293348['getAttribute']('listItemId');if(!_0x2a6c96)return!0x1;if(_0x2a6c96==_0x37eefa['data']['newValue'])return'newValue';if(_0x2a6c96==_0x37eefa['data']['oldValue'])return'oldValue';_0x293348=_0x293348['previousSibling'];}return!0x1;}class pe extends _0x236ed3{['afterInit'](){if(!this['editor']['plugins']['has']('ListPropertiesEditing'))return;const _0x594b49=this['editor']['config']['get']('list.properties'),_0x43aab9=this['editor']['plugins']['get']('TrackChangesEditing');_0x594b49['styles']&&(_0x43aab9['enableDefaultAttributesIntegration']('listStyle'),_0x43aab9['registerBlockAttribute']('listStyle')),_0x594b49['reversed']&&(_0x43aab9['enableDefaultAttributesIntegration']('listReversed'),_0x43aab9['registerBlockAttribute']('listReversed')),_0x594b49['startIndex']&&(_0x43aab9['enableDefaultAttributesIntegration']('listStart'),_0x43aab9['registerBlockAttribute']('listStart'));const _0xd56774={'type':'format','content':''};_0x43aab9['descriptionFactory']['registerDescriptionCallback'](this['handleDescriptions']['bind'](this));const _0x1be701=this['editor']['locale'];_0x43aab9['descriptionFactory']['registerAttributeLabel']('listReversed',o(_0x1be701,'FORMAT_LIST_REVERSED')),_0x43aab9['descriptionFactory']['registerDescriptionCallback'](_0x53161a=>{const {data:_0x2dd15f}=_0x53161a;if(_0x2dd15f&&'listReversed'==_0x2dd15f['key'])return null==_0x2dd15f['newValue']||0x0==_0x2dd15f['newValue']&&null==_0x2dd15f['oldValue']?_0xd56774:void 0x0;}),_0x43aab9['descriptionFactory']['registerAttributeLabel']('listStart',o(_0x1be701,'FORMAT_LIST_START')),_0x43aab9['descriptionFactory']['registerDescriptionCallback'](_0x52ad6d=>{const {data:_0x44c545}=_0x52ad6d;if(_0x44c545&&'listStart'==_0x44c545['key'])return null==_0x44c545['newValue']||0x1==_0x44c545['newValue']&&null==_0x44c545['oldValue']?_0xd56774:void 0x0;}),this['editor']['model']['document']['registerPostFixer'](_0x4b9ed4=>{if(_0x4b9ed4['batch']['isUndo'])return!0x1;let _0xb5965=!0x1;const _0x2ebeec=_0x43aab9['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x303643=>{const _0x5dd2ef=_0x43aab9['_getAttributeKey'](_0x303643);return'listStart'==_0x5dd2ef||'listReversed'==_0x5dd2ef;});for(const _0x3968e6 of _0x2ebeec){const _0x4ed241=_0x3968e6['getFirstRange']()['start']['nodeAfter']['getAttribute']('listType');if('numbered'==_0x4ed241||'customNumbered'==_0x4ed241)continue;_0x43aab9['_findSuggestions'](_0x3968e6['getFirstRange'](),'attribute')['find'](_0x5b0faa=>'listType'==_0x43aab9['_getAttributeKey'](_0x5b0faa['suggestion']))||(_0x4b9ed4['removeMarker'](_0x3968e6['getFirstMarker']()),_0xb5965=!0x0);}return _0xb5965;}),this['_registerLegacyDescription']();}['handleDescriptions'](_0x273e0a){const _0x471e03=this['editor']['locale'],{data:_0x597057}=_0x273e0a,_0x2071cf={'type':'format','content':''};if(!_0x597057||'listStyle'!=_0x597057['key'])return;if(!_0x597057['oldValue'])return'default'==_0x597057['newValue']?_0x2071cf:{'type':'format','content':''+o(_0x471e03,'*Set\x20format:*\x20%0',o(_0x471e03,this['_getTranslationKeyForListStyle'](_0x597057['newValue'])))};if(!_0x597057['newValue']){if('default'==_0x597057['oldValue'])return _0x2071cf;let _0x1ccba4=_0x273e0a['head'];for(;_0x1ccba4;){if(_0x1ccba4['data']&&'listType'==_0x1ccba4['data']['key']&&_0x1ccba4['data']['newValue'])return _0x2071cf;_0x1ccba4=_0x1ccba4['next'];}return{'type':'format','content':''+o(_0x471e03,'*Remove\x20format:*\x20%0',o(_0x471e03,this['_getTranslationKeyForListStyle'](_0x597057['oldValue'])))};}if('default'!=_0x597057['newValue'])return{'type':'format','content':''+o(_0x471e03,'*Set\x20format:*\x20%0',o(_0x471e03,this['_getTranslationKeyForListStyle'](_0x597057['newValue'])))};let _0x23c365=_0x273e0a['head'];for(;_0x23c365;){if(_0x23c365['data']&&'listType'==_0x23c365['data']['key']&&_0x23c365['data']['newValue']&&_0x23c365['data']['oldValue'])return _0x2071cf;_0x23c365=_0x23c365['next'];}return{'type':'format','content':o(_0x471e03,'*Set\x20format:*\x20%0',o(_0x471e03,'ELEMENT_'+_0x273e0a['getFirstRange']()['start']['nodeAfter']['getAttribute']('listType')['toUpperCase']()+'_LIST_DEFAULT'))};}['_registerLegacyDescription'](){const _0x227695=this['editor'],_0x18f594=_0x227695['locale'];_0x227695['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x663274=>{if('formatBlock'!=_0x663274['type'])return;const {data:_0x26c2d3}=_0x663274;if(!_0x26c2d3)return;let _0x25318c,_0x5674e6;switch(_0x26c2d3['commandName']){case'listStyle':_0x25318c='*Change\x20to:*\x20%0',_0x5674e6={'type':'format','content':o(_0x18f594,_0x25318c,o(_0x18f594,this['_getTranslationKeyForListStyle'](_0x26c2d3['commandParams'][0x0]['type'])))};break;case'listReversed':_0x25318c=_0x26c2d3['commandParams'][0x0]['reversed']?'*Format:*\x20set\x20order\x20to\x20reversed':'*Format:*\x20set\x20order\x20to\x20regular',_0x5674e6={'type':'format','content':o(_0x18f594,_0x25318c)};break;case'listStart':_0x25318c='*Format:*\x20set\x20start\x20index\x20to\x20%0',_0x5674e6={'type':'format','content':o(_0x18f594,_0x25318c,_0x26c2d3['commandParams'][0x0]['startIndex'])};}return _0x5674e6;});}['_getTranslationKeyForListStyle'](_0x1e0fa9){return'ELEMENT_'+function(_0x42736c){if(ye['includes'](_0x42736c))return'bulleted';if(Se['includes'](_0x42736c))return'numbered';return null;}(_0x1e0fa9)['toUpperCase']()+'_LIST_'+_0x1e0fa9['toUpperCase']()['replace'](/-/g,'_');}}const ye=['disc','circle','square'],Se=['decimal','decimal-leading-zero','lower-roman','upper-roman','lower-latin','upper-latin'];class Q extends _0x236ed3{static get['requires'](){return[_0x341ab9];}['init'](){const _0x3b49d5=this['editor'],_0x3f014d=_0x3b49d5['plugins']['get']('TrackChangesEditing'),_0x2d7f17=_0x3b49d5['commands']['get']('enter');_0x3f014d['enableCommand']('enter',()=>{_0x3b49d5['model']['change'](_0x256f9d=>{const _0x3b0418=_0x3b49d5['model']['document']['selection'],_0x2b946b=_0x3b0418['getFirstPosition'](),_0x24f5ad=_0x3a44ac['fromRange'](_0x3b0418['getFirstRange']());if(_0x2d7f17['enterBlock'](_0x256f9d)){const _0x1d5b16=_0x3b49d5['model']['createPositionAt'](_0x2b946b['parent']['nextSibling'],0x0),_0x50af8f=_0x256f9d['createRange'](_0x2b946b,_0x1d5b16);_0x3f014d['markInsertion'](_0x50af8f);}else _0x256f9d['setSelection'](_0x256f9d['createRange'](_0x24f5ad['end']));_0x24f5ad['detach'](),_0x2d7f17['fire']('afterExecute',{'writer':_0x256f9d});});}),_0x3b49d5['editing']['downcastDispatcher']['on']('addMarker:suggestion:insertion',_e(_0x3b49d5,'split'),{'priority':'high'}),_0x3b49d5['editing']['downcastDispatcher']['on']('removeMarker:suggestion:insertion',(_0x5b29f5,_0x44aab1,_0x413ccb)=>{const _0x512d53=_0x413ccb['mapper']['markerNameToElements'](_0x44aab1['markerName']);if(_0x512d53){for(const _0x46d4cf of _0x512d53)_0x46d4cf['hasClass']('ck-suggestion-marker-split')&&(_0x413ccb['mapper']['unbindElementFromMarkerName'](_0x46d4cf,_0x44aab1['markerName']),_0x413ccb['writer']['remove'](_0x46d4cf));}},{'priority':'high'}),_0x3b49d5['data']['downcastDispatcher']['on']('addMarker:suggestion:insertion',(_0x14099e,_0x464d5e,_0x603616)=>{_0x603616['options']['showSuggestionHighlights']&&_e(_0x3b49d5,'split',{'showActiveMarker':!0x1})['bind'](this)(_0x14099e,_0x464d5e,_0x603616);},{'priority':'high'});}}class X extends _0x236ed3{['afterInit'](){if(!this['editor']['plugins']['has']('FindAndReplaceEditing'))return;const _0x4b5f40=this['editor']['plugins']['get']('TrackChangesEditing');_0x4b5f40['enableCommand']('find',this['handleFindCommand']['bind'](this)),_0x4b5f40['enableCommand']('findNext'),_0x4b5f40['enableCommand']('findPrevious'),_0x4b5f40['enableCommand']('replace'),_0x4b5f40['enableCommand']('replaceAll');}['handleFindCommand'](_0x220d0b,_0xdd3ace,_0x3c4836={}){const _0x522b5a=this['editor']['plugins']['get']('FindAndReplaceUtils');return _0x220d0b(_0x20d46f=>{let _0x1f0b79=('string'==typeof _0xdd3ace?_0x522b5a['findByTextCallback'](_0xdd3ace,_0x3c4836):_0xdd3ace)(_0x20d46f);Array['isArray'](_0x1f0b79)&&(_0x1f0b79={'results':_0x1f0b79,'searchText':'string'==typeof _0xdd3ace?_0xdd3ace:''});const _0x116573=_0x1f0b79['results']['filter'](_0x3371cd=>!0x1===this['_isInDeletionRange'](_0x3371cd,_0x20d46f['item']));return{..._0x1f0b79,'results':_0x116573};},_0x3c4836);}['_isInDeletionRange'](_0x873af7,_0x42384e){const _0xfcfa27=this['editor']['model']['createRange'](this['editor']['model']['createPositionAt'](_0x42384e,_0x873af7['start']),this['editor']['model']['createPositionAt'](_0x42384e,_0x873af7['end']));for(const _0x55ae6b of this['editor']['model']['markers']['getMarkersGroup']('suggestion:deletion'))if(null!==_0xfcfa27['getIntersection'](_0x55ae6b['getRange']()))return!0x0;return!0x1;}}const ro=[{'pluginName':'FontSizeEditing','commandName':'fontSize'},{'pluginName':'FontFamilyEditing','commandName':'fontFamily'},{'pluginName':'FontColorEditing','commandName':'fontColor'},{'pluginName':'FontBackgroundColorEditing','commandName':'fontBackgroundColor'}];class Y extends _0x236ed3{['afterInit'](){const _0x1f8df1=this['editor']['locale'],_0x30fef7=this['editor']['plugins']['get']('TrackChangesEditing');for(const {pluginName:_0x381919,commandName:_0x565db6}of ro)this['editor']['plugins']['has'](_0x381919)&&(_0x30fef7['enableDefaultAttributesIntegration'](_0x565db6),_0x30fef7['registerInlineAttribute'](_0x565db6));_0x30fef7['descriptionFactory']['registerAttributeLabel']('fontSize',o(_0x1f8df1,'FORMAT_FONT_SIZE')),_0x30fef7['descriptionFactory']['registerAttributeLabel']('fontFamily',o(_0x1f8df1,'FORMAT_FONT_FAMILY')),_0x30fef7['descriptionFactory']['registerAttributeLabel']('fontColor',o(_0x1f8df1,'FORMAT_FONT_COLOR')),_0x30fef7['descriptionFactory']['registerAttributeLabel']('fontBackgroundColor',o(_0x1f8df1,'FORMAT_FONT_BACKGROUND')),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x96e7ac=this['editor'],_0x4261cb=_0x96e7ac['locale'];_0x96e7ac['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x3c3e94=>{const _0x2b5278=_0x4261cb['t'];if('formatInline'!=_0x3c3e94['type'])return;const {data:_0x34f863}=_0x3c3e94;if(null!=_0x34f863){if('fontSize'==_0x34f863['commandName']){const _0x49b82a=_0x34f863['commandParams'][0x0]['value'];if(_0x49b82a){const _0x542ff6=_0x2b5278(this['editor']['plugins']['get']('FontSize')['normalizeSizeOptions'](this['editor']['config']['get']('fontSize.options'))['find'](_0x5b358d=>_0x5b358d['model']==_0x49b82a)['title'])['toLowerCase']();return{'type':'format','content':o(_0x4261cb,'*Set\x20font\x20size:*\x20%0',_0x542ff6)};}return{'type':'format','content':o(_0x4261cb,'*Reset\x20font\x20size*')};}if('fontFamily'==_0x34f863['commandName']){const _0x30a89e=_0x34f863['commandParams'][0x0]['value'];return _0x30a89e?{'type':'format','content':o(_0x4261cb,'*Set\x20font\x20family:*\x20%0',_0x30a89e)}:{'type':'format','content':o(_0x4261cb,'*Reset\x20font\x20family*')};}if('fontColor'==_0x34f863['commandName']){const _0xf62a65=_0x34f863['commandParams'][0x0]['value'];if(_0xf62a65){const _0x2eb855=_0x1739ac(this['editor']['config']['get']('fontColor.colors'))['find'](_0x501dad=>_0x501dad['model']==_0xf62a65);let _0x216892=_0xf62a65,_0x517d09='';return _0x2eb855&&(_0x216892=_0x2eb855['label'],_0x517d09=_0x2b5278(_0x216892)['toLowerCase']()),{'type':'format','content':o(_0x4261cb,'*Set\x20font\x20color:*\x20%0',_0x517d09)['trim'](),'color':{'value':_0xf62a65,'title':_0x517d09||_0x216892}};}return{'type':'format','content':o(_0x4261cb,'*Reset\x20font\x20color*')};}if('fontBackgroundColor'==_0x34f863['commandName']){const _0x12119e=_0x34f863['commandParams'][0x0]['value'];if(_0x12119e){const _0x167af7=_0x1739ac(this['editor']['config']['get']('fontBackgroundColor.colors'))['find'](_0x38a1d1=>_0x38a1d1['model']==_0x12119e);let _0x13b41f=_0x12119e,_0x3a39a0='';return _0x167af7&&(_0x13b41f=_0x167af7['label'],_0x3a39a0=_0x2b5278(_0x13b41f)['toLowerCase']()),{'type':'format','content':o(_0x4261cb,'*Set\x20font\x20background\x20color:*\x20%0',_0x3a39a0)['trim'](),'color':{'value':_0x12119e,'title':_0x3a39a0||_0x13b41f}};}return{'type':'format','content':o(_0x4261cb,'*Reset\x20font\x20background\x20color*')};}}});}}class Z extends _0x236ed3{['afterInit'](){const _0x3459b4=this['editor'],_0xe6861=_0x3459b4['plugins']['get']('TrackChangesEditing'),_0x4da095=_0x3459b4['commands']['get']('copyFormat'),_0x11a559=_0x3459b4['commands']['get']('pasteFormat');_0x4da095&&_0x11a559&&(_0xe6861['enableDefaultAttributesIntegration']('pasteFormat'),_0xe6861['enableCommand']('copyFormat'),this['_registerLegacyDescription']());}['_registerLegacyDescription'](){const _0x413b60=this['editor'],_0x557d40=_0x413b60['locale'];_0x413b60['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x542296=>{if('formatBlock'!=_0x542296['type']&&'formatInline'!=_0x542296['type'])return;const {data:_0x3f884e}=_0x542296;if(_0x3f884e&&'pasteFormat'===_0x3f884e['commandName']){const _0x41a659=[],_0x27c9cb=_0x3f884e['commandParams'][0x0];for(const [_0x16e625,_0x3d0477]of Object['entries'](_0x27c9cb))_0x41a659['push'](so(_0x413b60,_0x16e625,_0x3d0477));return _0x41a659['length']?{'type':'format','content':o(_0x557d40,'*Set\x20format\x20to:*\x20%0',_0x41a659['join'](',\x20'))}:{'type':'format','content':o(_0x557d40,'*Remove\x20all\x20formatting*')};}});}}function so(_0x1a8235,_0x216c95,_0x2e7845){const _0xe6f113=_0x1a8235['locale']['t'],_0x34f837=_0x216c95['split'](/(?=[A-Z])/)['join']('\x20'),_0x64e5e4=_0xe6f113(_0x34f837['charAt'](0x0)['toUpperCase']()+_0x34f837['slice'](0x1))['toLowerCase']();if('boolean'==typeof _0x2e7845)return _0x64e5e4;if('fontColor'===_0x216c95||'fontBackgroundColor'===_0x216c95){const _0x4e0543=_0x1739ac(_0x1a8235['config']['get']('fontColor.colors'))['find'](_0x126446=>_0x126446['model']==_0x2e7845);return _0x64e5e4+'\x20('+(_0x4e0543?_0xe6f113(_0x4e0543['label'])['toLowerCase']():_0x2e7845)+')';}if('fontSize'===_0x216c95&&isNaN(parseFloat(_0x2e7845))){const _0x210964=_0x1a8235['plugins']['get']('FontSize')['normalizeSizeOptions'](_0x1a8235['config']['get']('fontSize.options'))['find'](_0x55bc71=>_0x55bc71['model']==_0x2e7845);return _0x64e5e4+'\x20('+(_0x210964?_0xe6f113(_0x210964['title'])['toLowerCase']():_0x2e7845)+')';}return _0x64e5e4+'\x20('+_0x2e7845+')';}class tt extends _0x236ed3{['_headingOptions'];['afterInit'](){const _0x129d26=this['editor'];if(!_0x129d26['plugins']['has']('HeadingEditing'))return;this['_headingOptions']=_0x129d26['config']['get']('heading.options');const _0x22e9b4=_0x129d26['locale'],_0x4d8371=_0x129d26['plugins']['get']('TrackChangesEditing');_0x4d8371['enableDefaultAttributesIntegration']('heading');for(const _0x23e864 of this['_headingOptions'])'paragraph'!=_0x23e864['model']&&_0x4d8371['descriptionFactory']['registerElementLabel'](_0x23e864['model'],_0x25c897=>{const _0x2a2b9d=this['_getHeadingLevel'](_0x23e864['model']);return null!==_0x2a2b9d?_0xd5d927(_0x25c897,_0x2a2b9d):_0x3c7c30(_0x25c897,_0x23e864['title']);});function _0xd5d927(_0x509d59,_0x4cfbba){return o(_0x22e9b4,'ELEMENT_HEADING',[_0x509d59,_0x4cfbba]);}function _0x3c7c30(_0x2b4c8d,_0x52bff5){return o(_0x22e9b4,'ELEMENT_HEADING_CUSTOM',[_0x2b4c8d,_0x52bff5]);}this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x3a35d5=this['editor'],_0x2feeca=_0x3a35d5['locale'];function _0x12084b(_0x516413,_0x2e3bea){return o(_0x2feeca,'ELEMENT_HEADING_CUSTOM',[_0x516413,_0x2e3bea]);}_0x3a35d5['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x56ca00=>{if('formatBlock'!=_0x56ca00['type'])return;const {data:_0x5ecdf1}=_0x56ca00;if(_0x5ecdf1&&'heading'==_0x5ecdf1['commandName']){const _0x301c68=_0x5ecdf1['commandParams'][0x0]['value'],_0x388934=this['_getHeadingLevel'](_0x301c68);if(null!==_0x388934)return{'type':'format','content':o(_0x2feeca,'*Change\x20to:*\x20%0',(_0x372f74=0x1,_0x28f268=_0x388934,o(_0x2feeca,'ELEMENT_HEADING',[_0x372f74,_0x28f268])))};const _0x3246de=this['_headingOptions']['find'](_0x3c834f=>_0x3c834f['model']===_0x301c68)['title'];return{'type':'format','content':o(_0x2feeca,'*Change\x20to:*\x20%0',_0x12084b(0x1,_0x3246de))};}var _0x372f74,_0x28f268;});}['_getHeadingLevel'](_0x140b12){const _0x216b59=_0x140b12['match'](/^heading(\d+)/);if(_0x216b59)return _0x216b59[0x1];const _0xe7cf40=this['_headingOptions']?.['find'](_0x1cd6db=>_0x1cd6db['model']==_0x140b12);if(_0xe7cf40&&_0xe7cf40['view']){const _0x509afc=_0xe7cf40['view'],_0x22c4d7=(_0x509afc['name']??_0x509afc)['match'](/^h(\d+)/);if(_0x22c4d7)return _0x22c4d7[0x1];}return null;}}class et extends _0x236ed3{['afterInit'](){const _0x516d5e=this['editor'];if(!_0x516d5e['plugins']['has']('HighlightEditing'))return;const _0x49b19e=_0x516d5e['plugins']['get']('TrackChangesEditing'),_0x5caa99=_0x516d5e['locale'];_0x49b19e['enableDefaultAttributesIntegration']('highlight'),_0x49b19e['registerInlineAttribute']('highlight'),_0x49b19e['descriptionFactory']['registerAttributeLabel']('highlight',o(_0x5caa99,'FORMAT_HIGHLIGHT')),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x25aa9c=this['editor'],_0x36bfdf=_0x25aa9c['locale'];_0x25aa9c['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x120b65=>{if('formatInline'!=_0x120b65['type'])return;const {data:_0x1efc4a}=_0x120b65;if(_0x1efc4a&&'highlight'==_0x1efc4a['commandName']){const _0x13d02a=_0x36bfdf['t'],_0x400b9e=_0x1efc4a['commandParams'][0x0]['value'];if(_0x400b9e){const _0x4cf1f8=_0x25aa9c['config']['get']('highlight.options')['find'](_0x31d0ce=>_0x31d0ce['model']==_0x400b9e),_0x58a59d=_0x13d02a(_0x4cf1f8['title'])['toLowerCase']();return{'type':'format','content':o(_0x36bfdf,'*Set\x20highlight:*\x20%0',_0x58a59d),'color':{'value':_0x4cf1f8['color'],'title':_0x4cf1f8['title']}};}return{'type':'format','content':o(_0x36bfdf,'*Remove\x20highlight*',o(_0x36bfdf,'FORMAT_HIGHLIGHT'))};}});}}class it extends _0x236ed3{['afterInit'](){const _0x44a17e=this['editor'];if(!_0x44a17e['plugins']['has']('HorizontalLineEditing'))return;_0x44a17e['plugins']['get']('TrackChangesEditing')['enableCommand']('horizontalLine');const _0x797ac6=_0x44a17e['plugins']['get']('TrackChangesEditing'),_0x112f6e=_0x44a17e['locale'];_0x797ac6['descriptionFactory']['registerElementLabel']('horizontalLine',_0x413117=>o(_0x112f6e,'ELEMENT_HORIZONTAL_LINE',_0x413117)),_0x44a17e['conversion']['for']('dataDowncast')['elementToStructure']({'model':'horizontalLine','view':(_0x1f7431,{writer:_0x365dd5,options:_0x40f7e0})=>{if(!_0x40f7e0['showSuggestionHighlights'])return null;const _0x5d5b0e=_0x365dd5['createContainerElement']('div'),_0x391895=_0x365dd5['createEmptyElement']('hr');return _0x365dd5['addClass']('ck-horizontal-line',_0x5d5b0e),_0x365dd5['insert'](_0x365dd5['createPositionAt'](_0x5d5b0e,0x0),_0x391895),_0x5d5b0e;},'converterPriority':'high'});}}class st extends _0x236ed3{['afterInit'](){const _0x25d1b2=this['editor'];if(!_0x25d1b2['plugins']['has']('HtmlEmbed'))return;const _0x114fd8=_0x25d1b2['plugins']['get']('TrackChangesEditing'),_0x2f20ef=_0x25d1b2['locale'];_0x114fd8['descriptionFactory']['registerElementLabel']('rawHtml',_0xac9828=>o(_0x2f20ef,'ELEMENT_HTML_EMBED',_0xac9828)),_0x114fd8['enableDefaultAttributesIntegration']('htmlEmbed'),_0x114fd8['registerBlockAttribute']('value'),_0x114fd8['descriptionFactory']['registerDescriptionCallback'](_0x4d9ef4=>{if('attribute'!=_0x4d9ef4['type'])return;const {data:_0x5a58b5}=_0x4d9ef4;if(_0x5a58b5&&'value'==_0x5a58b5['key']&&_0x4d9ef4['getFirstRange']()['start']['nodeAfter']['is']('element','rawHtml')){const _0x26c069=o(_0x2f20ef,'ELEMENT_HTML_EMBED');return{'type':'format','content':o(_0x2f20ef,'*Change\x20%0\x20content*',_0x26c069)};}}),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x1e5023=this['editor'],_0x3b011f=_0x1e5023['locale'];_0x1e5023['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0xbe2da4=>{if('formatBlock'!=_0xbe2da4['type'])return;const {data:_0x38da42}=_0xbe2da4;if(_0x38da42&&'htmlEmbed'==_0x38da42['commandName']){const _0x463c81=o(_0x3b011f,'ELEMENT_HTML_EMBED');return{'type':'format','content':o(_0x3b011f,'*Change\x20%0\x20content*',_0x463c81)};}});}}class nt extends _0x236ed3{['afterInit'](){const _0x9d25f3=this['editor'];if(!_0x9d25f3['plugins']['has']('ImageEditing'))return;const _0x1a2751=_0x9d25f3['plugins']['get']('TrackChangesEditing'),_0x25fef3=_0x9d25f3['plugins']['get']('ImageUtils'),_0x25547d=_0x9d25f3['locale'];_0x1a2751['enableCommand']('insertImage'),_0x1a2751['descriptionFactory']['registerElementLabel']('imageBlock',_0x335ee3=>o(_0x25547d,'ELEMENT_IMAGE',_0x335ee3)),_0x1a2751['descriptionFactory']['registerElementLabel']('imageInline',_0x9f539d=>o(_0x25547d,'ELEMENT_INLINE_IMAGE',_0x9f539d)),_0x1a2751['descriptionFactory']['registerElementLabel']('caption',()=>o(_0x25547d,'ELEMENT_CAPTION')),_0x9d25f3['plugins']['has']('ImageUploadEditing')&&_0x1a2751['enableCommand']('uploadImage'),_0x9d25f3['plugins']['has']('ImageBlockEditing')&&_0x9d25f3['plugins']['has']('ImageInlineEditing')&&(_0x1a2751['enableCommand']('imageTypeInline',(_0x5d5d73,_0x59fe25)=>{const _0x31d990=_0x25fef3['getClosestSelectedImageElement'](_0x9d25f3['model']['document']['selection']);_0x9d25f3['model']['change'](()=>{_0x1a2751['markBlockFormat'](_0x31d990,{'commandName':'imageTypeInline','commandParams':[_0x59fe25]},[],'convertBlockImageToInline');});}),_0x1a2751['enableCommand']('imageTypeBlock',(_0x43caa4,_0x32bc93)=>{_0x9d25f3['model']['change'](_0x457c90=>{let _0x42b001=_0x25fef3['getClosestSelectedImageElement'](_0x9d25f3['model']['document']['selection']),_0x43cb72=_0x457c90['createRangeOn'](_0x42b001);const _0x232555=_0x3645f3['fromPosition'](_0x43cb72['start'],'toPrevious'),_0x30aae3=_0x3645f3['fromPosition'](_0x43cb72['end'],'toNext');_0x1a2751['forceDefaultExecution'](()=>_0x43caa4(_0x32bc93)),_0x42b001=_0x25fef3['getClosestSelectedImageElement'](_0x9d25f3['model']['document']['selection']),_0x43cb72=_0x457c90['createRangeOn'](_0x42b001);const _0x5364ca=_0x457c90['createRange'](_0x232555,_0x30aae3);_0x232555['detach'](),_0x30aae3['detach'](),_0x1a2751['markBlockFormat'](_0x42b001,{'commandName':'imageTypeInline','commandParams':[_0x32bc93]},[],'convertInlineImageToBlock'),_0x5364ca['start']['isBefore'](_0x43cb72['start'])&&_0x1a2751['markInsertion'](_0x457c90['createRange'](_0x5364ca['start'],_0x43cb72['start']),'convertInlineImageToBlock'),_0x43cb72['end']['isBefore'](_0x5364ca['end'])&&_0x1a2751['markInsertion'](_0x457c90['createRange'](_0x43cb72['end'],_0x5364ca['end']),'convertInlineImageToBlock');});}),_0x1a2751['_suggestionFactory']['registerCustomCallback']('formatBlock','convertInlineImageToBlock','join',()=>!0x1),_0x1a2751['_suggestionFactory']['registerCustomCallback']('formatBlock','convertInlineImageToBlock','accept',()=>!0x1),_0x1a2751['_suggestionFactory']['registerCustomCallback']('formatBlock','convertInlineImageToBlock','discard',_0x1a2751['_suggestionFactory']['getSuggestionCallback']('formatBlock','','accept')),_0x1a2751['_suggestionFactory']['registerCustomCallback']('insertion','convertInlineImageToBlock','join',()=>!0x1),_0x1a2751['_suggestionFactory']['registerCustomCallback']('insertion','convertInlineImageToBlock','discard',([_0x1d6e74])=>{const _0x34b0d5=_0x1a2751['_suggestionFactory']['getSuggestionCallback']('insertion','','discard');let _0x245835=_0x1d6e74['start'],_0x3031a5=_0x1d6e74['end'];const _0x50e4aa=_0x9d25f3['model']['schema']['getNearestSelectionRange'](_0x245835,'backward'),_0x912f80=_0x9d25f3['model']['schema']['getNearestSelectionRange'](_0x3031a5,'forward');_0x50e4aa['isCollapsed']&&(_0x245835=_0x50e4aa['start']),_0x912f80['isCollapsed']&&(_0x3031a5=_0x912f80['end']),_0x34b0d5([_0x9d25f3['model']['createRange'](_0x245835,_0x3031a5)]);}),_0x1a2751['_suggestionFactory']['registerCustomCallback']('formatBlock','convertInlineImageToBlock','chain',_0x2349a8),_0x1a2751['_suggestionFactory']['registerCustomCallback']('insertion','convertInlineImageToBlock','chain',_0x2349a8)),_0x9d25f3['plugins']['has']('ImageCaptionEditing')&&(_0x1a2751['enableCommand']('toggleImageCaption',(_0x5824f7,_0x3f46a0)=>{const _0x36fad7=_0x9d25f3['plugins']['get']('ImageCaptionUtils');let _0x1d90a8=_0x25fef3['getClosestSelectedImageElement'](_0x9d25f3['model']['document']['selection']),_0x328882=_0x36fad7['getCaptionFromImageModelElement'](_0x1d90a8);_0x9d25f3['model']['change'](()=>{if(_0x328882)return void _0x1a2751['markDeletion'](_0x9d25f3['model']['createRangeOn'](_0x328882));const _0x5553c8=_0x25fef3['isBlockImage'](_0x1d90a8);_0x5824f7(_0x3f46a0),_0x1d90a8=_0x25fef3['getClosestSelectedImageElement'](_0x9d25f3['model']['document']['selection']),_0x328882=_0x36fad7['getCaptionFromImageModelElement'](_0x1d90a8),_0x1a2751['markInsertion'](_0x9d25f3['model']['createRangeOn'](_0x328882),_0x5553c8?null:'imageCaption');});}),_0x1a2751['_suggestionFactory']['registerCustomCallback']('insertion','imageCaption','chain',_0x2349a8));const _0x47eb8d=[{'type':'formatBlock','subType':'imageStylePreApply'},{'type':'insertion','subType':'imageCaption'},{'type':'formatBlock','subType':'convertInlineImageToBlock'},{'type':'insertion','subType':'convertInlineImageToBlock'}];function _0x1544f1(_0x59cac1,_0x44975a){const _0x153107=_0x47eb8d['findIndex'](({type:_0x3c1ae0,subType:_0x1b6d21})=>_0x59cac1['type']==_0x3c1ae0&&_0x59cac1['subType']==_0x1b6d21),_0x56ffbf=_0x47eb8d['findIndex'](({type:_0x28ee51,subType:_0x239a0e})=>_0x44975a['type']==_0x28ee51&&_0x44975a['subType']==_0x239a0e);if(_0x153107<0x0||_0x56ffbf<0x0)return!0x1;const _0x3f59a9=_0x59cac1['getFirstRange'](),_0x440c60=_0x44975a['getFirstRange']();if((0x0==_0x153107||0x1==_0x153107)&&0x2==_0x56ffbf&&_0x3f59a9['isIntersecting'](_0x440c60))return!0x0;if(0x2==_0x153107&&0x3==_0x56ffbf){const _0x56be25=_0x1a2751['_findSuggestions'](_0x3f59a9,'insertion')['filter'](({suggestion:_0x2367d1,meta:_0x344378})=>_0x344378['isOwn']&&'convertInlineImageToBlock'==_0x2367d1['subType']);if(_0x56be25['length']>0x1&&_0x440c60['end']['isEqual'](_0x3f59a9['start']))return!0x0;if(0x1==_0x56be25['length']&&(_0x3f59a9['start']['isEqual'](_0x440c60['end'])||_0x3f59a9['end']['isEqual'](_0x440c60['start'])))return!0x0;}if(0x3==_0x153107&&0x3==_0x56ffbf&&_0x3f59a9['start']['isBefore'](_0x440c60['start'])){const _0x40f671=_0x3f59a9['end']['nodeAfter'],_0x5ba04b=_0x440c60['start']['nodeBefore'];return _0x25fef3['isBlockImage'](_0x40f671)&&_0x40f671===_0x5ba04b;}return!0x1;}function _0x2349a8(_0xecd819,_0x1cb52a){return _0x1544f1(_0xecd819,_0x1cb52a)?[_0xecd819,_0x1cb52a]:_0x1544f1(_0x1cb52a,_0xecd819)?[_0x1cb52a,_0xecd819]:null;}_0x9d25f3['plugins']['has']('ImageResize')&&(_0x1a2751['enableDefaultAttributesIntegration']('resizeImage'),_0x1a2751['registerBlockAttribute']('resizedWidth'),_0x1a2751['descriptionFactory']['registerAttributeLabel']('resizedWidth',o(_0x25547d,'FORMAT_IMAGE_SIZE'))),_0x9d25f3['plugins']['has']('ImageTextAlternativeEditing')&&(_0x1a2751['enableDefaultAttributesIntegration']('imageTextAlternative'),_0x1a2751['registerBlockAttribute']('alt')),_0x1a2751['descriptionFactory']['registerDescriptionCallback'](_0x372aef=>{if(!!_0x47eb8d['find'](({type:_0x4f7168,subType:_0x450dd7})=>_0x372aef['type']==_0x4f7168&&_0x372aef['subType']==_0x450dd7))return _0x372aef['previous']?{}:void 0x0;}),_0x1a2751['descriptionFactory']['registerDescriptionCallback'](_0x4a3075=>{if('insertion'==_0x4a3075['type']||'deletion'==_0x4a3075['type']){const _0x27d1e1=_0x4a3075['getContainedElement']();if(_0x27d1e1&&_0x27d1e1['is']('element','caption'))return{'type':'insertion'==_0x4a3075['type']?'addObject':'removeObject','element':_0x27d1e1,'quantity':0x1};}}),_0x1a2751['descriptionFactory']['registerDescriptionCallback'](_0x2019a5=>'formatBlock'==_0x2019a5['type']&&'convertInlineImageToBlock'==_0x2019a5['subType']?{'type':'format','content':'Inline\x20image\x20to\x20block\x20image'}:'formatBlock'==_0x2019a5['type']&&'convertBlockImageToInline'==_0x2019a5['subType']?{'type':'format','content':'Block\x20image\x20to\x20inline\x20image'}:void 0x0),_0x1a2751['descriptionFactory']['registerDescriptionCallback'](_0x52ab5e=>{if('attribute'!=_0x52ab5e['type'])return;const {data:_0x471ba4}=_0x52ab5e;if(!_0x471ba4||'alt'!=_0x471ba4['key'])return;const _0x3944ae=_0x471ba4['newValue'];return _0x3944ae?{'type':'format','content':o(_0x25547d,'*Set\x20image\x20text\x20alternative:*\x20%0','\x22'+_0x3944ae+'\x22')}:{'type':'format','content':o(_0x25547d,'*Remove\x20image\x20text\x20alternative*')};}),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x2aaa6b=this['editor'],_0x4b3bda=_0x2aaa6b['locale'];_0x2aaa6b['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x558a77=>{if('formatBlock'!=_0x558a77['type']&&'formatInline'!=_0x558a77['type'])return;const {data:_0x20bc18}=_0x558a77;if(_0x20bc18){if('imageTextAlternative'==_0x20bc18['commandName']){const _0x17549e=_0x20bc18['commandParams'][0x0]['newValue'];return _0x17549e?{'type':'format','content':o(_0x4b3bda,'*Set\x20image\x20text\x20alternative:*\x20%0','\x22'+_0x17549e+'\x22')}:{'type':'format','content':o(_0x4b3bda,'*Remove\x20image\x20text\x20alternative*')};}if('resizeImage'==_0x20bc18['commandName']){const _0x25c2a7=_0x20bc18['commandParams'][0x0]['width'];return _0x25c2a7?{'type':'format','content':o(_0x4b3bda,'*Set\x20image\x20width:*\x20%0',_0x25c2a7)}:{'type':'format','content':o(_0x4b3bda,'*Reset\x20image\x20width*')};}}});}}class ot extends _0x236ed3{['afterInit'](){if(!this['editor']['plugins']['has']('ImageEditing'))return;const _0x41428f=this['editor']['locale'],_0x2563e7=this['editor']['plugins']['get']('TrackChangesEditing');_0x2563e7['enableDefaultAttributesIntegration']('replaceImageSource'),_0x2563e7['registerBlockAttribute']('src'),_0x2563e7['descriptionFactory']['registerDescriptionCallback'](_0x31b44c=>{if('attribute'!=_0x31b44c['type'])return;const {data:_0x1e458e}=_0x31b44c;return _0x1e458e&&'src'==_0x1e458e['key']?_0x1e458e['newValue']&&_0x1e458e['oldValue']?{'type':'format','content':o(_0x41428f,'*Replace\x20image\x20URL*')}:{'type':'format','content':''}:void 0x0;}),this['_handleLegacySuggestions']();}['_handleLegacySuggestions'](){const _0x251de4=this['editor']['plugins']['get']('TrackChangesEditing');_0x251de4['_suggestionFactory']['registerCustomCallback']('formatBlock','replaceImageSource','accept',_0x251de4['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'discard')),_0x251de4['_suggestionFactory']['registerCustomCallback']('formatBlock','replaceImageSource','discard',_0x251de4['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'accept')),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x1fa860=this['editor'],_0x2ec1d3=_0x1fa860['locale'];_0x1fa860['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x26d9c5=>{if('formatBlock'!=_0x26d9c5['type']&&'formatInline'!=_0x26d9c5['type'])return;const {data:_0x5681fc}=_0x26d9c5;if(!_0x5681fc||'replaceImageSource'!=_0x5681fc['commandName'])return;return{'type':'format','content':o(_0x2ec1d3,'*Format:*\x20replace\x20image\x20URL')};});}}class rt extends _0x236ed3{['afterInit'](){const _0x5a1c67=this['editor'];if(!_0x5a1c67['plugins']['has']('ImageStyleEditing'))return;const _0x1a335f=_0x5a1c67['plugins']['get']('TrackChangesEditing'),_0x17a930=_0x5a1c67['plugins']['get']('ImageUtils'),_0x13e870={};_0x1a335f['enableCommand']('imageStyle',(_0x225a8a,_0x332b15)=>{const _0xc41231=_0x5a1c67['plugins']['get']('Users')['me'],_0x5be971=_0x5a1c67['commands']['get']('imageStyle');let _0x1f5fcc=_0x17a930['getClosestSelectedImageElement'](_0x5a1c67['model']['document']['selection']),_0x5c0da3=_0x5a1c67['model']['createRangeOn'](_0x1f5fcc),_0x44f9bb=_0x5be971['value'];if(_0x44f9bb==_0x332b15['value'])return;const _0x55ec92={'commandName':'imageStyle','commandParams':[_0x332b15],'formatGroupId':_0x2ea0eb()};_0x5a1c67['model']['change'](()=>{if(_0x1a335f['getSuggestions']()['filter'](_0x5309cd=>_0x5309cd['isInContent']&&_0xc41231==_0x5309cd['author']&&('formatBlock'==_0x5309cd['type']||'formatInline'==_0x5309cd['type'])&&('imageStylePreApply'==_0x5309cd['subType']||'imageStylePostApply'==_0x5309cd['subType'])&&_0x5309cd['getFirstRange']()['isEqual'](_0x5c0da3))['forEach'](_0x9a11c6=>_0x1a335f['discardSuggestion'](_0x9a11c6['head'])),_0x1f5fcc=_0x17a930['getClosestSelectedImageElement'](_0x5a1c67['model']['document']['selection']),_0x5c0da3=_0x5a1c67['model']['createRangeOn'](_0x1f5fcc),_0x5be971['refresh'](),_0x5a1c67['commands']['get']('imageTypeInline')['refresh'](),_0x5a1c67['commands']['get']('imageTypeBlock')['refresh'](),_0x44f9bb=_0x5be971['value'],_0x44f9bb!=_0x332b15['value'])return _0x17a930['isInlineImage'](_0x1f5fcc)&&_0x5be971['shouldConvertImageType'](_0x332b15['value'],_0x1f5fcc)?(_0x225a8a({..._0x332b15,'setImageSizes':!0x1}),_0x1f5fcc=_0x17a930['getClosestSelectedImageElement'](_0x5a1c67['model']['document']['selection']),void _0x1a335f['markBlockFormat'](_0x1f5fcc,{..._0x55ec92,'commandReversedParams':[{'value':_0x44f9bb||null,'setImageSizes':!0x1}]},[],'imageStylePreApply')):void(_0x17a930['isBlockImage'](_0x1f5fcc)?_0x1a335f['markBlockFormat'](_0x1f5fcc,_0x55ec92,[],'imageStylePostApply'):_0x1a335f['markInlineFormat'](_0x5c0da3,_0x55ec92,'imageStylePostApply'));});});for(const _0x2f0a1a of _0x5a1c67['plugins']['get']('ImageStyleEditing')['normalizedStyles'])_0x13e870[_0x2f0a1a['name']]=_0x2f0a1a['title']['toLowerCase']();_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatBlock','imageStylePreApply','join',()=>!0x1),_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatBlock','imageStylePostApply','join',()=>!0x1),_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatInline','imageStylePostApply','join',()=>!0x1),_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatBlock','imageStylePreApply','accept',([_0x1f9846])=>{_0x17a930['setImageNaturalSizeAttributes'](_0x1f9846['getContainedElement']());}),_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatBlock','imageStylePreApply','discard',(_0x81d96b,_0x4f2f18)=>{_0x1a335f['_suggestionFactory']['getSuggestionCallback']('formatBlock','','accept')(_0x81d96b,{'commandName':_0x4f2f18['commandName'],'commandParams':_0x4f2f18['commandReversedParams']});}),_0x1a335f['_suggestionFactory']['registerCustomCallback']('formatBlock','imageStylePreApply','chain',function(_0x3fe29c,_0xbe6264){if(_0x39b70f(_0x3fe29c,_0xbe6264))return[_0x3fe29c,_0xbe6264];if(_0x39b70f(_0xbe6264,_0x3fe29c))return[_0xbe6264,_0x3fe29c];return null;});const _0x59934e=[{'type':'formatBlock','subType':'imageStylePreApply'},{'type':'insertion','subType':'imageCaption'},{'type':'formatBlock','subType':'convertInlineImageToBlock'},{'type':'insertion','subType':'convertInlineImageToBlock'}];function _0x39b70f(_0x45ebd6,_0x2cd8c5){const _0xa906f1=_0x59934e['findIndex'](({type:_0x90701f,subType:_0x109103})=>_0x45ebd6['type']==_0x90701f&&_0x45ebd6['subType']==_0x109103),_0xb4b5d3=_0x59934e['findIndex'](({type:_0x182e29,subType:_0x539282})=>_0x2cd8c5['type']==_0x182e29&&_0x2cd8c5['subType']==_0x539282);if(_0xa906f1<0x0||_0xb4b5d3<0x0)return!0x1;const _0x3452c7=_0x45ebd6['getFirstRange'](),_0x58d362=_0x2cd8c5['getFirstRange']();if((0x0==_0xa906f1||0x1==_0xa906f1)&&0x2==_0xb4b5d3&&_0x3452c7['isIntersecting'](_0x58d362))return!0x0;if(0x2==_0xa906f1&&0x3==_0xb4b5d3){const _0x210f8c=_0x1a335f['_findSuggestions'](_0x3452c7,'insertion')['filter'](({suggestion:_0x565ad5,meta:_0xbd4e16})=>_0xbd4e16['isOwn']&&'convertInlineImageToBlock'==_0x565ad5['subType']);if(_0x210f8c['length']>0x1&&_0x58d362['end']['isEqual'](_0x3452c7['start']))return!0x0;if(0x1==_0x210f8c['length']&&(_0x3452c7['start']['isEqual'](_0x58d362['end'])||_0x3452c7['end']['isEqual'](_0x58d362['start'])))return!0x0;}if(0x3==_0xa906f1&&0x3==_0xb4b5d3&&_0x3452c7['start']['isBefore'](_0x58d362['start'])){const _0x2005f4=_0x3452c7['end']['nodeAfter'],_0x47381a=_0x58d362['start']['nodeBefore'];return _0x17a930['isBlockImage'](_0x2005f4)&&_0x2005f4===_0x47381a;}return!0x1;}_0x5a1c67['model']['document']['registerPostFixer'](()=>{let _0x2f2197=!0x1;const _0x3c1ed1=Array['from'](_0x5a1c67['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x4ffae9,data:_0x149f20}of _0x3c1ed1){const {group:_0x40c618,type:_0x4c3d3d,subType:_0x2fc6e2,id:_0x46d001}=_0x1a335f['_splitMarkerName'](_0x4ffae9);if('suggestion'==_0x40c618&&_0x1a335f['hasSuggestion'](_0x46d001)){if('formatBlock'==_0x4c3d3d&&('imageStylePreApply'==_0x2fc6e2||'imageStylePostApply'==_0x2fc6e2)){const _0x5b30d2=_0x1a335f['getSuggestion'](_0x46d001);if(_0x149f20['newRange']){const _0x45c536=_0x5b30d2['getFirstRange']()['getContainedElement']();if(_0x17a930['isBlockImage'](_0x45c536))continue;_0x1a335f['discardSuggestion'](_0x5b30d2),_0x2f2197=!0x0;}}if('insertion'==_0x4c3d3d&&'imageCaption'==_0x2fc6e2&&!_0x149f20['newRange']){const _0x1c821e=_0x1a335f['getSuggestion'](_0x46d001);_0x1c821e['next']&&_0x1c821e['next']['isInContent']&&(_0x1a335f['discardSuggestion'](_0x1c821e['next']),_0x2f2197=!0x0);}}}return _0x2f2197;}),this['_registerLegacyDescription'](_0x13e870);}['_registerLegacyDescription'](_0x3fc243){const _0x5735d4=this['editor'],_0x38e9e3=_0x5735d4['locale'];_0x5735d4['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x959199=>{if('formatBlock'!=_0x959199['type']&&'formatInline'!=_0x959199['type'])return;const {data:_0x45a0e5}=_0x959199;if(!_0x45a0e5||'imageStyle'!=_0x45a0e5['commandName'])return;const _0x49eb82=_0x45a0e5['commandParams'][0x0]['value'];return _0x24afa8('side'===_0x49eb82?o(_0x38e9e3,'FORMAT_SIDE_IMAGE'):_0x3fc243[_0x49eb82]||_0x49eb82);function _0x24afa8(_0x379503){return{'type':'format','content':o(_0x38e9e3,'*Format:*\x20%0',_0x379503)};}});}}class at extends _0x236ed3{['_trackChangesValueDuringImport'];['_trackChangesExecuted'];constructor(_0x4f528b){super(_0x4f528b),this['_trackChangesValueDuringImport']=!0x1,this['_trackChangesExecuted']=!0x1;}['afterInit'](){const _0x2e6c5f=this['editor'],_0x5c97ea=_0x2e6c5f['commands']['get']('importWord'),_0x5c1dfa=_0x2e6c5f['commands']['get']('trackChanges');_0x5c97ea&&(_0x5c97ea['on']('execute',(_0x2a4783,[,_0x3c4b07])=>{this['_trackChangesValueDuringImport']=_0x5c1dfa['value'],_0x3c4b07['collaboration_features']['track_changes']=!this['_trackChangesValueDuringImport'];},{'priority':'high'}),this['listenTo'](_0x5c97ea,'dataInsert',this['_handleImportedData']['bind'](this)),this['listenTo'](_0x5c97ea,'dataInsert',()=>{this['_trackChangesExecuted']&&(_0x5c1dfa['execute'](),this['_trackChangesExecuted']=!0x1);},{'priority':'lowest'}),_0x2e6c5f['plugins']['get']('TrackChangesEditing')['enableCommand']('importWord'));}['_handleImportedData'](_0x128a1a,_0x3ad3dc){const {suggestions:_0x24ebdc}=_0x3ad3dc,_0x567672=this['editor']['commands']['get']('trackChanges'),_0x337620=_0x567672['value'];this['_trackChangesValueDuringImport']!==_0x337620&&(_0x567672['execute'](),this['_trackChangesExecuted']=!0x0),_0x24ebdc&&_0x24ebdc['forEach'](({id:_0x31e688,type:_0x430b33,author:_0x368822,created_at:_0x5df10c})=>{const _0x11ec3c={'id':_0x31e688,'type':_0x430b33,'authorId':this['editor']['plugins']['get']('Users')['me']['id'],'createdAt':new Date(),'data':null,'hasComments':!0x1,'attributes':{'@external':{'authorName':_0x368822,'createdAt':_0x5df10c?new Date(_0x5df10c):new Date(),'source':'importWord'}}};this['editor']['plugins']['get']('TrackChangesEditing')['_setSuggestionData'](_0x11ec3c);});}}class ct extends _0x236ed3{['afterInit'](){const _0x5ddb6e=this['editor'],_0x6b11ca=_0x5ddb6e['plugins']['get']('TrackChangesEditing');if(_0x5ddb6e['plugins']['has']('IndentEditing')&&(_0x6b11ca['enableCommand']('indent'),_0x6b11ca['enableCommand']('outdent')),_0x5ddb6e['plugins']['has']('IndentBlock')){for(const _0x282603 of['indentBlock','outdentBlock'])_0x6b11ca['enableDefaultAttributesIntegration'](_0x282603);}const _0x586db5=_0x5ddb6e['locale'];_0x6b11ca['registerBlockAttribute']('blockIndent'),_0x6b11ca['descriptionFactory']['registerAttributeLabel']('blockIndent',o(_0x586db5,'FORMAT_INDENT')),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x3624b6=this['editor'],_0x11d3ce=_0x3624b6['locale'],_0x40065f=_0x3624b6['plugins']['get']('TrackChangesEditing');_0x40065f['descriptionFactory']['registerDescriptionCallback'](_0x2f23e0=>{if('formatBlock'!=_0x2f23e0['type'])return;const {data:_0x3701a0}=_0x2f23e0;if(!_0x3701a0)return;if('indentBlock'!=_0x3701a0['commandName']&&'outdentBlock'!=_0x3701a0['commandName'])return;const _0x5f10f2=_0x2f23e0['getItems']()[0x0],_0x557024=_0x40065f['descriptionFactory']['getItemLabel'](_0x5f10f2);return'indentBlock'==_0x3701a0['commandName']?{'type':'format','content':o(_0x11d3ce,'*Indent:*\x20%0',_0x557024)}:'outdentBlock'==_0x3701a0['commandName']?{'type':'format','content':o(_0x11d3ce,'*Outdent:*\x20%0',_0x557024)}:void 0x0;});}}class ut extends _0x236ed3{static get['requires'](){return[tr];}['init'](){this['editor']['plugins']['get']('TrackChangesEditing')['enableCommand']('input');}}class ht extends _0x236ed3{['afterInit'](){const _0x574ed9=this['editor'];if(!_0x574ed9['plugins']['has']('LinkEditing'))return;const _0x4d18ed=_0x574ed9['plugins']['get']('TrackChangesEditing'),_0x35f0b6=_0x574ed9['commands']['get']('link');_0x4d18ed['enableDefaultAttributesIntegration']('link'),_0x4d18ed['enableDefaultAttributesIntegration']('unlink'),_0x4d18ed['registerInlineAttribute']('linkHref');for(const _0x3c8cd3 of _0x35f0b6['manualDecorators'])_0x4d18ed['registerInlineAttribute'](_0x3c8cd3['id']),_0x4d18ed['descriptionFactory']['registerAttributeLabel'](_0x3c8cd3['id'],'link\x20('+_0x3c8cd3['label']['toLowerCase']()+')');_0x4d18ed['descriptionFactory']['registerDescriptionCallback'](_0x1cf783=>{if('attribute'!=_0x1cf783['type'])return;const {data:_0x2c6e16}=_0x1cf783;if(!_0x2c6e16||'linkHref'!=_0x2c6e16['key'])return;const _0xb67c65=_0x2c6e16['newValue'],_0x51b95f=_0x574ed9['locale'];return{'type':'format','content':null==_0xb67c65?o(_0x51b95f,'*Remove\x20link*'):o(_0x51b95f,'*Set\x20link:*\x20%0','\x22'+_0xb67c65+'\x22')};}),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x2908e2=this['editor'],_0x240231=_0x2908e2['locale'];_0x2908e2['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x333691=>{if('formatInline'!=_0x333691['type'])return;const {data:_0x1cccb1}=_0x333691;if(_0x1cccb1){if('link'==_0x1cccb1['commandName']){const _0x49e001=_0x1cccb1['commandParams'][0x0];return{'type':'format','content':o(_0x240231,'*Set\x20link:*\x20%0','\x22'+_0x49e001+'\x22')};}return'unlink'==_0x1cccb1['commandName']?{'type':'format','content':o(_0x240231,'*Remove\x20link*')}:void 0x0;}});}}class ft extends _0x236ed3{['afterInit'](){const _0x31fab7=this['editor'],_0x3c0d2d=_0x31fab7['locale'];if(!_0x31fab7['plugins']['has']('LegacyListEditing'))return;const _0x39d6b8=_0x31fab7['plugins']['get']('TrackChangesEditing'),_0x4c339c=_0x31fab7['plugins']['has']('LegacyTodoListEditing');function _0x1e76d2(_0x5a0ee9){return()=>{const _0x3bb93f=_0x31fab7['model']['document']['selection'],_0xe96f17=_0x31fab7['commands']['get'](_0x5a0ee9);if(_0xe96f17['value'])return void _0x31fab7['execute']('paragraph',{});const _0x1f702b=_0x5a0ee9['slice'](0x0,-0x4),_0x2a8f3f=function(_0x51e3d2,_0x3c5a96,_0x2425e6){let _0x31384c=Array['from'](_0x51e3d2)['filter'](_0x17acb9=>function(_0x15b9e0,_0x4cdc6e){return _0x4cdc6e['checkChild'](_0x15b9e0['parent'],'listItem')&&!_0x4cdc6e['isObject'](_0x15b9e0);}(_0x17acb9,_0x2425e6));_0x31384c=_0x31384c['filter'](_0x670793=>!_0x670793['is']('element','listItem')||_0x670793['getAttribute']('listType')!=_0x3c5a96);const _0x4d85e3=new Set();for(const _0x50a9c7 of _0x31384c)_0x50a9c7['is']('element','listItem')?_0x4d85e3['add'](fe(_0x50a9c7)):_0x4d85e3['add'](_0x50a9c7);return Array['from'](_0x4d85e3);}(_0x3bb93f['getSelectedBlocks'](),_0x1f702b,_0x31fab7['model']['schema']);_0x31fab7['model']['change'](()=>{for(const _0x2e9257 of _0x2a8f3f)_0x39d6b8['markBlockFormat'](_0x2e9257,{'commandName':_0x5a0ee9,'commandParams':[{'forceValue':!_0xe96f17['value']}],'formatGroupId':'blockName'},ue(_0x2e9257));});};}function _0x36f22d(_0x14adea){return()=>{const _0x1789f5=function(_0x2da548){let _0x537f3e=Array['from'](_0x2da548);const _0x5d556f=_0x537f3e['findIndex'](_0x18c60a=>'listItem'!=_0x18c60a['name']);return _0x5d556f>-0x1&&(_0x537f3e=_0x537f3e['slice'](0x0,_0x5d556f)),_0x537f3e;}(_0x31fab7['model']['document']['selection']['getSelectedBlocks']()),_0x48f188=_0x31fab7['model']['createRange'](_0x31fab7['model']['createPositionAt'](_0x1789f5[0x0],'before'),_0x31fab7['model']['createPositionAt'](_0x1789f5[_0x1789f5['length']-0x1],'end'));_0x31fab7['model']['change'](()=>{_0x39d6b8['markBlockFormat'](_0x48f188,{'commandName':_0x14adea,'commandParams':[],'formatGroupId':'listIndent'},function(_0x1877d6){const _0x3fd4b1=new Set();for(const _0x348c03 of _0x1877d6){let _0x8d68db=_0x348c03['nextSibling'];for(;_0x8d68db&&_0x8d68db['getAttribute']('listIndent')>_0x348c03['getAttribute']('listIndent');)_0x3fd4b1['add'](_0x8d68db),_0x8d68db=_0x8d68db['nextSibling'];}return Array['from'](_0x3fd4b1);}(_0x1789f5));});};}_0x39d6b8['enableCommand']('numberedList',_0x1e76d2('numberedList')),_0x39d6b8['enableCommand']('bulletedList',_0x1e76d2('bulletedList')),_0x4c339c&&_0x39d6b8['enableCommand']('todoList',_0x1e76d2('todoList')),_0x39d6b8['enableCommand']('indentList',_0x36f22d('indentList')),_0x39d6b8['enableCommand']('outdentList',_0x36f22d('outdentList')),_0x4c339c&&_0x39d6b8['enableCommand']('checkTodoList',()=>{const _0x561e59=_0x31fab7['commands']['get']('checkTodoList'),_0x2a2ce9=Array['from'](_0x561e59['_selectedElements']);_0x2a2ce9['filter'](_0x4b39a3=>_0x4b39a3['getAttribute']('todoListChecked')!=_0x561e59['value']),_0x31fab7['model']['change'](()=>{for(const _0x7ffadb of _0x2a2ce9)_0x39d6b8['markBlockFormat'](_0x7ffadb,{'commandName':'checkTodoList','commandParams':[{'forceValue':!_0x561e59['value']}]});});}),_0x39d6b8['descriptionFactory']['registerElementLabel']('listItem',_0x99b2f7=>o(_0x3c0d2d,'ELEMENT_LIST_ITEM',_0x99b2f7)),_0x39d6b8['descriptionFactory']['registerDescriptionCallback'](_0xee2511=>{if('formatBlock'!=_0xee2511['type']&&'formatInline'!=_0xee2511['type'])return;const {data:_0x4b2c2d}=_0xee2511;if(_0x4b2c2d){if('numberedList'==_0x4b2c2d['commandName']||'bulletedList'==_0x4b2c2d['commandName']||'todoList'==_0x4b2c2d['commandName'])switch(_0x4b2c2d['commandName']['replace']('List','')){case'bulleted':return _0x3a540c(o(_0x3c0d2d,'ELEMENT_BULLETED_LIST'));case'numbered':return _0x3a540c(o(_0x3c0d2d,'ELEMENT_NUMBERED_LIST'));case'todo':return _0x3a540c(o(_0x3c0d2d,'ELEMENT_TODO_LIST'));}if('indentList'==_0x4b2c2d['commandName'])return{'type':'format','content':o(_0x3c0d2d,'*Indent:*\x20%0',o(_0x3c0d2d,'ELEMENT_LIST_ITEM'))};if('outdentList'==_0x4b2c2d['commandName'])return{'type':'format','content':o(_0x3c0d2d,'*Outdent:*\x20%0',o(_0x3c0d2d,'ELEMENT_LIST_ITEM'))};if('checkTodoList'==_0x4b2c2d['commandName'])return _0x4b2c2d['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x3c0d2d,'*Check\x20item*')}:{'type':'format','content':o(_0x3c0d2d,'*Uncheck\x20item*')};}function _0x3a540c(_0x18de23){return{'type':'format','content':o(_0x3c0d2d,'*Change\x20to:*\x20%0',_0x18de23)};}});}}function fe(_0x1bb6ea){const _0x3c768b=_0x1bb6ea['getAttribute']('listIndent');if(0x0==_0x3c768b)return _0x1bb6ea;let _0x1ed5bc=_0x1bb6ea;for(;_0x1bb6ea['previousSibling']&&_0x1bb6ea['previousSibling']['is']('element','listItem');){const _0x54159b=_0x1bb6ea['previousSibling']['getAttribute']('listIndent');if(_0x54159b==_0x3c768b)_0x1ed5bc=_0x1bb6ea['previousSibling'];else{if(_0x54159b<_0x3c768b)break;}_0x1bb6ea=_0x1bb6ea['previousSibling'];}return _0x1ed5bc;}function ue(_0x3a79ad){const _0x17e097=[];if(_0x3a79ad['is']('element','listItem')&&_0x3a79ad['getAttribute']('listIndent')>0x0){let _0x3b5cf2=_0x3a79ad['nextSibling'];for(;_0x3b5cf2&&'listItem'==_0x3b5cf2['name']&&_0x3b5cf2['getAttribute']('listIndent')==_0x3a79ad['getAttribute']('listIndent');)_0x17e097['push'](_0x3b5cf2),_0x3b5cf2=_0x3b5cf2['nextSibling'];}return _0x17e097;}class W extends _0x236ed3{['afterInit'](){if(!this['editor']['plugins']['has']('LegacyListPropertiesEditing'))return;const _0x55af1b=this['editor']['config']['get']('list.properties'),_0x4ce044=this['editor']['plugins']['get']('TrackChangesEditing');_0x55af1b['styles']&&_0x4ce044['enableCommand']('listStyle',this['handleListStyleCommand']['bind'](this)),_0x55af1b['reversed']&&_0x4ce044['enableCommand']('listReversed',this['handleListReversedCommand']['bind'](this)),_0x55af1b['startIndex']&&_0x4ce044['enableCommand']('listStart',this['handleListStartCommand']['bind'](this)),_0x4ce044['descriptionFactory']['registerDescriptionCallback'](this['handleDescriptions']['bind'](this));}['handleListStyleCommand'](_0x3d15a3,_0x1cad04={}){const _0x20b026=this['editor']['plugins']['get']('TrackChangesEditing'),_0xff4f4=this['_getSuggestionBlocksForListStyle']();this['editor']['model']['change'](()=>{_0x20b026['markMultiRangeBlockFormat'](_0xff4f4,{'commandName':'listStyle','commandParams':[{'type':_0x1cad04['type']}],'formatGroupId':'listStyle'});});}['handleListReversedCommand'](_0x1a7d28,_0x431fd0={}){const _0x170c3a=this['editor']['plugins']['get']('TrackChangesEditing'),_0x1243df=this['_getSuggestionBlocks'](_0x25a7b3=>_0x25a7b3['is']('element','listItem')&&'numbered'===_0x25a7b3['getAttribute']('listType'));if(_0x1243df['length']<0x1)return;const _0x352044=_0x1243df['map'](_0x447393=>this['editor']['model']['createRange'](this['editor']['model']['createPositionAt'](_0x447393,'before'),this['editor']['model']['createPositionAt'](_0x447393,0x0)));this['editor']['model']['change'](()=>{_0x170c3a['markMultiRangeBlockFormat'](_0x352044,{'commandName':'listReversed','commandParams':[{'reversed':_0x431fd0['reversed']}],'formatGroupId':'listReversed'});});}['handleListStartCommand'](_0x1a1503,_0x1826a0={}){const _0x43a538=this['editor']['plugins']['get']('TrackChangesEditing'),_0x25c428=this['_getSuggestionBlocks'](_0x570710=>_0x570710['is']('element','listItem')&&'numbered'===_0x570710['getAttribute']('listType'));if(_0x25c428['length']<0x1)return;const _0xb228d6=_0x25c428['map'](_0x1a95ea=>this['editor']['model']['createRange'](this['editor']['model']['createPositionAt'](_0x1a95ea,'before'),this['editor']['model']['createPositionAt'](_0x1a95ea,0x0)));this['editor']['model']['change'](()=>{_0x43a538['markMultiRangeBlockFormat'](_0xb228d6,{'commandName':'listStart','commandParams':[{'startIndex':_0x1826a0['startIndex']}],'formatGroupId':'listStart'});});}['handleDescriptions'](_0x12a00a){if('formatBlock'!=_0x12a00a['type']&&'formatInline'!=_0x12a00a['type'])return;const _0x3cc585=this['editor']['locale'],{data:_0x5af80d}=_0x12a00a;if(!_0x5af80d)return;let _0x1dacdc,_0x2d347e;switch(_0x5af80d['commandName']){case'listStyle':_0x1dacdc='*Change\x20to:*\x20%0',_0x2d347e={'type':'format','content':o(_0x3cc585,_0x1dacdc,o(_0x3cc585,this['_getTranslationKeyForListStyle'](_0x5af80d['commandParams'][0x0]['type'])))};break;case'listReversed':_0x1dacdc=_0x5af80d['commandParams'][0x0]['reversed']?'*Format:*\x20set\x20order\x20to\x20reversed':'*Format:*\x20set\x20order\x20to\x20regular',_0x2d347e={'type':'format','content':o(_0x3cc585,_0x1dacdc)};break;case'listStart':_0x1dacdc='*Format:*\x20set\x20start\x20index\x20to\x20%0',_0x2d347e={'type':'format','content':o(_0x3cc585,_0x1dacdc,_0x5af80d['commandParams'][0x0]['startIndex'])};}return _0x2d347e;}['_getSuggestionBlocksForListStyle'](){const _0x44192d=this['editor']['plugins']['get']('LegacyListUtils');let _0x357e53=Array['from'](this['editor']['model']['document']['selection']['getSelectedBlocks']());return _0x357e53[0x0]?.['is']('element','listItem')&&_0x357e53['unshift'](..._0x44192d['getSiblingNodes'](this['editor']['model']['document']['selection']['getFirstPosition'](),'backward')),_0x357e53[_0x357e53['length']-0x1]?.['is']('element','listItem')&&_0x357e53['push'](..._0x44192d['getSiblingNodes'](this['editor']['model']['document']['selection']['getLastPosition'](),'forward')),_0x357e53=[...new Set(_0x357e53)],this['editor']['model']['document']['selection']['getFirstPosition']()?.['parent']?.['is']('element','listItem')&&(_0x357e53=_0x357e53['filter'](_0x4f5efe=>_0x4f5efe['is']('element','listItem'))),_0x357e53;}['_getSuggestionBlocks'](_0x198444){const _0xdacd9a=this['editor']['plugins']['get']('LegacyListUtils');let _0x2feda6=Array['from'](this['editor']['model']['document']['selection']['getSelectedBlocks']())['filter'](_0x198444)['map'](_0x442e77=>{const _0x63aec9=this['editor']['model']['createPositionAt'](_0x442e77,0x0);return[..._0xdacd9a['getSiblingNodes'](_0x63aec9,'backward'),..._0xdacd9a['getSiblingNodes'](_0x63aec9,'forward')];})['flat']();return _0x2feda6=[...new Set(_0x2feda6)],_0x2feda6;}['_getTranslationKeyForListStyle'](_0x2f7bd1){return'ELEMENT_'+(this['editor']['plugins']['get']('LegacyListUtils')['getListTypeFromListStyleType'](_0x2f7bd1)||'default')['toUpperCase']()+'_LIST_'+_0x2f7bd1['toUpperCase']()['replace'](/-/g,'_');}}class lt extends _0x236ed3{['afterInit'](){const _0x380ef3=this['editor'];if(!_0x380ef3['plugins']['has']('MediaEmbedEditing'))return;const _0x2ca546=_0x380ef3['plugins']['get']('TrackChangesEditing'),_0x5ad71b=_0x380ef3['locale'];_0x2ca546['enableCommand']('mediaEmbed'),_0x2ca546['descriptionFactory']['registerElementLabel']('media',_0x1950ee=>o(_0x5ad71b,'ELEMENT_MEDIA',_0x1950ee)),_0x380ef3['conversion']['for']('dataDowncast')['elementToElement']({'model':'media','view':(_0x1842d4,{writer:_0x108ea4,options:_0x59c73f})=>{if(_0x59c73f['showSuggestionHighlights'])return _0x108ea4['createEmptyElement']('div');},'converterPriority':'high'}),_0x380ef3['data']['downcastDispatcher']['on']('attribute:url:media',(_0x5e1f4b,_0x4c9f47,_0x5bedd4)=>{_0x5bedd4['options']['showSuggestionHighlights']&&_0x5e1f4b['stop']();},{'priority':'high'});}}class mt extends _0x236ed3{['afterInit'](){const _0x320e29=this['editor'];_0x320e29['plugins']['has']('MentionEditing')&&_0x320e29['plugins']['get']('TrackChangesEditing')['enableCommand']('mention');}}class dt extends _0x236ed3{['afterInit'](){const _0xcdd896=this['editor'];if(!_0xcdd896['plugins']['has']('MergeFieldsEditing'))return;_0xcdd896['plugins']['get']('TrackChangesEditing')['enableCommand']('insertMergeField'),_0xcdd896['plugins']['get']('TrackChangesEditing')['enableCommand']('insertMergeFieldBlock');const _0x12f46f=_0xcdd896['plugins']['get']('TrackChangesEditing'),_0x151497=_0xcdd896['locale'];_0x12f46f['descriptionFactory']['registerElementLabel']('mergeField',_0xc2b979=>o(_0x151497,'ELEMENT_MERGE_FIELD',_0xc2b979)),_0x12f46f['descriptionFactory']['registerElementLabel']('mergeFieldBlock',_0x2fd639=>o(_0x151497,'ELEMENT_MERGE_FIELD',_0x2fd639)),_0x12f46f['descriptionFactory']['registerDescriptionCallback'](_0x53aeee=>{if('insertion'!=_0x53aeee['type']&&'deletion'!=_0x53aeee['type'])return;const _0x38565f=_0x53aeee['getContainedElement']();if(null==_0x38565f)return;if(!_0x38565f['is']('element','mergeField')&&!_0x38565f['is']('element','mergeFieldBlock'))return;const _0x3797cb=_0xcdd896['plugins']['get']('MergeFieldsEditing')['getLabel'](_0x38565f['getAttribute']('id'));return'insertion'==_0x53aeee['type']?{'type':'insertion','content':o(_0x151497,'*Insert:*\x20%0','\x22'+_0x3797cb+'\x22\x20'+o(_0x151497,'ELEMENT_MERGE_FIELD'))}:{'type':'deletion','content':o(_0x151497,'*Remove:*\x20%0','\x22'+_0x3797cb+'\x22\x20'+o(_0x151497,'ELEMENT_MERGE_FIELD'))};});}}class pt extends _0x236ed3{['afterInit'](){const _0xa58751=this['editor'],_0x8b1e09=_0xa58751['plugins']['get']('TrackChangesEditing');_0xa58751['plugins']['has']('MultiLevelList')&&(_0x8b1e09['enableDefaultAttributesIntegration']('multiLevelList'),_0x8b1e09['registerBlockAttribute']('listMarkerStyle'),_0x8b1e09['descriptionFactory']['registerDescriptionCallback'](_0x57c477=>this['handleDescriptions'](_0x57c477)));}['handleDescriptions'](_0x4e7c30){const _0x31f546=this['editor']['locale'],{data:_0x467d6e}=_0x4e7c30,_0x34961d={'type':'format','content':''};if(_0x467d6e&&'listMarkerStyle'==_0x467d6e['key']){if(!_0x467d6e['oldValue'])return{'type':'format','content':o(_0x31f546,'*Set\x20format:*\x20%0',o(_0x31f546,'ELEMENT_MULTI_LEVEL_LIST'))+'\x20('+_0x467d6e['newValue']+')'};if(!_0x467d6e['newValue']){let _0x294b75=_0x4e7c30['head'];for(;_0x294b75;){if(_0x294b75['data']&&'listType'==_0x294b75['data']['key']&&_0x294b75['data']['newValue'])return _0x34961d;_0x294b75=_0x294b75['next'];}return{'type':'format','content':o(_0x31f546,'*Remove\x20format:*\x20%0',o(_0x31f546,'ELEMENT_MULTI_LEVEL_LIST'))+'\x20('+_0x467d6e['oldValue']+')'};}}}}class kt extends _0x236ed3{['afterInit'](){const _0xe5d1de=this['editor'];if(!_0xe5d1de['plugins']['has']('PageBreakEditing'))return;_0xe5d1de['plugins']['get']('TrackChangesEditing')['enableCommand']('pageBreak');const _0x7645be=_0xe5d1de['plugins']['get']('TrackChangesEditing'),_0x27a43d=_0xe5d1de['locale'];_0x7645be['descriptionFactory']['registerElementLabel']('pageBreak',_0x5da282=>o(_0x27a43d,'ELEMENT_PAGE_BREAK',_0x5da282));}}class bt extends _0x236ed3{['afterInit'](){const _0x1ab6a4=this['editor'];if(!_0x1ab6a4['plugins']['has']('Paragraph'))return;const _0x40e353=_0x1ab6a4['locale'],_0x159f12=_0x1ab6a4['plugins']['get']('TrackChangesEditing');_0x159f12['descriptionFactory']['registerElementLabel']('paragraph',_0x225766=>o(_0x40e353,'ELEMENT_PARAGRAPH',_0x225766)),_0x159f12['enableDefaultAttributesIntegration']('paragraph'),_0x159f12['enableCommand']('insertParagraph'),_0x1ab6a4['editing']['downcastDispatcher']['on']('addMarker:suggestion:insertion',nr(_0x1ab6a4),{'priority':'highest'}),_0x1ab6a4['data']['downcastDispatcher']['on']('addMarker:suggestion:insertion',(_0x43962b,_0x75e5a0,_0x206351)=>{_0x206351['options']['showSuggestionHighlights']&&nr(_0x1ab6a4,{'showActiveMarker':!0x1})(_0x43962b,_0x75e5a0,_0x206351);},{'priority':'highest'});const _0x4ebcc8=_0x159f12['descriptionFactory'];_0x4ebcc8['registerDescriptionCallback'](_0x127e04=>{if('insertion'!==_0x127e04['type'])return;const {start:_0x40f9c2,end:_0x30ff23}=_0x127e04['getFirstRange']();if(!_0x40f9c2['isTouching'](_0x30ff23)||!_0x40f9c2['nodeAfter'])return;const _0x4c459c=_0x1ab6a4['model']['schema'],_0x3c8be1=_0x40f9c2['nodeAfter'];return _0x4c459c['isBlock'](_0x3c8be1)&&!_0x4c459c['isLimit'](_0x3c8be1)&&_0x4c459c['checkChild'](_0x3c8be1,'$text')?{'type':'insertion','content':o(_0x40e353,'*Insert:*\x20%0',_0x4ebcc8['getItemLabel'](_0x3c8be1,0x1))}:void 0x0;}),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x6072a5=this['editor'],_0x4b7508=_0x6072a5['locale'];_0x6072a5['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x500955=>{if('formatBlock'!=_0x500955['type'])return;const {data:_0x5a253e}=_0x500955;return _0x5a253e&&'paragraph'==_0x5a253e['commandName']?{'type':'format','content':o(_0x4b7508,'*Change\x20to:*\x20%0',o(_0x4b7508,'ELEMENT_PARAGRAPH'))}:void 0x0;});}}function nr(_0xe52c9,{showActiveMarker:_0x4ed9eb=!0x0}={}){return(_0x2aea1f,_0x5bd384,_0x51b684)=>{const _0x5414c3=_0xe52c9['plugins']['get']('TrackChangesEditing'),_0x1a702a=_0x5bd384['markerRange']['start'],_0x21b650=_0x5bd384['markerRange']['end'],_0x342e80=_0xe52c9['model']['schema'];if(!_0x1a702a['isTouching'](_0x21b650)||!_0x1a702a['nodeAfter'])return;const _0x4c5c58=_0x1a702a['nodeAfter'];if(_0x342e80['isBlock'](_0x4c5c58)&&!_0x342e80['isLimit'](_0x4c5c58)&&_0x342e80['checkChild'](_0x4c5c58,'$text')){if(!_0x51b684['consumable']['consume'](_0x5bd384['markerRange'],_0x2aea1f['name']))return;const {authorId:_0x8ffcdc}=_0x5414c3['_splitMarkerName'](_0x5bd384['markerName']),_0x3cee6a=_0x51b684['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-split','data-author-id':_0x8ffcdc}),_0x5b126e=_0x51b684['mapper']['toViewPosition'](_0x21b650);_0x4ed9eb&&_0x5414c3['activeMarkers']['includes'](_0x5bd384['markerName'])&&_0x51b684['writer']['addClass']('ck-suggestion-marker--active',_0x3cee6a),_0x51b684['writer']['insert'](_0x5b126e,_0x3cee6a),_0x51b684['mapper']['bindElementToMarker'](_0x3cee6a,_0x5bd384['markerName']);}};}class wt extends _0x236ed3{['afterInit'](){const _0x5e8a72=this['editor'];if(!_0x5e8a72['plugins']['has']('RemoveFormatEditing'))return;_0x5e8a72['plugins']['get']('TrackChangesEditing')['enableDefaultAttributesIntegration']('removeFormat'),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x40ca71=this['editor'];_0x40ca71['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x835e6a=>{if('formatBlock'!=_0x835e6a['type']&&'formatInline'!=_0x835e6a['type'])return;const {data:_0x3adc7b}=_0x835e6a;return _0x3adc7b&&'removeFormat'==_0x3adc7b['commandName']?{'type':'format','content':o(_0x40ca71['locale'],'*Remove\x20all\x20formatting*')}:void 0x0;});}}class yt extends _0x236ed3{['afterInit'](){const _0x2961cb=this['editor'];if(!_0x2961cb['plugins']['has']('RestrictedEditingModeEditing'))return;const _0x2126a8=_0x2961cb['plugins']['get']('TrackChangesEditing');_0x2126a8['enableCommand']('goToPreviousRestrictedEditingException'),_0x2126a8['enableCommand']('goToNextRestrictedEditingException');const _0x5f1072=_0x2961cb['plugins']['get']('RestrictedEditingModeEditing');_0x5f1072['enableCommand']('trackChanges'),_0x5f1072['enableCommand']('acceptSuggestion'),_0x5f1072['enableCommand']('discardSuggestion'),_0x5f1072['enableCommand']('acceptAllSuggestions'),_0x5f1072['enableCommand']('discardAllSuggestions'),_0x5f1072['enableCommand']('acceptSelectedSuggestions'),_0x5f1072['enableCommand']('discardSelectedSuggestions');}}class jt extends _0x236ed3{static get['requires'](){return[_0x427652];}['init'](){const _0x2a4daf=this['editor'],_0x134126=_0x2a4daf['plugins']['get']('TrackChangesEditing');_0x134126['enableCommand']('shiftEnter'),_0x2a4daf['editing']['downcastDispatcher']['on']('addMarker:suggestion:insertion',ge(_0x2a4daf),{'priority':'high'}),_0x2a4daf['editing']['downcastDispatcher']['on']('addMarker:suggestion:deletion',ge(_0x2a4daf),{'priority':'high'}),_0x2a4daf['data']['downcastDispatcher']['on']('addMarker:suggestion',(_0x584754,_0x312c86,_0x40820d)=>{_0x40820d['options']['showSuggestionHighlights']&&ge(_0x2a4daf,{'showActiveMarker':!0x1})(_0x584754,_0x312c86,_0x40820d);}),_0x134126['descriptionFactory']['registerElementLabel']('softBreak',_0x5735bb=>o(_0x2a4daf['locale'],'ELEMENT_LINE_BREAK',_0x5735bb));}}function ge(_0x2be791,{showActiveMarker:_0x2266d0=!0x0}={}){return(_0x1de52b,_0x3ba9df,_0x473d75)=>{const _0x86c99=_0x2be791['plugins']['get']('TrackChangesEditing');if(!_0x473d75['consumable']['test'](_0x3ba9df['markerRange'],_0x1de52b['name']))return;const _0x3058a7=_0x2be791['model'];for(const _0x5ba6fc of _0x3ba9df['markerRange']['getItems']()){if(!_0x5ba6fc['is']('element','softBreak'))continue;const _0x41f5bf='deletion'==_0x3ba9df['markerName']['split'](':')[0x1]?'merge':'split',{authorId:_0x3b0336}=_0x86c99['_splitMarkerName'](_0x3ba9df['markerName']),_0x2b3344=_0x473d75['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-'+_0x41f5bf,'data-author-id':_0x3b0336}),_0x36d776=_0x473d75['mapper']['toViewPosition'](_0x3058a7['createPositionBefore'](_0x5ba6fc));_0x2266d0&&_0x86c99['activeMarkers']['includes'](_0x3ba9df['markerName'])&&_0x473d75['writer']['addClass']('ck-suggestion-marker--active',_0x2b3344),_0x473d75['writer']['insert'](_0x36d776,_0x2b3344),_0x473d75['mapper']['bindElementToMarker'](_0x2b3344,_0x3ba9df['markerName']);}};}class St extends _0x236ed3{['afterInit'](){const _0x24e39a=this['editor'],_0x1db25c=_0x24e39a['model'],_0x1f5e35=_0x24e39a['locale'];if(!_0x24e39a['plugins']['has']('StandardEditingModeEditing'))return;const _0x2dc972=_0x24e39a['plugins']['get']('TrackChangesEditing'),_0x1214d3='restrictedEditingException',_0x5d8337=_0x24e39a['commands']['get'](_0x1214d3);_0x2dc972['enableCommand'](_0x1214d3,(_0x3e5022,_0x3d92be={})=>{const _0x1e1c1f=_0x1db25c['document']['selection'];if(_0x1e1c1f['isCollapsed'])return void _0x3e5022(_0x3d92be);const _0x25b030=void 0x0!==_0x3d92be['forceValue']?_0x3d92be['forceValue']:!_0x5d8337['value'];_0x1db25c['change'](()=>{const _0xc8df2f=Array['from'](_0x1e1c1f['getRanges']());for(const _0x1000f9 of _0xc8df2f){const _0x13af64=_0x25b030?[_0x1000f9]:io(_0x1214d3,_0x1000f9,_0x1db25c);for(const _0x5188aa of _0x13af64)_0x2dc972['markInlineFormat'](_0x5188aa,{'commandName':_0x1214d3,'commandParams':[{'forceValue':_0x25b030}]});}});}),_0x2dc972['descriptionFactory']['registerDescriptionCallback'](_0x918308=>{if('formatBlock'!=_0x918308['type']&&'formatInline'!=_0x918308['type'])return;const {data:_0x3a65e1}=_0x918308;return _0x3a65e1&&_0x3a65e1['commandName']==_0x1214d3?_0x3a65e1['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x1f5e35,'FORMAT_RESTRICTED_ENABLED')}:{'type':'format','content':o(_0x1f5e35,'FORMAT_RESTRICTED_DISABLED')}:void 0x0;});}}class At extends _0x236ed3{['afterInit'](){const _0x1b864e=this['editor'];if(!_0x1b864e['plugins']['has']('Style')||!_0x1b864e['plugins']['has']('DataSchema'))return;const _0x4f5e33=_0x1b864e['plugins']['get']('TrackChangesEditing'),_0x392e48=_0x1b864e['locale'],_0x43f0d8=_0x1b864e['config']['get']('style')||{},_0x3709b5=_0x1b864e['plugins']['get']('GeneralHtmlSupport'),_0x30b2da=_0x1b864e['plugins']['get']('StyleUtils')['normalizeConfig'](_0x1b864e['plugins']['get']('DataSchema'),_0x43f0d8['definitions']);_0x4f5e33['enableDefaultAttributesIntegration']('style');const _0x312ebd=new Set();for(const _0x40c820 of _0x30b2da['block']){const _0x4532da=_0x3709b5['getGhsAttributeNameForElement'](_0x40c820['element']);_0x312ebd['add'](_0x4532da);}const _0x2522a5=new Set();for(const _0x22b865 of _0x30b2da['inline']){const _0x4196b0=_0x3709b5['getGhsAttributeNameForElement'](_0x22b865['element']);_0x2522a5['add'](_0x4196b0);for(const _0x27b248 of _0x22b865['ghsAttributes'])_0x2522a5['add'](_0x27b248);}for(const _0x5c26ec of _0x312ebd)_0x4f5e33['registerBlockAttribute'](_0x5c26ec),_0x4f5e33['descriptionFactory']['registerAttributeLabel'](_0x5c26ec,o(_0x392e48,'FORMAT_STYLE'));for(const _0x50c240 of _0x2522a5)_0x4f5e33['registerInlineAttribute'](_0x50c240),_0x4f5e33['descriptionFactory']['registerAttributeLabel'](_0x50c240,o(_0x392e48,'FORMAT_STYLE'));this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x1c1ad3=this['editor'],_0x240933=_0x1c1ad3['locale'];_0x1c1ad3['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x44c701=>{if('formatBlock'!=_0x44c701['type']&&'formatInline'!=_0x44c701['type'])return;const {data:_0x94f46f}=_0x44c701;return _0x94f46f&&'style'===_0x94f46f['commandName']?_0x94f46f['commandParams'][0x0]['forceValue']?{'type':'format','content':o(_0x240933,'*Set\x20format:*\x20%0',_0x94f46f['commandParams'][0x0]['styleName']['toLowerCase']())}:{'type':'format','content':o(_0x240933,'*Remove\x20format:*\x20%0',_0x94f46f['commandParams'][0x0]['styleName']['toLowerCase']())}:void 0x0;});}}class It extends _0x236ed3{['_tablePostFixingSubtypes'];['_tableSuggestions'];constructor(_0x151f88){super(_0x151f88),this['_tablePostFixingSubtypes']=['tableRow','tableColumn'],this['_tableSuggestions']=new Set();}['afterInit'](){const _0x29318a=this['editor'],_0x47584d=_0x29318a['model']['document']['selection'];if(!_0x29318a['plugins']['has']('TableEditing'))return;const _0x32a124=_0x29318a['locale'],_0xcc80d7=_0x29318a['plugins']['get']('TrackChangesEditing'),_0x14d94e=_0x29318a['plugins']['get']('TableUtils');_0xcc80d7['descriptionFactory']['registerElementLabel']('table',_0x2273be=>o(_0x32a124,'ELEMENT_TABLE',_0x2273be)),this['_setupColumnsRowsFixing'](),_0xcc80d7['enableCommand']('insertTable'),_0xcc80d7['enableCommand']('selectTableRow'),_0xcc80d7['enableCommand']('selectTableColumn');for(const _0x25ceab of['insertTableRowAbove','insertTableRowBelow']){const _0x1bbc71=_0x29318a['commands']['get'](_0x25ceab);_0xcc80d7['enableCommand'](_0x25ceab,_0x56c1e8=>{_0x29318a['model']['change'](_0x47d81f=>{_0x56c1e8();const _0x39875d='above'===_0x1bbc71['order'],_0x5e6232=_0x14d94e['getSelectionAffectedTableCells'](_0x47584d),_0x24d39f=_0x14d94e['getRowIndexes'](_0x5e6232),_0x2a0066=_0x39875d?_0x24d39f['first']-0x1:_0x24d39f['last']+0x1,_0x28e72f=_0x5e6232[0x0]['findAncestor']('table'),_0x2df30c=_0x14d94e['createTableWalker'](_0x28e72f,{'startRow':_0x2a0066,'endRow':_0x2a0066}),_0x5e32d4=Array['from'](_0x2df30c)['map'](_0x27ffca=>_0x47d81f['createRangeOn'](_0x27ffca['cell']));_0xcc80d7['markMultiRangeInsertion'](_0x5e32d4,'tableRow');});});}for(const _0x3644cc of['insertTableColumnLeft','insertTableColumnRight']){const _0x5d9c5e=_0x29318a['commands']['get'](_0x3644cc);_0xcc80d7['enableCommand'](_0x3644cc,_0x22c06f=>{_0x29318a['model']['change'](_0x2dc32a=>{_0x22c06f();const _0x4e474f='left'===_0x5d9c5e['order'],_0x3d9414=_0x14d94e['getSelectionAffectedTableCells'](_0x47584d),_0x498d7b=_0x14d94e['getColumnIndexes'](_0x3d9414),_0x7bd25=_0x4e474f?_0x498d7b['first']-0x1:_0x498d7b['last']+0x1,_0x1fcc5f=_0x3d9414[0x0]['findAncestor']('table'),_0x3be2d2=_0x14d94e['createTableWalker'](_0x1fcc5f,{'startRow':0x0,'column':_0x7bd25,'includeAllSlots':!0x1}),_0x1b1332=Array['from'](_0x3be2d2)['map'](_0x5c031c=>_0x2dc32a['createRangeOn'](_0x5c031c['cell']));_0xcc80d7['markMultiRangeInsertion'](_0x1b1332,'tableColumn');});});}for(const _0x437bda of['removeTableRow','removeTableColumn']){const _0x48c06a=_0x437bda['substr'](0xb),_0x58795b=_0x48c06a['toLowerCase'](),_0x49fde2=_0x58795b['substr'](0x0,0x3)+'span',_0x45f80e='table'+_0x48c06a,_0x26a817='min'+_0x48c06a,_0x19c1b5='max'+_0x48c06a;_0xcc80d7['enableCommand'](_0x437bda,()=>{_0x29318a['model']['change'](_0x2f9ec5=>{const _0x3e101c=_0x14d94e['getSelectionAffectedTableCells'](_0x47584d),_0x1d90c4=_0x3e101c[0x0]['findAncestor']('table');let _0x3f0a39;if('removeTableRow'==_0x437bda){const _0x321674=_0x14d94e['getRowIndexes'](_0x3e101c);_0x3f0a39={'startRow':_0x321674['first'],'endRow':_0x321674['last'],'includeAllSlots':!0x0};}else{const _0xa42e67=_0x14d94e['getColumnIndexes'](_0x3e101c);_0x3f0a39={'startColumn':_0xa42e67['first'],'endColumn':_0xa42e67['last'],'includeAllSlots':!0x0};}const _0x1b4103=_0x14d94e['createTableWalker'](_0x1d90c4,_0x3f0a39),_0x26efb1=Array['from'](_0x1b4103)['map'](({cell:_0xfaca08})=>_0xfaca08),_0x10e742=be(_0x26efb1['filter'](_0x1b9138=>_0x1b9138['hasAttribute'](_0x49fde2))),_0xa50992=be(_0x26efb1['filter'](_0x474ff1=>!_0x474ff1['hasAttribute'](_0x49fde2)))['map'](_0x1df85e=>_0x2f9ec5['createRangeOn'](_0x1df85e)),_0x1856f8=_0xcc80d7['markMultiRangeDeletion'](_0xa50992,_0x45f80e);if(_0x1856f8&&('tableRow'==_0x1856f8['subType']||'tableColumn'==_0x1856f8['subType'])){const _0x4cdb01=this['_getSuggestionCoords'](_0x1856f8);for(const _0x4686ee of _0x10e742){const _0x3037c9=_0x2f9ec5['createRangeOn'](_0x4686ee),_0x3d6f66=_0x14d94e['getCellLocation'](_0x4686ee),_0x4cb727=_0x4686ee['getAttribute'](_0x49fde2)-0x1,_0x43a595=_0x4cdb01[_0x26a817],_0x2604c5=_0x4cdb01[_0x19c1b5];_0x43a595<=_0x3d6f66[_0x58795b]&&_0x3d6f66[_0x58795b]+_0x4cb727<=_0x2604c5&&_0x1856f8['addRange'](_0x3037c9);}}});});}function _0x8291e(_0x7837){const _0x3b8c37=Array['from'](_0x47584d['getRanges']())['map'](_0x329fa3=>_0x3a44ac['fromRange'](_0x329fa3));_0x29318a['model']['change'](_0x3ca6fc=>{const _0x2d89c2=_0x3ca6fc['batch'];_0x7837=_0x7837['filter'](_0x194e08=>'$graveyard'!=_0x194e08['root']['rootName']),_0x3ca6fc['setSelection'](_0x7837),_0x29318a['commands']['get']('removeTableRow')['refresh'](),_0x29318a['execute']('removeTableRow',{'forceDefaultExecution':!0x0}),_0x29318a['model']['enqueueChange'](()=>{_0x29318a['model']['enqueueChange'](_0x2d89c2,_0x3d73f3=>{const _0xb475f9=_0x3b8c37['filter'](_0x73f68a=>'$graveyard'!=_0x73f68a['root']['rootName']);_0xb475f9['length']>0x0&&_0x3d73f3['setSelection'](_0xb475f9);for(const _0x466a2e of _0x3b8c37)_0x466a2e['detach']();});});});}function _0xe6ac53(_0x531ab8){_0x29318a['model']['change'](_0x26b1d4=>{const _0x168ba4=Array['from'](_0x47584d['getRanges']())['map'](_0x339ff5=>_0x3a44ac['fromRange'](_0x339ff5)),_0x355511=[];for(const _0xaa3fb of _0x531ab8)for(const _0x1127ea of _0xaa3fb['getItems']({'shallow':!0x0}))_0x355511['push'](_0x1127ea);for(const _0x4c5057 of _0x355511)'$graveyard'!=_0x4c5057['root']['rootName']&&(_0x26b1d4['setSelection'](_0x26b1d4['createPositionAt'](_0x4c5057,0x0)),_0x29318a['commands']['get']('removeTableColumn')['refresh'](),_0x29318a['execute']('removeTableColumn',{'forceDefaultExecution':!0x0}));const _0xd4ce36=_0x168ba4['filter'](_0x5155b3=>'$graveyard'!=_0x5155b3['root']['rootName']);_0xd4ce36['length']>0x0&&_0x26b1d4['setSelection'](_0xd4ce36);for(const _0x467536 of _0x168ba4)_0x467536['detach']();});}function _0x5f579f(_0x5ebad7,_0x50faf4){return _0x50faf4['every'](_0x2d13e5=>_0x5ebad7['some'](_0x63b5b2=>_0x63b5b2['end']['isEqual'](_0x2d13e5['start'])||_0x2d13e5['end']['isEqual'](_0x63b5b2['start'])));}function _0x4ce078(_0x41034e,_0x535edd){return!_0x41034e['some'](_0x5608d5=>_0x535edd['some'](_0x5059b9=>_0x5608d5['isIntersecting'](_0x5059b9)))&&_0x41034e['some'](_0x55fb65=>_0x535edd['some'](_0x50c625=>_0x55fb65['end']['isTouching'](_0x50c625['start'])));}_0x29318a['data']['downcastDispatcher']['on']('addMarker:suggestion',(_0x3d77ad,_0x672671,_0x160576)=>{if(!_0x160576['options']['showSuggestionHighlights'])return;const _0x2b35c1=_0x672671['item'];if(!_0x2b35c1)return;const _0x567fb1=_0x160576['mapper']['toViewElement'](_0x2b35c1);function _0x3b1555(_0x148798){return Array['isArray'](_0x148798)?_0x148798:[_0x148798];}_0x567fb1&&'tableCell'===_0x2b35c1['name']&&_0x3946b1(_0x567fb1,_0x160576['writer'],(_0x4a8493,_0x4ff169,_0x6a1c80)=>_0x6a1c80['addClass'](_0x3b1555(_0x4ff169['classes']),_0x4a8493),(_0x3e916c,_0x4282be,_0x47d1bb)=>_0x47d1bb['removeClass'](_0x3b1555(_0x4282be['classes']),_0x3e916c));},{'priority':'highest'}),_0xcc80d7['descriptionFactory']['registerDescriptionCallback'](_0x17a4d4=>{if('insertion'!=_0x17a4d4['type']&&'deletion'!=_0x17a4d4['type'])return;const _0x55d904=_0x17a4d4['getContainedElement']();if(null!=_0x55d904&&_0x55d904['is']('element','table')){if('insertion'==_0x17a4d4['type']){const _0x4488f3=_0x17a4d4['getItems']()['filter'](_0x3eb5db=>_0x3eb5db['is']('$textProxy'))['map'](_0x427041=>_0x427041['data']);if(_0x4488f3['length'])return{'type':'insertion','content':o(_0x32a124,'*Insert:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_WITH_TEXT','\x22'+_0x4488f3['join']('\x20')+'\x22'))};}if('deletion'==_0x17a4d4['type']){const _0x222a48=_0x17a4d4['getItems']()['filter'](_0x44bfd6=>_0x44bfd6['is']('$textProxy'))['map'](_0x5688ba=>_0x5688ba['data']);if(_0x222a48['length'])return{'type':'deletion','content':o(_0x32a124,'*Remove:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_WITH_TEXT','\x22'+_0x222a48['join']('\x20')+'\x22'))};}}}),_0xcc80d7['descriptionFactory']['registerDescriptionCallback'](_0x2f9576=>{if('tableRow'==_0x2f9576['subType']){const _0x13ba29=_0x2f9576['getItems']()['filter'](_0x1d664e=>_0x1d664e['is']('$textProxy'))['map'](_0x5541f9=>_0x5541f9['data']),_0xc63e20=this['_getSuggestionCoords'](_0x2f9576),_0x3d6d9a=_0xc63e20['maxRow']-_0xc63e20['minRow']+0x1;if('insertion'==_0x2f9576['type'])return _0x13ba29['length']?{'type':'insertion','content':o(_0x32a124,'*Insert:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_ROW_WITH_TEXT',[_0x3d6d9a,'\x22'+_0x13ba29['join']('\x20')+'\x22']))}:{'type':'insertion','content':o(_0x32a124,'*Insert:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_ROW',_0x3d6d9a))};if('deletion'==_0x2f9576['type'])return _0x13ba29['length']?{'type':'deletion','content':o(_0x32a124,'*Remove:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_ROW_WITH_TEXT',[_0x3d6d9a,'\x22'+_0x13ba29['join']('\x20')+'\x22']))}:{'type':'deletion','content':o(_0x32a124,'*Remove:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_ROW',_0x3d6d9a))};}if('tableColumn'==_0x2f9576['subType']){const _0x1a80c0=_0x2f9576['getItems']()['filter'](_0xf4cd80=>_0xf4cd80['is']('$textProxy'))['map'](_0x3a73b4=>_0x3a73b4['data']),_0x1253e3=this['_getSuggestionCoords'](_0x2f9576),_0x37a1f9=_0x1253e3['maxColumn']-_0x1253e3['minColumn']+0x1;if('insertion'==_0x2f9576['type'])return _0x1a80c0['length']?{'type':'insertion','content':o(_0x32a124,'*Insert:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_COLUMN_WITH_TEXT',[_0x37a1f9,'\x22'+_0x1a80c0['join']('\x20')+'\x22']))}:{'type':'insertion','content':o(_0x32a124,'*Insert:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_COLUMN',_0x37a1f9))};if('deletion'==_0x2f9576['type'])return _0x1a80c0['length']?{'type':'deletion','content':o(_0x32a124,'*Remove:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_COLUMN_WITH_TEXT',[_0x37a1f9,'\x22'+_0x1a80c0['join']('\x20')+'\x22']))}:{'type':'deletion','content':o(_0x32a124,'*Remove:*\x20%0',o(_0x32a124,'ELEMENT_TABLE_COLUMN',_0x37a1f9))};}}),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','discard',_0x8291e),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','accept',_0x8291e),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','discard',_0xe6ac53),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','accept',_0xe6ac53),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('insertion','tableColumn','join',_0x5f579f),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('deletion','tableColumn','join',_0x5f579f),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('insertion','tableRow','join',_0x4ce078),_0xcc80d7['_suggestionFactory']['registerCustomCallback']('deletion','tableRow','join',_0x4ce078);}['_acceptFormatSuggestionCallbackFactory'](){const _0x24e627=this['editor'],_0x18148c=_0x24e627['model']['document']['selection'];return(_0x1a2769,_0x2ac163)=>{_0x24e627['model']['change'](_0x1a7124=>{const {commandName:_0x1393c5,commandParams:_0x45ec0e}=_0x2ac163;let _0x100917=_0x1a2769[0x0]['end']['nodeBefore'];_0x45ec0e&&_0x45ec0e[0x0]&&!0x1===_0x45ec0e[0x0]['forceValue']&&(_0x100917=_0x1a2769[0x0]['start']['nodeAfter']);const _0x411c51=_0x1a7124['createRangeIn'](_0x100917);if('$graveyard'==_0x411c51['root']['rootName'])return;const _0x3eebed=Array['from'](_0x18148c['getRanges']())['map'](_0x19f6cf=>_0x3a44ac['fromRange'](_0x19f6cf));_0x1a7124['setSelection'](_0x411c51),_0x24e627['commands']['get'](_0x1393c5)['refresh'](),_0x45ec0e['push']({'forceDefaultExecution':!0x0}),_0x24e627['execute'](_0x1393c5,..._0x45ec0e);const _0x43d2c5=_0x3eebed['filter'](_0x1d5d5d=>'$graveyard'!=_0x1d5d5d['root']['rootName']);_0x43d2c5['length']>0x0&&_0x1a7124['setSelection'](_0x43d2c5);for(const _0x322eec of _0x3eebed)_0x322eec['detach']();});};}['_getCoordsForCells'](_0x42f812){const _0x4e1a10=this['editor']['plugins']['get']('TableUtils');let _0x5977b3=Number['MAX_SAFE_INTEGER'],_0x1c6ce0=Number['MIN_SAFE_INTEGER'],_0x2b3c7c=Number['MAX_SAFE_INTEGER'],_0x404c53=Number['MIN_SAFE_INTEGER'];for(const _0x4c1e8f of _0x42f812){if('$graveyard'==_0x4c1e8f['root']['rootName'])continue;const {row:_0x33842c,column:_0x107c03}=_0x4e1a10['getCellLocation'](_0x4c1e8f),_0x4aa27b=_0x4c1e8f['hasAttribute']('rowspan')?_0x4c1e8f['getAttribute']('rowspan')-0x1:0x0,_0x13311d=_0x4c1e8f['hasAttribute']('colspan')?_0x4c1e8f['getAttribute']('colspan')-0x1:0x0;_0x5977b3=_0x33842c<_0x5977b3?_0x33842c:_0x5977b3,_0x1c6ce0=_0x33842c+_0x4aa27b>_0x1c6ce0?_0x33842c+_0x4aa27b:_0x1c6ce0,_0x2b3c7c=_0x107c03<_0x2b3c7c?_0x107c03:_0x2b3c7c,_0x404c53=_0x107c03+_0x13311d>_0x404c53?_0x107c03+_0x13311d:_0x404c53;}return{'minRow':_0x5977b3,'maxRow':_0x1c6ce0,'minColumn':_0x2b3c7c,'maxColumn':_0x404c53};}['_setupColumnsRowsFixing'](){const _0x1a5785=this['editor'],_0x382a47=_0x1a5785['plugins']['get']('TrackChangesEditing'),_0x3315b3=_0x1a5785['plugins']['get']('TableUtils');_0x1a5785['model']['document']['on']('change:data',()=>{const _0x290ab6=Array['from'](_0x1a5785['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x19246e,data:_0x4cd33d}of _0x290ab6){const {group:_0x36a3b7,id:_0x1c403a,subType:_0x5d5bcc}=_0x382a47['_splitMarkerName'](_0x19246e);if('suggestion'!=_0x36a3b7)continue;if(null!=_0x4cd33d['oldRange'])continue;const _0x1fc9d2=_0x382a47['getSuggestion'](_0x1c403a);this['_tablePostFixingSubtypes']['includes'](_0x5d5bcc)&&this['_tableSuggestions']['add'](_0x1fc9d2);}},{'priority':'low'});const _0x15e28f=(_0x460792,_0x188363)=>{let _0x2466fa=!0x1;const _0x213338=_0x188363['createRangeOn'](_0x460792),_0xb5f73c=_0x460792['findAncestor']('table'),_0x125573=_0x3315b3['getCellLocation'](_0x460792);for(const _0x226e5a of this['_tableSuggestions']){const _0x4cc894=_0x226e5a['subType'],_0x3fa276=_0x4cc894['startsWith']('tablePaste'),_0x1104bb=_0x4cc894['substr'](_0x3fa276?0xa:0x5),_0x13df0e=_0x1104bb['toLowerCase'](),_0x41660a=_0x13df0e['substr'](0x0,0x3)+'span',_0x465529='min'+_0x1104bb,_0x306717='max'+_0x1104bb;if(!_0x226e5a['isInContent'])continue;if(_0xb5f73c!=_0x226e5a['getFirstRange']()['start']['findAncestor']('table'))continue;if(_0x226e5a['isIntersectingWithRange'](_0x213338))continue;const _0x3b642d=_0x460792['hasAttribute'](_0x41660a)?_0x460792['getAttribute'](_0x41660a)-0x1:0x0,_0x4a2b27=this['_getSuggestionCoords'](_0x226e5a),_0x5d5d62=_0x4a2b27[_0x465529],_0x67096f=_0x4a2b27[_0x306717];_0x5d5d62<=_0x125573[_0x13df0e]&&_0x125573[_0x13df0e]+_0x3b642d<=_0x67096f&&(_0x226e5a['addRange'](_0x213338),_0x2466fa=!0x0);}return _0x2466fa;};_0x1a5785['model']['document']['registerPostFixer'](_0x383edf=>{let _0x175448=!0x1;for(const _0x45c05b of _0x1a5785['model']['document']['differ']['getChanges']())if('insert'==_0x45c05b['type']){if('tableRow'==_0x45c05b['name']){for(const _0x4bdebb of _0x45c05b['position']['nodeAfter']['getChildren']())_0x175448=_0x175448||_0x15e28f(_0x4bdebb,_0x383edf);}else'tableCell'==_0x45c05b['name']&&(_0x175448=_0x175448||_0x15e28f(_0x45c05b['position']['nodeAfter'],_0x383edf));}return _0x175448;});}['_getSuggestionCoords'](_0x11d799){return this['_getCoordsForCells'](_0x11d799['getRanges']()['map'](_0x532a35=>_0x532a35['start']['nodeAfter']));}}function be(_0x1c861c){return Array['from'](new Set(_0x1c861c)['values']());}class vt extends _0x236ed3{static get['requires'](){return[It];}['afterInit'](){const _0x5b597f=this['editor'],_0x148242=_0x5b597f['model']['document']['selection'],_0x2764e5=_0x5b597f['locale'];if(!_0x5b597f['plugins']['has']('TableEditing'))return;const _0x452d2d=_0x5b597f['plugins']['get']('TrackChangesEditing'),_0xb12651=_0x5b597f['plugins']['get']('TableUtils'),_0x32deee=_0x5b597f['plugins']['get'](It);_0x32deee['_tablePostFixingSubtypes']['push']('mergeTableCells'),_0x452d2d['enableCommand']('mergeTableCells',()=>{const _0x586246=_0xb12651['getSelectionAffectedTableCells'](_0x5b597f['model']['document']['selection']);_0x5b597f['model']['change'](()=>{_0x452d2d['markMultiRangeBlockFormat'](_0x586246,{'commandName':'mergeTableCells','commandParams':[]},[],'mergeTableCells');});}),_0x5b597f['commands']['get']('mergeTableCells')['on']('execute',(_0x569eca,_0x4ba4f5)=>{_0x5b597f['commands']['get']('trackChanges')['value']&&(_0x4ba4f5['length']>0x0&&_0x4ba4f5[_0x4ba4f5['length']-0x1]&&_0x4ba4f5[_0x4ba4f5['length']-0x1]['forceDefaultExecution']||_0x452d2d['_isForcedDefaultExecutionBlock']||this['_areSelectedCellsMergable']()||_0x569eca['stop']());},{'priority':'highest'});for(const _0x55f5e of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft']){const _0xebb4c3=_0x5b597f['commands']['get'](_0x55f5e);_0x452d2d['enableCommand'](_0x55f5e,()=>{const _0x3a7fca=_0x5b597f['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x2bc8a9=>_0x2bc8a9['is']('element','tableCell')),_0x58792e=_0xebb4c3['value'];_0x5b597f['model']['change'](()=>{_0x452d2d['markMultiRangeBlockFormat']([_0x3a7fca,_0x58792e],{'commandName':'mergeTableCells','commandParams':[]},[],'mergeTableCells');});});}for(const _0x47907f of['splitTableCellVertically','splitTableCellHorizontally']){const _0x43d211=_0x5b597f['commands']['get'](_0x47907f);_0x452d2d['enableCommand'](_0x47907f,()=>{const _0x491744=_0xb12651['getSelectionAffectedTableCells'](_0x5b597f['model']['document']['selection'])[0x0],_0xaaf86c=_0x491744['findAncestor']('table'),{column:_0x39a24e,row:_0x2e91a5}=_0xb12651['getCellLocation'](_0x491744);let _0x576e32=[];if('horizontally'==_0x43d211['direction']){const _0x4412bb=_0xb12651['createTableWalker'](_0xaaf86c,{'startRow':_0x2e91a5,'endRow':_0x2e91a5,'includeAllSlots':!0x0});_0x576e32=Array['from'](_0x4412bb)['map'](_0xd86ec9=>_0xd86ec9['cell']);}else{const _0x1141eb=_0xb12651['createTableWalker'](_0xaaf86c,{'column':_0x39a24e,'includeAllSlots':!0x0});_0x576e32=Array['from'](_0x1141eb)['map'](_0x450bbd=>_0x450bbd['cell']);}_0x5b597f['model']['change'](_0x54ac73=>{_0x452d2d['markBlockFormat'](_0x54ac73['createRangeOn'](_0x491744),{'commandName':_0x47907f,'commandParams':[]},_0x576e32,_0x47907f);});});}_0x452d2d['descriptionFactory']['registerDescriptionCallback'](_0x4f4584=>{if('formatBlock'!=_0x4f4584['type']&&'formatInline'!=_0x4f4584['type'])return;const {data:_0x5ea8c0}=_0x4f4584;return _0x5ea8c0&&'mergeTableCells'==_0x5ea8c0['commandName']?{'type':'format','content':o(_0x2764e5,'*Merge\x20cells*')}:void 0x0;}),_0x452d2d['descriptionFactory']['registerDescriptionCallback'](_0x438719=>{if('formatBlock'!=_0x438719['type']&&'formatInline'!=_0x438719['type'])return;const {data:_0x4bc188}=_0x438719;return _0x4bc188?'splitTableCellVertically'==_0x4bc188['commandName']?{'type':'format','content':o(_0x2764e5,'*Split\x20cell:*\x20vertically')}:'splitTableCellHorizontally'==_0x4bc188['commandName']?{'type':'format','content':o(_0x2764e5,'*Split\x20cell:*\x20horizontally')}:void 0x0:void 0x0;});const _0x5a0013=_0x32deee['_acceptFormatSuggestionCallbackFactory']();for(const _0x5eb209 of['mergeTableCellUp','mergeTableCellRight','mergeTableCellDown','mergeTableCellLeft'])_0x452d2d['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x5eb209,'accept',_0x5a0013);for(const _0x4b8b8e of['splitTableCellVertically','splitTableCellHorizontally'])_0x452d2d['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x4b8b8e,'accept',_0x5a0013);_0x452d2d['_suggestionFactory']['registerCustomCallback']('formatBlock','mergeTableCells','accept',_0x1b6cc0=>{_0x5b597f['model']['change'](_0x14650a=>{const _0x4ad154=Array['from'](_0x148242['getRanges']())['map'](_0x417b6f=>_0x3a44ac['fromRange'](_0x417b6f));_0x14650a['setSelection'](_0x1b6cc0),_0x5b597f['commands']['get']('mergeTableCells')['refresh'](),_0x5b597f['execute']('mergeTableCells',{'forceDefaultExecution':!0x0});const _0x57886f=_0x4ad154['filter'](_0xcf2deb=>'$graveyard'!=_0xcf2deb['root']['rootName']);_0x57886f['length']>0x0&&_0x14650a['setSelection'](_0x57886f);for(const _0x18a45c of _0x4ad154)_0x18a45c['detach']();});});for(const _0x18502d of['mergeTableCellUp','mergeTableCellDown','mergeTableCellLeft','mergeTableCellRight']){const _0x12e05a=_0x5b597f['commands']['get'](_0x18502d);_0x12e05a['on']('set:isEnabled',(_0x3a94f4,_0x277398,_0x3f1ad1)=>{if(_0x3f1ad1){const _0x35d8ee=_0x5b597f['model']['document']['selection']['getFirstPosition']()['getAncestors']()['find'](_0x37aa61=>_0x37aa61['is']('element','tableCell'));this['_areMergableCells'](_0x12e05a['value'],_0x35d8ee)||(_0x3a94f4['return']=!0x1,_0x3a94f4['stop']());}},{'priority':'low'});}}['_areSelectedCellsMergable'](){const _0x2c3a64=this['editor']['commands']['get']('mergeTableCells'),_0x966de9=this['editor']['plugins']['get']('TableUtils');if(!_0x2c3a64['isEnabled'])return!0x1;const _0x502d4d=_0x966de9['getSelectionAffectedTableCells'](this['editor']['model']['document']['selection']);for(const _0xe9570b of _0x502d4d)for(const _0x1447b4 of _0x502d4d)if(_0xe9570b!=_0x1447b4&&!this['_areMergableCells'](_0xe9570b,_0x1447b4))return!0x1;return!0x0;}['_areMergableCells'](_0x3c1365,_0x3a2ada){const _0x3c567e=this['editor']['plugins']['get']('TrackChangesEditing'),_0x3dc0f1=this['editor']['model']['createRangeOn'](_0x3c1365),_0x54668f=this['editor']['model']['createRangeOn'](_0x3a2ada),_0x56c432=new Set(),_0x459edf=new Set();for(const _0x3232e3 of _0x3c567e['getSuggestions']())if(('insertion'==_0x3232e3['type']||'deletion'==_0x3232e3['type']||'mergeTableCells'==_0x3232e3['subType'])&&_0x3232e3['isInContent']){for(const _0x40261c of _0x3232e3['getRanges']())_0x40261c['containsRange'](_0x3dc0f1,!0x0)&&_0x56c432['add'](_0x3232e3['type']+':'+_0x3232e3['author']['id']),_0x40261c['containsRange'](_0x54668f,!0x0)&&_0x459edf['add'](_0x3232e3['type']+':'+_0x3232e3['author']['id']);}if(_0x56c432['size']!=_0x459edf['size'])return!0x1;for(const _0x3d2113 of _0x56c432)if(!_0x459edf['has'](_0x3d2113))return!0x1;return!0x0;}}class Ct extends _0x236ed3{static get['requires'](){return[It];}['afterInit'](){const _0x3a8738=this['editor'];if(!_0x3a8738['plugins']['has']('TableEditing'))return;const _0x50eee3=_0x3a8738['locale'],_0x5a90a2=_0x3a8738['plugins']['get']('TrackChangesEditing');_0x5a90a2['enableDefaultAttributesIntegration']('setTableRowHeader'),_0x5a90a2['enableDefaultAttributesIntegration']('setTableColumnHeader'),_0x5a90a2['registerBlockAttribute']('headingRows'),_0x5a90a2['registerBlockAttribute']('headingColumns'),_0x5a90a2['descriptionFactory']['registerAttributeLabel']('headingRows',o(_0x50eee3,'FORMAT_HEADER_ROW')),_0x5a90a2['descriptionFactory']['registerAttributeLabel']('headingColumns',o(_0x50eee3,'FORMAT_HEADER_COLUMN')),this['_handleLegacySuggestions']();}['_handleLegacySuggestions'](){const _0x4fb885=this['editor']['plugins']['get']('TrackChangesEditing'),_0x577e66=this['editor']['plugins']['get']('TableUtils'),_0x2ebdf4=this['editor']['plugins']['get'](It)['_acceptFormatSuggestionCallbackFactory']();function _0x145718({showActiveMarker:_0x36dad9=!0x0,setDataAttribute:_0x184f0b=!0x0}={}){return(_0x1e440d,_0x2c9ce2,_0x3d4ab8)=>{const {type:_0x2c8fca,id:_0x2f5e29}=_0x4fb885['_splitMarkerName'](_0x2c9ce2['markerName']),_0xf503c6=_0x4fb885['getSuggestion'](_0x2f5e29),_0x8c0f9e=_0xf503c6['data'];if('formatBlock'!=_0xf503c6['type']||!_0x8c0f9e||'setTableColumnHeader'!=_0x8c0f9e['commandName'])return;if(_0x2c9ce2['item'])return void _0x1e440d['stop']();if(!_0x3d4ab8['consumable']['consume'](_0x2c9ce2['markerRange'],_0x1e440d['name']))return;const _0x45bbed=_0x2c9ce2['markerRange']['start']['nodeAfter'],_0x50c4d8=_0x2c9ce2['markerRange']['end']['nodeBefore'],_0x1ec1ec=_0x45bbed['parent']['parent'],{column:_0x685506}=_0x577e66['getCellLocation'](_0x45bbed),{column:_0x18985f}=_0x577e66['getCellLocation'](_0x50c4d8);for(let _0x258f06=_0x685506;_0x258f06<=_0x18985f;_0x258f06++){const _0xb526bf=_0x577e66['createTableWalker'](_0x1ec1ec,{'column':_0x258f06,'includeAllSlots':!0x1});for(const _0x2139e7 of _0xb526bf){const _0xa1ac44=_0x2139e7['cell'],_0x1aa3d2=_0x3d4ab8['mapper']['toViewElement'](_0xa1ac44);_0x3d4ab8['writer']['addClass']('ck-suggestion-marker-'+_0x2c8fca,_0x1aa3d2),_0x184f0b&&_0x3d4ab8['writer']['setAttribute']('data-suggestion',_0x2f5e29,_0x1aa3d2),_0x3d4ab8['mapper']['bindElementToMarker'](_0x1aa3d2,_0x2c9ce2['markerName']),_0x36dad9&&(_0x4fb885['activeMarkers']['includes'](_0x2c9ce2['markerName'])?_0x3d4ab8['writer']['addClass']('ck-suggestion-marker--active',_0x1aa3d2):_0x3d4ab8['writer']['removeClass']('ck-suggestion-marker--active',_0x1aa3d2));}}};}_0x4fb885['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableRowHeader','accept',_0x2ebdf4),_0x4fb885['_suggestionFactory']['registerCustomCallback']('formatBlock','setTableColumnHeader','accept',_0x2ebdf4),this['editor']['editing']['downcastDispatcher']['on']('addMarker:suggestion',_0x145718(),{'priority':'highest'}),this['editor']['data']['downcastDispatcher']['on']('addMarker:suggestion',(_0x4c8c96,_0x5b2a13,_0x241222)=>{_0x241222['options']['showSuggestionHighlights']&&_0x145718({'showActiveMarker':!0x1,'setDataAttribute':!0x1})(_0x4c8c96,_0x5b2a13,_0x241222);},{'priority':'highest'}),this['editor']['editing']['downcastDispatcher']['on']('removeMarker:suggestion',(_0x422844,_0x106fa1,_0x31c651)=>{const {type:_0xd272ba,id:_0x2d3d18}=_0x4fb885['_splitMarkerName'](_0x106fa1['markerName']),_0x344f2c=_0x4fb885['getSuggestion'](_0x2d3d18),_0x2427b4=_0x344f2c['data'];if('formatBlock'!=_0x344f2c['type']||!_0x2427b4||'setTableColumnHeader'!=_0x2427b4['commandName'])return;const _0x561b1f=_0x31c651['mapper']['markerNameToElements'](_0x106fa1['markerName']);if(_0x561b1f){for(const _0x15b231 of _0x561b1f)_0x31c651['writer']['removeClass']('ck-suggestion-marker-'+_0xd272ba,_0x15b231),_0x31c651['writer']['removeClass']('ck-suggestion-marker--active',_0x15b231),_0x31c651['writer']['removeAttribute']('data-suggestion',_0x15b231),_0x31c651['mapper']['unbindElementFromMarkerName'](_0x15b231,_0x106fa1['markerName']);}},{'priority':'highest'}),this['_registerLegacyDescription']();}['_registerLegacyDescription'](){const _0x770c75=this['editor'],_0x581054=_0x770c75['locale'];function _0x3c8476(_0x5ac14c){return{'type':'format','content':o(_0x581054,'*Format:*\x20%0',_0x5ac14c)};}_0x770c75['plugins']['get']('TrackChangesEditing')['descriptionFactory']['registerDescriptionCallback'](_0x41905d=>{if('formatBlock'!=_0x41905d['type'])return;const {data:_0x2c9ce3}=_0x41905d;if(_0x2c9ce3){if('setTableRowHeader'==_0x2c9ce3['commandName']){const _0x2231bb=_0x2c9ce3['commandParams'][0x0]['forceValue'];return _0x3c8476(o(_0x581054,_0x2231bb?'FORMAT_HEADER_ROW':'FORMAT_REGULAR_ROW'));}if('setTableColumnHeader'==_0x2c9ce3['commandName']){const _0x25252a=_0x2c9ce3['commandParams'][0x0]['forceValue'];return _0x3c8476(o(_0x581054,_0x25252a?'FORMAT_HEADER_COLUMN':'FORMAT_REGULAR_COLUMN'));}}});}}const Pe=['tableCellBorderWidth','tableCellBorderColor','tableCellBorderStyle','tableCellHorizontalAlignment','tableCellVerticalAlignment','tableCellBackgroundColor','tableCellPadding'],we=Object['fromEntries'](Pe['map'](_0x47ce0b=>[_0x47ce0b,null]));class _t extends _0x236ed3{static get['requires'](){return[It];}['afterInit'](){const _0x434ec0=this['editor'];if(!_0x434ec0['plugins']['has']('TableClipboard'))return;const _0x26d2c4=_0x434ec0['plugins']['get']('TrackChangesEditing'),_0x289e42=_0x434ec0['plugins']['get']('TableUtils'),_0x37ac91=_0x434ec0['plugins']['get'](It),_0x2fcebd=_0x434ec0['plugins']['get']('TableClipboard');_0x37ac91['_tablePostFixingSubtypes']['push']('tablePasteRow','tablePasteColumn'),_0x434ec0['model']['schema']['register']('tableCellSuggestion',{'allowIn':'tableCell','allowContentOf':'tableCell','isLimit':!0x0}),_0x434ec0['conversion']['elementToElement']({'model':'tableCellSuggestion','view':'suggestion-td'});let _0x4be675=null;_0x434ec0['model']['on']('insertContent',(_0x34f123,_0x32964d)=>{const [_0x55777e,_0xdc2873]=_0x32964d,_0x2bbac5=_0x32964d[_0x32964d['length']-0x1];_0x2bbac5&&_0x2bbac5['forceDefaultExecution']||_0x26d2c4['_isForcedDefaultExecutionBlock']||this['editor']['commands']['get']('trackChanges')['value']&&function(_0x11e186,_0x1d6924,_0x3bd2ca,_0x14039e,_0x37b1b9){if(_0x1d6924&&!_0x1d6924['is']('documentSelection'))return!0x1;const _0x1adce4=_0x37b1b9['getTableIfOnlyTableInContent'](_0x11e186,_0x3bd2ca);if(!_0x1adce4||!Re(_0x1adce4,void 0x0,_0x14039e))return!0x1;const _0x9ccc07=_0x14039e['getSelectionAffectedTableCells'](_0x3bd2ca['document']['selection']);if(!_0x9ccc07['length'])return!0x1;const _0x22dd89=_0x9ccc07[0x0]['findAncestor']('table'),_0x3b2b09=_0x14039e['getRowIndexes'](_0x9ccc07),_0x20946a=_0x14039e['getColumnIndexes'](_0x9ccc07),_0x13c9ff={'startRow':_0x3b2b09['first'],'endRow':_0x3b2b09['last'],'startColumn':_0x20946a['first'],'endColumn':_0x20946a['last']};return 0x1==_0x9ccc07['length']&&(_0x13c9ff['endRow']+=_0x14039e['getRows'](_0x1adce4)-0x1,_0x13c9ff['endColumn']+=_0x14039e['getColumns'](_0x1adce4)-0x1),Re(_0x22dd89,_0x13c9ff,_0x14039e);}(_0x55777e,_0xdc2873,_0x434ec0['model'],_0x289e42,_0x2fcebd)&&(_0x34f123['stop'](),_0x4be675={'cells':[],'insertionRanges':[],'deletionRanges':[],'rowInsertionRanges':[],'rowInsertionIndexes':[],'columnInsertionRanges':[],'columnInsertionIndexes':[]},_0x434ec0['model']['change'](()=>{_0x434ec0['model']['insertContent'](_0x32964d[0x0],_0x32964d[0x1],_0x32964d[0x2],{'forceDefaultExecution':!0x0});const _0x44a2fb=_0x2ea0eb(),{rowInsertionRanges:_0x5b46e8,columnInsertionRanges:_0x2a5c1a,insertionRanges:_0x575d84,deletionRanges:_0x397297,cells:_0x195561}=_0x4be675;_0x5b46e8['length']&&_0x26d2c4['markMultiRangeInsertion'](_0x5b46e8,'tablePasteRow',{'tablePasteChainId':_0x44a2fb}),_0x2a5c1a['length']&&_0x26d2c4['markMultiRangeInsertion'](_0x2a5c1a,'tablePasteColumn',{'tablePasteChainId':_0x44a2fb}),_0x575d84['length']&&(_0x26d2c4['markMultiRangeInsertion'](_0x575d84,'tablePaste',{'tablePasteChainId':_0x44a2fb,'skipNestingCheck':!0x0}),_0x575d84['forEach'](_0x32de9f=>_0x32de9f['detach']?.())),_0x397297['length']&&(_0x26d2c4['markMultiRangeDeletion'](_0x397297,'tablePaste',{'tablePasteChainId':_0x44a2fb,'skipNestingCheck':!0x0}),_0x397297['forEach'](_0x4235a4=>_0x4235a4['detach']?.()));const _0x557949=_0x26d2c4['markMultiRangeBlockFormat'](_0x195561['map'](({element:_0x2e1909})=>_0x2e1909),{'formatGroupId':_0x2ea0eb()},[],'tablePasteCell',{'tablePasteChainId':_0x44a2fb});if(_0x557949){const _0x2016b0=_0x557949['getMarkers'](),_0x4dc016=[];for(const {element:_0x3b61de,attributes:_0x48fb32}of _0x195561){if(!_0x48fb32)continue;const _0x1da80e=_0x434ec0['model']['createRangeOn'](_0x3b61de),_0x104513=_0x2016b0['find'](_0x3e8267=>_0x3e8267['getRange']()['isEqual'](_0x1da80e));_0x104513&&_0x4dc016['push']([_0x104513['name'],_0x48fb32]);}_0x4dc016['length']&&_0x557949['setAttribute']('markerAttributes',Object['fromEntries'](_0x4dc016));}_0x4be675=null;}));},{'priority':_0x131ea4['high']+0xa}),_0x434ec0['plugins']['get']('TableClipboard')['on']('_replaceTableSlotCell',(_0x34f14f,_0x1363e1)=>{const [_0x779dcd,_0x3cb1a7,,_0x5a5809]=_0x1363e1;if(!_0x4be675)return;_0x34f14f['stop']();const _0x5c27e6=_0x779dcd['cell'],_0x2dbbad=_0x3cb1a7,_0x22a4d7=ke(_0x5c27e6),_0x579caf=ke(_0x2dbbad);_0x34f14f['return']=_0x5c27e6;let _0x5292dd=null,_0x49a4ff=null;if(_0x579caf||_0x22a4d7){if(_0x22a4d7&&!_0x579caf){_0x5a5809['remove'](_0x5c27e6['getChild'](0x0));for(const _0x4aa0e6 of Array['from'](_0x2dbbad['getChildren']()))_0x5a5809['insert'](_0x4aa0e6,_0x5c27e6,'end');const _0x2c9273=_0x4be675['rowInsertionIndexes']['includes'](_0x779dcd['row']),_0x3ef670=_0x4be675['columnInsertionIndexes']['includes'](_0x779dcd['column']);_0x2c9273||_0x3ef670||(_0x5292dd=_0x3a44ac['fromRange'](_0x5a5809['createRangeIn'](_0x5c27e6)));}else _0x579caf&&!_0x22a4d7&&(_0x49a4ff=_0x5a5809['createRangeIn'](_0x5c27e6));}else{const _0x349682=_0x5a5809['createElement']('tableCellSuggestion'),_0x42d211=_0x5a5809['createElement']('tableCellSuggestion');_0x5a5809['wrap'](_0x5a5809['createRangeIn'](_0x5c27e6),_0x42d211),_0x5a5809['insert'](_0x349682,_0x5c27e6,0x0);for(const _0x286726 of Array['from'](_0x2dbbad['getChildren']()))_0x5a5809['insert'](_0x286726,_0x349682,'end');_0x5292dd=_0x3a44ac['fromRange'](_0x5a5809['createRangeOn'](_0x349682)),_0x49a4ff=_0x3a44ac['fromRange'](_0x5a5809['createRangeOn'](_0x42d211));}const _0xb6694f=Array['from'](_0x2dbbad['getAttributes']())['filter'](([_0x58272c])=>Pe['includes'](_0x58272c));_0x4be675['cells']['push']({'element':_0x5c27e6,'attributes':_0xb6694f['length']?Object['fromEntries'](_0xb6694f):null}),_0x5292dd&&_0x4be675['insertionRanges']['push'](_0x5292dd),_0x49a4ff&&_0x4be675['deletionRanges']['push'](_0x49a4ff);},{'priority':'high'}),_0x289e42['on']('insertColumns',(_0x2c0483,_0x58f37a)=>{const [_0x519bf3,_0x4d8a2d={}]=_0x58f37a;if(!_0x4be675)return;const _0x1bee35=_0x4d8a2d['at']||0x0,_0x168063=_0x4d8a2d['columns']||0x1;_0x4be675['columnInsertionIndexes']=new Array(_0x168063)['fill'](_0x1bee35)['map']((_0x223ebd,_0x1e9a8a)=>_0x223ebd+_0x1e9a8a);for(const {cell:_0x269d1a}of _0x289e42['createTableWalker'](_0x519bf3,{'startColumn':_0x1bee35,'endColumn':_0x1bee35+_0x168063-0x1}))_0x4be675['columnInsertionRanges']['push'](_0x434ec0['model']['createRangeOn'](_0x269d1a));},{'priority':'low'}),_0x289e42['on']('insertRows',(_0x531935,_0x1c3eaa)=>{const [_0x49744d,_0x42d737={}]=_0x1c3eaa;if(!_0x4be675)return;const _0x10f2de=_0x42d737['at']||0x0,_0x2e228f=_0x42d737['rows']||0x1;_0x4be675['rowInsertionIndexes']=new Array(_0x2e228f)['fill'](_0x10f2de)['map']((_0x1407c7,_0x421d5b)=>_0x1407c7+_0x421d5b);for(const {cell:_0x52b892}of _0x289e42['createTableWalker'](_0x49744d,{'startRow':_0x10f2de,'endRow':_0x10f2de+_0x2e228f-0x1}))_0x4be675['rowInsertionRanges']['push'](_0x434ec0['model']['createRangeOn'](_0x52b892));},{'priority':'low'}),_0x26d2c4['descriptionFactory']['registerDescriptionCallback'](_0x12d877=>{if(_0x12d877['subType']&&_0x12d877['subType']['startsWith']('tablePaste'))return _0x12d877['previous']?{}:{'type':'insertion','content':o(_0x434ec0['locale'],'*Replace\x20table\x20cells*')};});const _0x3d42cc=()=>!0x1;for(const _0x2de6a7 of['tablePaste','tablePasteColumn','tablePasteRow','tablePasteCell'])_0x26d2c4['_suggestionFactory']['registerCustomCallback']('insertion',_0x2de6a7,'join',_0x3d42cc),_0x26d2c4['_suggestionFactory']['registerCustomCallback']('deletion',_0x2de6a7,'join',_0x3d42cc),_0x26d2c4['_suggestionFactory']['registerCustomCallback']('formatBlock',_0x2de6a7,'join',_0x3d42cc);_0x26d2c4['_suggestionFactory']['registerCustomCallback']('formatBlock','tablePasteCell','discard',_0x3d42cc),_0x26d2c4['_suggestionFactory']['registerCustomCallback']('formatBlock','tablePasteCell','accept',(_0x47be5e,_0x37481f,_0x5c4be4)=>{const _0x3bd191=_0x47be5e['map'](_0x418832=>_0x418832['getContainedElement']())['filter'](_0x19d1ba=>_0x19d1ba),_0xb83046=new Map(_0x3bd191['map'](_0x4209d9=>[_0x4209d9,null]));if(_0x4be675){for(const {element:_0x1222a3,attributes:_0x273fdf}of _0x4be675['cells'])_0x273fdf&&_0xb83046['set'](_0x1222a3,_0x273fdf);}else{if(_0x5c4be4&&_0x5c4be4['markerAttributes'])for(const [_0x56e7a9,_0x554ff3]of Object['entries'](_0x5c4be4['markerAttributes'])){const _0x28494b=_0x434ec0['model']['markers']['get'](_0x56e7a9),_0x3ab362=_0x28494b?_0x28494b['getRange']()['getContainedElement']():null;_0x3ab362&&_0xb83046['set'](_0x3ab362,_0x554ff3);}}_0x434ec0['model']['change'](_0x522248=>{for(const [_0x29dd87,_0x904af5]of _0xb83046)_0x522248['setAttributes']({...we,..._0x904af5},_0x29dd87);});});const _0x125fb5=(_0x151f96,_0x346ae5)=>{_0x26d2c4['_suggestionFactory']['registerCustomCallback'](_0x151f96,'tablePaste',_0x346ae5,(_0x417dc7,_0x24010a,_0x4247ff)=>{_0x434ec0['model']['change'](_0xac2af1=>{const _0x4324d8=[];for(const _0xd4a6af of _0x417dc7){const _0x2814b5=_0xd4a6af['start']['nodeAfter'];_0x2814b5['is']('element','tableCellSuggestion')&&_0x4324d8['push'](_0x2814b5);}_0x26d2c4['_suggestionFactory']['getSuggestionCallback'](_0x151f96,null,_0x346ae5)(_0x417dc7,_0x24010a,_0x4247ff);for(const _0x16d725 of _0x4324d8)'$graveyard'!=_0x16d725['root']['rootName']&&_0xac2af1['unwrap'](_0x16d725);});});};_0x125fb5('insertion','accept'),_0x125fb5('insertion','discard'),_0x125fb5('deletion','accept'),_0x125fb5('deletion','discard'),_0x26d2c4['_suggestionFactory']['registerCustomCallback']('insertion','tablePasteRow','discard',_0x1ae9f5=>{const _0x1d4dae=_0x1ae9f5['map'](_0x61dd1b=>_0x61dd1b['getContainedElement']()),_0x46adea=_0x1d4dae[0x0]['findAncestor']('table'),{minRow:_0x459d27,maxRow:_0xbaa1a6}=_0x37ac91['_getCoordsForCells'](_0x1d4dae);_0x289e42['removeRows'](_0x46adea,{'at':_0x459d27,'rows':_0xbaa1a6-_0x459d27+0x1});}),_0x26d2c4['_suggestionFactory']['registerCustomCallback']('insertion','tablePasteColumn','discard',_0x5be81b=>{const _0x368290=_0x5be81b['map'](_0x191d00=>_0x191d00['getContainedElement']()),_0x97023b=_0x368290[0x0]['findAncestor']('table'),{minColumn:_0x49dd28,maxColumn:_0x2689c2}=_0x37ac91['_getCoordsForCells'](_0x368290);_0x289e42['removeColumns'](_0x97023b,{'at':_0x49dd28,'columns':_0x2689c2-_0x49dd28+0x1});});const _0x3684b9=(_0x25a077,_0x2c0718)=>{if(!_0x2c0718['subType']||!_0x2c0718['subType']['startsWith']('tablePaste'))return;const _0x17c3fb=_0x2c0718['attributes']['tablePasteChainId'],_0x9dad07=_0x26d2c4['getSuggestions']()['filter'](_0x33503b=>_0x33503b['isInContent']&&_0x33503b['attributes']&&_0x33503b['attributes']['tablePasteChainId']==_0x17c3fb);_0x9dad07['length']&&_0x2c0718['getAllAdjacentSuggestions']()['length']!=_0x9dad07['length']&&_0x9dad07['reduce']((_0x2357c7,_0x593be1)=>(_0x2357c7['next']=_0x593be1,_0x593be1['previous']=_0x2357c7,_0x593be1));};function _0xd2ca5c(_0x117835,_0x3dd04b=!0x0){const {id:_0x55e4f2,authorId:_0x1cf756}=_0x26d2c4['_splitMarkerName'](_0x117835['markerName']),_0x2aed6b=['ck-suggestion-marker','ck-suggestion-marker-insertion'],_0x1595f6=_0x26d2c4['activeMarkers']['includes'](_0x117835['markerName']);return _0x1595f6&&_0x2aed6b['push']('ck-suggestion-marker--active'),{'classes':_0x2aed6b,'attributes':{'data-suggestion':_0x55e4f2,'data-author-id':_0x1cf756},'priority':_0x1595f6&&_0x3dd04b?0xbc2:0xbb8};}_0x26d2c4['on']('suggestionLoaded',_0x3684b9,{'priority':'high'}),_0x26d2c4['on']('suggestionUnloaded',_0x3684b9,{'priority':'high'}),_0x434ec0['model']['document']['registerPostFixer'](()=>{let _0x48c5d4=!0x1;const _0x168cd1=Array['from'](_0x434ec0['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x18c843,data:_0x53dffa}of _0x168cd1){const {group:_0x5acbdd,type:_0x57c3f0,id:_0x7a13a9}=_0x26d2c4['_splitMarkerName'](_0x18c843);if('suggestion'!=_0x5acbdd||'deletion'!=_0x57c3f0||_0x53dffa['oldRange'])continue;if(!_0x26d2c4['hasSuggestion'](_0x7a13a9))continue;const _0x27e838=_0x26d2c4['getSuggestion'](_0x7a13a9)['getRanges'](),_0x1a6ba0=_0x434ec0['plugins']['get']('Users')['me'];for(const _0x47fe8f of _0x26d2c4['getSuggestions']()){if(!_0x47fe8f['isInContent']||_0x47fe8f['author']!=_0x1a6ba0)continue;if('formatBlock'!=_0x47fe8f['type']||'tablePasteCell'!=_0x47fe8f['subType'])continue;if(_0x47fe8f['getRanges']()['every'](_0x448225=>_0x27e838['some'](_0xe8ea6d=>_0xe8ea6d['containsRange'](_0x448225,!0x0)))){for(const _0x4a8af4 of _0x47fe8f['getAllAdjacentSuggestions']())_0x4a8af4['isInContent']&&(_0x4a8af4['discard'](),_0x48c5d4=!0x0);}}}return _0x48c5d4;}),_0x434ec0['model']['document']['registerPostFixer'](_0x539fc3=>{const _0x347792=_0x434ec0['commands']['get']('redo');if(!_0x347792||!_0x347792['_createdBatches']['has'](_0x539fc3['batch']))return!0x1;let _0x288856=!0x1;const _0x5dc1ea=_0x434ec0['plugins']['get']('Users')['me'],_0x39e726=_0x434ec0['model']['document']['differ']['getChanges'](),_0x4b178b=Array['from'](_0x434ec0['model']['document']['differ']['getChangedMarkers']())['filter'](({name:_0x34bf0c,data:_0x4971a0})=>{const {group:_0x2991b3,subType:_0x2779a8,authorId:_0x5379ba}=_0x26d2c4['_splitMarkerName'](_0x34bf0c);return'suggestion'==_0x2991b3&&'tablePaste'==_0x2779a8&&_0x5379ba==_0x5dc1ea['id']&&!_0x4971a0['oldRange'];});for(const _0x12f199 of _0x39e726){if('insert'!=_0x12f199['type']||'tableCellSuggestion'!=_0x12f199['name']||0x1!=_0x12f199['length'])continue;const _0x2657c8=_0x539fc3['createRange'](_0x12f199['position'],_0x12f199['position']['getShiftedBy'](0x1));if(!_0x4b178b['find'](({data:_0x552a0d})=>_0x552a0d['newRange']['isEqual'](_0x2657c8))){for(const {name:_0x1ccd74,data:_0x64041f}of _0x4b178b)if(_0x2657c8['containsRange'](_0x64041f['newRange'])){_0x539fc3['updateMarker'](_0x1ccd74,{'range':_0x2657c8}),_0x288856=!0x0;break;}}}return _0x288856;}),_0x434ec0['model']['document']['registerPostFixer'](_0x4378b0=>{let _0x1dffd5=!0x1;const _0x32080b=_0x434ec0['plugins']['get']('Users')['me'],_0x2f944c=_0x26d2c4['getSuggestions']()['filter'](_0xfd5806=>_0xfd5806['isInContent']&&_0xfd5806['author']==_0x32080b),_0x2ebd4d=new Set(),_0x43028d=new Set();for(const _0x54af62 of _0x2f944c)if('tablePaste'==_0x54af62['subType'])for(const _0x5d501a of _0x54af62['getMarkers']()){const _0x419424=_0x5d501a['getRange']()['getContainedElement']();if(_0x419424){if(_0x419424['is']('element','tableCellSuggestion')&&ke(_0x419424)){_0x54af62['removeMarker'](_0x5d501a['name']),_0x2ebd4d['add'](_0x419424),_0x1dffd5=!0x0;const _0x7a543c=_0x419424['nextSibling'],_0x4fe95a=_0x419424['previousSibling'],_0x909c5b=_0x7a543c&&_0x7a543c['is']('element','tableCellSuggestion'),_0x387d5e=_0x4fe95a&&_0x4fe95a['is']('element','tableCellSuggestion');_0x909c5b&&!_0x2ebd4d['has'](_0x7a543c)&&_0x43028d['add'](_0x7a543c),_0x387d5e&&!_0x2ebd4d['has'](_0x4fe95a)&&_0x43028d['add'](_0x4fe95a);}else _0x419424['is']('element','paragraph')&&_0x419424['isEmpty']&&(_0x54af62['removeMarker'](_0x5d501a['name']),_0x1dffd5=!0x0);}}else{if('tablePasteCell'==_0x54af62['subType']){if(!_0x54af62['attributes']||!_0x54af62['attributes']['tablePasteChainId'])continue;const _0x109016=_0x54af62['attributes']['markerAttributes'];if(_0x109016&&Object['keys'](_0x109016)['length'])continue;const _0x4e3587=_0x54af62['attributes']['tablePasteChainId'];let _0x40e787=!0x0,_0x11254b=!0x0;for(const _0x43b9d7 of _0x2f944c)if(_0x43b9d7['subType']&&_0x43b9d7['subType']['startsWith']('tablePaste')){if(!_0x43b9d7['attributes']['tablePasteChainId']){_0x11254b=!0x1;break;}if(_0x43b9d7['id']!=_0x54af62['id']&&_0x43b9d7['attributes']['tablePasteChainId']==_0x4e3587){_0x40e787=!0x1;break;}}_0x11254b&&_0x40e787&&(_0x54af62['removeMarkers'](),_0x1dffd5=!0x0);}}for(const _0x3fb072 of _0x2ebd4d)_0x4378b0['remove'](_0x3fb072);for(const _0x2ebbee of _0x43028d)_0x4378b0['unwrap'](_0x2ebbee);return _0x1dffd5;}),_0x434ec0['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'suggestion:formatBlock:tablePasteCell','view':_0x40baac=>_0xd2ca5c(_0x40baac),'converterPriority':'high'}),_0x434ec0['conversion']['for']('dataDowncast')['markerToHighlight']({'model':'suggestion:formatBlock:tablePasteCell','view':(_0x539a62,_0x2b19c0)=>_0x2b19c0['options']['showSuggestionHighlights']?_0xd2ca5c(_0x539a62,!0x1):null,'converterPriority':'high'});const _0x14d9fc=_0x434ec0['editing']['view'];this['listenTo'](_0x14d9fc['document'],'clipboardOutput',(_0xb8d23b,_0x3e12c8)=>{const _0xe324d8=[];for(const _0x4ed6f5 of _0x14d9fc['createRangeIn'](_0x3e12c8['content'])['getItems']())_0x4ed6f5['is']('element','suggestion-td')&&_0xe324d8['push'](_0x4ed6f5);_0x14d9fc['change'](_0x16a95d=>{for(const _0x3a9781 of _0xe324d8)_0x16a95d['move'](_0x16a95d['createRangeIn'](_0x3a9781),_0x16a95d['createPositionBefore'](_0x3a9781)),_0x16a95d['remove'](_0x3a9781);});});}}function ke(_0x3f7c06){if(_0x3f7c06['isEmpty'])return!0x0;const _0x306442=_0x3f7c06['getChild'](0x0);return _0x306442['is']('element','paragraph')&&_0x306442['isEmpty'];}function Re(_0x1107a8,_0x1c1442={},_0x2f0dfa){for(const {isAnchor:_0x1c61a8,cellHeight:_0x31491b,cellWidth:_0x335387}of _0x2f0dfa['createTableWalker'](_0x1107a8,{'includeAllSlots':!0x0,..._0x1c1442}))if(!_0x1c61a8||0x1!=_0x31491b||0x1!=_0x335387)return!0x1;return!0x0;}class Nt extends _0x236ed3{['afterInit'](){if(!this['editor']['plugins']['has']('TableColumnResizeEditing'))return;const _0x4b9351=this['editor']['plugins']['get']('TrackChangesEditing');_0x4b9351['enableCommand']('resizeTableWidth',this['handleResizeTableWidthCommand']['bind'](this)),_0x4b9351['_suggestionFactory']['registerCustomCallback']('formatBlock','resizeTable','accept',_0x4b9351['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'discard')),_0x4b9351['_suggestionFactory']['registerCustomCallback']('formatBlock','resizeTable','discard',_0x4b9351['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'accept')),_0x4b9351['descriptionFactory']['registerDescriptionCallback'](this['handleSuggestionDescription']['bind'](this));}['handleResizeTableWidthCommand'](_0x141e60,_0x1233b1){const _0x50c277=this['editor']['plugins']['get']('TrackChangesEditing'),_0x3ed43b=this['editor']['plugins']['get']('TableColumnResizeEditing'),_0x18b940=_0x1233b1['table']||this['editor']['model']['document']['selection']['getSelectedElement']();this['editor']['model']['change'](()=>{const _0x4baf30=_0x3ed43b['getColumnGroupElement'](_0x18b940);let _0x5c713d=_0x4baf30?_0x3ed43b['getTableColumnsWidths'](_0x4baf30):null,_0x2ccb69=_0x18b940['getAttribute']('tableWidth')||null;const _0x2c127a=_0x1233b1['tableWidth']||_0x2ccb69,_0x430ecb=_0x1233b1['columnWidths']||_0x5c713d,_0x2e2cc0=this['editor']['plugins']['get']('Users')['me'];for(const _0x7c37b7 of _0x50c277['getSuggestions']()){const _0x2de991=_0x7c37b7['getContainedElement']();if('resizeTable'===_0x7c37b7['subType']&&_0x2de991===_0x18b940){_0x7c37b7['author']!==_0x2e2cc0&&_0x7c37b7['discard']();const _0x2cdf6a=_0x7c37b7['data']['commandParams'];_0x2ccb69=_0x2cdf6a[0x0]['tableWidth'],_0x5c713d=_0x2cdf6a[0x0]['columnWidths'];break;}}_0x141e60({'table':_0x18b940,'tableWidth':_0x2c127a,'columnWidths':_0x430ecb}),_0x50c277['markBlockFormat'](_0x18b940,{'commandName':'resizeTableWidth','commandParams':[{'tableWidth':_0x2ccb69,'columnWidths':_0x5c713d}],'formatGroupId':'resizeTable'},[],'resizeTable');});}['handleSuggestionDescription'](_0x3689fc){if('formatBlock'!=_0x3689fc['type']&&'formatInline'!=_0x3689fc['type'])return;const {data:_0x56390d}=_0x3689fc;if(_0x56390d&&'resizeTable'===_0x56390d['formatGroupId']){const _0x403c6f='*Format:*\x20resize\x20table';return{'type':'format','content':o(this['editor']['locale'],_0x403c6f)};}}}class Dt extends _0x236ed3{['afterInit'](){const _0x2a7d66=this['editor'];_0x2a7d66['plugins']['has']('Template')&&_0x2a7d66['plugins']['get']('TrackChangesEditing')['enableCommand']('insertTemplate');}}class Mt extends _0x236ed3{['afterInit'](){const _0x26939b=this['editor'];if(!_0x26939b['commands']['get']('insertTableOfContents'))return;_0x26939b['plugins']['get']('TrackChangesEditing')['enableCommand']('insertTableOfContents');const _0x401ba5=_0x26939b['plugins']['get']('TrackChangesEditing'),_0x4cec27=_0x26939b['locale'];_0x401ba5['descriptionFactory']['registerElementLabel']('tableOfContents',_0x4be990=>o(_0x4cec27,'ELEMENT_TABLE_OF_CONTENTS',_0x4be990));}}class $t extends _0x236ed3{['afterInit'](){const _0x3377ab=this['editor'];if(!_0x3377ab['plugins']['has']('Title'))return;const _0x235899=_0x3377ab['plugins']['get']('TrackChangesEditing');_0x235899['descriptionFactory']['registerElementLabel']('title-content',()=>o(_0x3377ab['locale'],'ELEMENT_TITLE')),_0x3377ab['model']['document']['registerPostFixer'](_0x287daa=>{let _0xc89158=!0x1;const _0x49c51b=Array['from'](_0x3377ab['model']['document']['differ']['getChangedMarkers']());for(const {name:_0x328c6d,data:_0x231fe9}of _0x49c51b){const {group:_0x281838}=_0x235899['_splitMarkerName'](_0x328c6d);if('suggestion'!==_0x281838||!_0x231fe9['newRange'])continue;const _0x1d18fc=_0x231fe9['newRange'],_0x1e7139=_0x1d18fc['end']['nodeBefore'];if(!_0x1e7139||!_0x1e7139['is']('element','title-content'))continue;if(!_0x1d18fc['start']['isTouching'](_0x1d18fc['end']))continue;const _0x2df0cc=_0x3377ab['model']['schema']['getNearestSelectionRange'](_0x1d18fc['end'],'forward');if(_0x2df0cc&&_0x2df0cc['isCollapsed']){const _0x39d1a4=_0x287daa['createRange'](_0x1d18fc['start'],_0x2df0cc['start']);_0x39d1a4['isEqual'](_0x1d18fc)||(_0x287daa['updateMarker'](_0x328c6d,{'range':_0x39d1a4}),_0xc89158=!0x0);}_0xc89158||(_0x287daa['removeMarker'](_0x328c6d),_0xc89158=!0x0);}return _0xc89158;});}}class Bt extends _0x236ed3{['afterInit'](){const _0x47fa05=this['editor'],_0x491d10=_0x47fa05['plugins']['get']('TrackChangesEditing');_0x47fa05['plugins']['has']('UndoEditing')&&(_0x491d10['enableCommand']('undo'),_0x491d10['enableCommand']('redo'));}}class xt extends _0x236ed3{static get['requires'](){return[It];}['afterInit'](){const _0x27950a=this['editor'];if(!_0x27950a['plugins']['has']('TableCaptionEditing'))return;_0x27950a['plugins']['get']('TrackChangesEditing')['enableCommand']('toggleTableCaption');}}class Ot extends _0x236ed3{['tableProperties'];['tableCellProperties'];constructor(_0x51a436){super(_0x51a436),this['tableProperties']=['tableBorderColor','tableBorderStyle','tableBorderWidth','tableAlignment','tableWidth','tableHeight','tableBackgroundColor'],this['tableCellProperties']=['tableCellBorderColor','tableCellBorderStyle','tableCellBorderWidth','tableCellPadding','tableCellWidth','tableCellHeight','tableCellBackgroundColor','tableCellHorizontalAlignment','tableCellVerticalAlignment'];}static get['pluginName'](){return'TrackChangesTableProperties';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['afterInit'](){const _0x1d700e=this['editor']['plugins']['get']('TrackChangesEditing');if(this['editor']['plugins']['has']('TablePropertiesEditing')){for(const _0x3e425f of this['tableProperties'])_0x1d700e['enableCommand'](_0x3e425f,(_0x4412a4,_0x3b2e62)=>{const _0x4f170b=this['editor']['model']['document']['selection']['getFirstPosition']()['findAncestor']('table');this['_handlePropertyChange'](_0x3e425f,[_0x4f170b],this['tableProperties'],'tableProperties',_0x4412a4,_0x3b2e62);});_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableProperties','accept',_0x1d700e['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'discard')),_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableProperties','discard',(_0xc21942,_0x2f6ce4)=>this['handleDiscardAction'](this['tableProperties'],_0xc21942,_0x2f6ce4)),_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableProperties','join',()=>!0x1);}if(this['editor']['plugins']['has']('TableCellPropertiesEditing')){for(const _0x595374 of this['tableCellProperties'])_0x1d700e['enableCommand'](_0x595374,(_0x1129c2,_0x46e13d)=>{const _0x4fc741=this['editor']['plugins']['get']('TableUtils')['getSelectionAffectedTableCells'](this['editor']['model']['document']['selection']);this['_handlePropertyChange'](_0x595374,_0x4fc741,this['tableCellProperties'],'tableCellProperties',_0x1129c2,_0x46e13d);});_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableCellProperties','accept',_0x1d700e['_suggestionFactory']['getSuggestionCallback']('formatBlock',null,'discard')),_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableCellProperties','discard',(_0x512c6f,_0x3bdffe)=>this['handleDiscardAction'](this['tableCellProperties'],_0x512c6f,_0x3bdffe)),_0x1d700e['_suggestionFactory']['registerCustomCallback']('formatBlock','tableCellProperties','join',()=>!0x1);}_0x1d700e['descriptionFactory']['registerDescriptionCallback'](_0x1d36b0=>this['handleSuggestionDescription'](_0x1d36b0));}['_handlePropertyChange'](_0x1108d1,_0x31f2a7,_0x23a203,_0x39cb87,_0x42e820,_0x2c7955){const _0x3b020d=this['editor']['plugins']['get']('TrackChangesEditing');this['editor']['model']['enqueueChange'](_0x2c7955['batch'],()=>{for(const _0x150808 of _0x31f2a7){if(this['_getSuggestion'](_0x150808,_0x39cb87))_0x42e820(_0x2c7955);else{const _0xf57af9={};for(const _0x210548 of _0x23a203){const _0x3fc838=_0x150808['getAttribute'](_0x210548);void 0x0!==_0x3fc838&&(_0xf57af9[_0x210548]=_0x3fc838);}_0x42e820(_0x2c7955),_0x3b020d['markBlockFormat'](_0x150808,{'commandParams':[_0xf57af9]},[],_0x39cb87);}}});}['handleDiscardAction'](_0xf13001,_0x4b05eb,_0x3947d3){const _0x46e5d3=_0x4b05eb[0x0]['start']['nodeAfter'],_0x3deb66=_0x3947d3['commandParams'][0x0];this['editor']['model']['change'](_0x4aeaff=>{for(const _0x518bb7 of _0xf13001)void 0x0!==_0x3deb66[_0x518bb7]?_0x4aeaff['setAttribute'](_0x518bb7,_0x3deb66[_0x518bb7],_0x46e5d3):_0x4aeaff['removeAttribute'](_0x518bb7,_0x46e5d3);});}['handleSuggestionDescription'](_0x247ff4){if(_0x247ff4['data'])switch(_0x247ff4['subType']){case'tableProperties':return{'type':'format','content':o(this['editor']['locale'],'*Format:*\x20change\x20table\x20properties')};case'tableCellProperties':return{'type':'format','content':o(this['editor']['locale'],'*Format:*\x20change\x20table\x20cell\x20properties')};}}['_getSuggestion'](_0x51d455,_0x6adc87){const _0x3beba4=this['editor']['plugins']['get']('TrackChangesEditing');for(const _0x4ce036 of _0x3beba4['getSuggestions']({'skipNotAttached':!0x0})){const _0x2d6b93=_0x4ce036['getContainedElement']();if(_0x4ce036['subType']===_0x6adc87&&_0x2d6b93===_0x51d455)return _0x4ce036;}return null;}}const m='$elementName';class p extends _0x236ed3{['descriptionFactory'];['trackChangesCommand'];['_adapter'];['_suggestionFactory'];['_suggestions'];['_commentsRepository'];['_enabledCommands'];['_model'];['_suggestionState'];['_isForcedDefaultExecutionBlock'];['_trackFormatChanges'];['_mergeNestedSuggestions'];['_blockAttributeKeys'];['_inlineAttributeKeys'];['_recordAttributeSuggestions']=!0x1;static get['requires'](){return['CommentsRepository',_0x113ad9,_0x5c6943,V,U,G,F,H,L,J,q,z,Q,X,Y,Z,tt,et,it,st,nt,rt,ot,at,ct,ut,ft,W,pt,ht,K,pe,lt,mt,dt,kt,bt,wt,yt,jt,St,At,It,vt,Ct,xt,_t,Nt,Mt,Ot,Dt,$t,Bt];}static get['pluginName'](){return'TrackChangesEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x31a347){function _0x187c8a(_0x421a25){return _0x421a25['map'](_0x3d1233=>String['fromCharCode'](_0x3d1233))['join']('');}super(_0x31a347),this['set']('activeMarkers',[]),this['on']('change:activeMarkers',(_0x434317,_0x1da14c,_0x2265b0,_0x3f9c29)=>{this['_model']['change'](()=>{for(const _0x33c10f of[..._0x3f9c29,..._0x2265b0])this['_model']['markers']['has'](_0x33c10f)&&_0x31a347['editing']['reconvertMarker'](_0x33c10f);});}),this['descriptionFactory']=new f(this['editor']['model']['schema'],this['editor']['locale']),this['_adapter']=null,this['_suggestionFactory']=new Tt(this['editor']),this['_suggestions']=new Map(),this['_commentsRepository']=_0x31a347['plugins']['get']('CommentsRepository'),this['_enabledCommands']=new Set(),this['_model']=this['editor']['model'],this['_suggestionState']=new WeakMap(),this['_isForcedDefaultExecutionBlock']=!0x1,this['_blockAttributeKeys']=new Set([m]),this['_inlineAttributeKeys']=new Set(),_0x31a347['config']['define']('trackChanges.trackFormatChanges','default'),this['_trackFormatChanges']=_0x31a347['config']['get']('trackChanges.trackFormatChanges'),_0x31a347['config']['define']('trackChanges.mergeNestedSuggestions',!0x0),this['_mergeNestedSuggestions']=_0x31a347['config']['get']('trackChanges.mergeNestedSuggestions'),this['trackChangesCommand']=new B(_0x31a347,this['_enabledCommands']),this['_initAriaMarkerChangeAnnouncements'](),this[_0x187c8a([0x5f,0x65,0x78,0x65,0x63,0x75,0x74,0x65,0x53,0x75,0x67,0x67,0x65,0x73,0x74,0x69,0x6f,0x6e])]=_0x187c8a([0x34,0x30,0x34,0x38,0x32,0x32,0x31,0x32]);}['init'](){const _0x2c3460=this['editor'],_0x48e8c1=(_0x177802,_0x3235d5)=>{if('attribute'!=_0x177802)return'ck-suggestion-marker-'+_0x177802;const _0xe15836=_0x3235d5['split']('|')[0x0];return this['_isBlockAttribute'](_0xe15836)?'ck-suggestion-marker-formatBlock':'ck-suggestion-marker-formatInline';};_0x2c3460['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'suggestion','view':_0xc12d38=>{const {id:_0x10bd10,authorId:_0x2dac97,type:_0x2819f3,subType:_0x1ebfc3}=this['_splitMarkerName'](_0xc12d38['markerName']),_0x4222bf=['ck-suggestion-marker',_0x48e8c1(_0x2819f3,_0x1ebfc3)];let _0x57ccf9=0xbb8;return this['activeMarkers']['includes'](_0xc12d38['markerName'])&&(_0x4222bf['push']('ck-suggestion-marker--active'),_0x57ccf9=0xbc2),'deletion'==_0x2819f3&&(_0x57ccf9+=0x5),{'classes':_0x4222bf,'attributes':{'data-suggestion':_0x10bd10,'data-author-id':_0x2dac97},'priority':_0x57ccf9};}}),_0x2c3460['conversion']['for']('dataDowncast')['add'](_0x343e5d=>{_0x343e5d['on']('addMarker:suggestion',(_0x43b666,_0x45f8fb,_0x46718c)=>{if(!_0x46718c['options']['showSuggestionHighlights'])return;const _0x1c53e4=_0x45f8fb['item'];if(!_0x1c53e4)return;const _0x2a1791=_0x46718c['mapper']['toViewElement'](_0x1c53e4);_0x2c3460['model']['schema']['isObject'](_0x1c53e4)&&_0x2a1791&&!_0x2a1791['getCustomProperty']('widget')&&_0x2a1791['is']('containerElement')&&_0x176fdc(_0x2a1791,_0x46718c['writer']);},{'priority':'high'});}),_0x2c3460['conversion']['for']('dataDowncast')['markerToHighlight']({'model':'suggestion','view':(_0xd033fe,_0x118bf4)=>{if(!_0x118bf4['options']['showSuggestionHighlights'])return null;const {type:_0x6b9f01,subType:_0x2cc498}=this['_splitMarkerName'](_0xd033fe['markerName']);return{'classes':['ck-suggestion-marker',_0x48e8c1(_0x6b9f01,_0x2cc498)],'priority':0xbb8};}});const _0x23ec8e=({showActiveMarkers:_0x40cc3b=!0x0,isAttributeSuggestion:_0x1bb302=!0x1}={})=>(_0x4ab3a7,_0x18b86e,_0x17b626)=>{if(!_0x18b86e['item'])return;const {id:_0x20b80f,authorId:_0x2268ec}=this['_splitMarkerName'](_0x18b86e['markerName']);if(_0x1bb302){const _0x7adab2=this['_suggestions']['get'](_0x20b80f),_0x1bce54=this['_getAttributeKey'](_0x7adab2);if(!this['_isBlockAttribute'](_0x1bce54))return;}if(_0x18b86e['item']['is']('selection'))return void _0x17b626['consumable']['consume'](_0x18b86e['item'],_0x4ab3a7['name']);const _0x1c3ac9=_0x17b626['mapper']['toViewElement'](_0x18b86e['item']);if(_0x18b86e['item']['is']('element')&&_0x2c3460['model']['schema']['isBlock'](_0x18b86e['item'])&&!_0x1c3ac9['getCustomProperty']('addHighlight')){_0x17b626['writer']['addClass'](['ck-suggestion-marker','ck-suggestion-marker-formatBlock'],_0x1c3ac9),_0x17b626['writer']['setAttribute']('data-suggestion',_0x20b80f,_0x1c3ac9),_0x17b626['writer']['setAttribute']('data-author-id',_0x2268ec,_0x1c3ac9),_0x17b626['mapper']['bindElementToMarker'](_0x1c3ac9,_0x18b86e['markerName']),_0x40cc3b&&(this['activeMarkers']['includes'](_0x18b86e['markerName'])?_0x17b626['writer']['addClass']('ck-suggestion-marker--active',_0x1c3ac9):_0x17b626['writer']['removeClass']('ck-suggestion-marker--active',_0x1c3ac9));for(const _0x4637c4 of _0x2c3460['model']['createRangeIn'](_0x18b86e['item'])['getItems']())_0x17b626['consumable']['consume'](_0x4637c4,_0x4ab3a7['name']);_0x17b626['consumable']['consume'](_0x18b86e['item'],_0x4ab3a7['name']);}};_0x2c3460['conversion']['for']('dataDowncast')['add'](_0x5aa765=>{_0x5aa765['on']('addMarker:suggestion:formatBlock',(_0x2801d7,_0x35cee3,_0x3dc38a)=>{_0x3dc38a['options']['showSuggestionHighlights']&&_0x23ec8e({'showActiveMarkers':!0x1})(_0x2801d7,_0x35cee3,_0x3dc38a);},{'priority':'highest'});}),_0x2c3460['conversion']['for']('dataDowncast')['add'](_0x229859=>{_0x229859['on']('addMarker:suggestion:attribute',(_0x2bd1eb,_0x26b4e5,_0x23c74a)=>{_0x23c74a['options']['showSuggestionHighlights']&&_0x23ec8e({'showActiveMarkers':!0x1,'isAttributeSuggestion':!0x0})(_0x2bd1eb,_0x26b4e5,_0x23c74a);},{'priority':'highest'});}),_0x2c3460['conversion']['for']('dataDowncast')['markerToData']({'model':'suggestion','view':(_0x31d7f7,_0x17e0e9)=>_0x17e0e9['options']['showSuggestionHighlights']?null:{'group':'suggestion','name':_0x31d7f7['substr'](0xb)}}),_0x2c3460['conversion']['for']('upcast')['elementToElement']({'view':{'name':'suggestion','attributes':{'id':/^\w/,'suggestion-type':/^\w/}},'model':(_0x5b98d9,{writer:_0x1a0e93})=>{let _0x4c287a='suggestion:'+_0x5b98d9['getAttribute']('suggestion-type')+':'+_0x5b98d9['getAttribute']('id');return _0x5b98d9['getAttribute']('marker-count')&&(_0x4c287a+=':'+_0x5b98d9['getAttribute']('marker-count')),_0x1a0e93['createElement']('$marker',{'data-name':_0x4c287a});}}),_0x2c3460['conversion']['for']('upcast')['dataToMarker']({'view':'suggestion'}),_0x2c3460['conversion']['for']('editingDowncast')['add'](_0x165587=>{_0x165587['on']('addMarker:suggestion:formatBlock',_0x23ec8e(),{'priority':'high'});}),_0x2c3460['conversion']['for']('editingDowncast')['add'](_0x64971f=>{_0x64971f['on']('addMarker:suggestion:attribute',_0x23ec8e({'isAttributeSuggestion':!0x0}),{'priority':'high'});}),_0x2c3460['conversion']['for']('editingDowncast')['add'](_0x26edc1=>{_0x26edc1['on']('removeMarker:suggestion:formatBlock',(_0x3514bb,_0x214b6d,_0x37033a)=>{const _0x5df724=_0x37033a['mapper']['markerNameToElements'](_0x214b6d['markerName']);if(_0x5df724){for(const _0x1d6475 of _0x5df724)_0x1d6475['getCustomProperty']('addHighlight')||(_0x37033a['writer']['removeClass'](['ck-suggestion-marker','ck-suggestion-marker-formatBlock','ck-suggestion-marker--active'],_0x1d6475),_0x37033a['writer']['removeAttribute']('data-suggestion',_0x1d6475),_0x37033a['writer']['removeAttribute']('data-author-id',_0x1d6475),_0x37033a['mapper']['unbindElementFromMarkerName'](_0x1d6475,_0x214b6d['markerName']));}},{'priority':'high'});}),_0x2c3460['conversion']['for']('editingDowncast')['add'](_0x467c08=>{_0x467c08['on']('removeMarker:suggestion:attribute',(_0xaf1104,_0x20003c,_0x55211e)=>{const _0x3c0df1=_0x55211e['mapper']['markerNameToElements'](_0x20003c['markerName']);if(!_0x3c0df1)return;const {id:_0x18117d}=this['_splitMarkerName'](_0x20003c['markerName']),_0x11bcd4=this['_suggestions']['get'](_0x18117d),_0x1fc39a=this['_getAttributeKey'](_0x11bcd4);if(this['_isBlockAttribute'](_0x1fc39a)){for(const _0x141922 of _0x3c0df1)_0x141922['getCustomProperty']('addHighlight')||(_0x55211e['writer']['removeClass'](['ck-suggestion-marker','ck-suggestion-marker-formatBlock','ck-suggestion-marker--active'],_0x141922),_0x55211e['writer']['removeAttribute']('data-suggestion',_0x141922),_0x55211e['writer']['removeAttribute']('data-author-id',_0x141922),_0x55211e['mapper']['unbindElementFromMarkerName'](_0x141922,_0x20003c['markerName']));}},{'priority':'high'});}),_0x2c3460['model']['document']['registerPostFixer'](_0x74a29f=>{let _0x3fb5e9=!0x1;const _0x192724=Array['from'](_0x2c3460['model']['document']['differ']['getChangedMarkers']()),_0x4e5ebf=new Set();for(const {name:_0x5e90b3,data:_0x54b408}of _0x192724){const {group:_0x3611b6,type:_0x38b897,subType:_0x11a233,id:_0x5ceb58}=this['_splitMarkerName'](_0x5e90b3);if('suggestion'!==_0x3611b6)continue;const _0x32436d=this['_suggestions']['get'](_0x5ceb58);if(null!=_0x54b408['newRange']){'formatInline'==_0x38b897&&(_0x3fb5e9=_0x3fb5e9||Ut(_0x54b408['newRange'],_0x5e90b3,_0x74a29f,_0x2c3460['model']['schema']));const _0x42bb10='attribute'==_0x38b897&&this['_isBlockAttribute'](_0x11a233['split']('|')[0x0]);if(_0x54b408['newRange']['isCollapsed']||'$graveyard'==_0x54b408['newRange']['root']['rootName']||'formatBlock'==_0x38b897&&!Gt(_0x54b408['newRange'])||_0x42bb10&&!Gt(_0x54b408['newRange'])||'deletion'==_0x38b897&&!(!Vt(_0x419129=_0x54b408['newRange'])&&!function(_0x112050){return _0x112050['start']['parent']==_0x112050['end']['nodeBefore']&&_0x112050['start']['isAtEnd'];}(_0x419129)))_0x74a29f['removeMarker'](_0x5e90b3),_0x3fb5e9=!0x0;else{if(!_0x32436d||!_0x32436d['isInContent'])continue;if(_0x54b408['newRange']&&_0x54b408['oldRange']&&_0x54b408['newRange']['isEqual'](_0x54b408['oldRange']))continue;_0x4e5ebf['add'](_0x32436d);}}}var _0x419129;return _0x4e5ebf['size']>0x0&&(_0x3fb5e9=!!this['_joinWithAdjacentSuggestions'](_0x4e5ebf)||_0x3fb5e9),_0x3fb5e9;}),_0x2c3460['model']['document']['registerPostFixer'](_0x340d4b=>{let _0x20fa8e=!0x1;for(const _0x2f8537 of _0x2c3460['model']['document']['differ']['getChanges']())if('insert'==_0x2f8537['type'])for(const _0x5e4f1f of this['_suggestions']['values']()){if(_0x5e4f1f['isMultiRange']||!_0x5e4f1f['isInContent'])continue;const _0x717d91='formatBlock'==_0x5e4f1f['type'],_0x3ab8db=this['_getAttributeKey'](_0x5e4f1f),_0x29ccd5=_0x3ab8db&&this['_isBlockAttribute'](_0x3ab8db);if(!_0x717d91&&!_0x29ccd5)continue;const _0xcffc0d=_0x5e4f1f['getFirstRange']();if(_0xcffc0d['start']['parent']!=_0xcffc0d['end']['parent']&&!_0xcffc0d['end']['isAtEnd']){const _0x4c9118=_0x2c3460['model']['createPositionAt'](_0xcffc0d['start']['nodeAfter'],'end'),_0x137f5b=_0x2c3460['model']['createRange'](_0xcffc0d['start'],_0x4c9118);_0x340d4b['updateMarker'](_0x5e4f1f['getFirstMarker'](),{'range':_0x137f5b}),_0x20fa8e=!0x0;}}return _0x20fa8e;}),_0x2c3460['model']['document']['registerPostFixer'](_0x48b172=>this['_processAttributeChanges'](_0x48b172)),_0x2c3460['model']['document']['registerPostFixer'](_0x54ee1f=>!_0x54ee1f['batch']['isLocal']&&this['_processAttributeSuggestions'](_0x54ee1f)),_0x2c3460['model']['on']('_afterChanges',()=>{this['_recordAttributeSuggestions']=!0x1;}),_0x2c3460['model']['document']['on']('change:data',(_0x801cef,_0x17a077)=>{if(!_0x17a077['isLocal']||_0x17a077['isUndo'])return;if(!this['_recordAttributeSuggestions'])return;const _0x10bf6f=_0x2c3460['model']['document']['differ']['getChanges']();if(0x0==_0x10bf6f['length'])return;const _0x189797=[],_0x5ec966=_0x10bf6f['filter'](_0xa6bb3d=>'attribute'==_0xa6bb3d['type']),_0x2cf134=_0x10bf6f['filter'](_0x31bdf0=>'insert'==_0x31bdf0['type']&&'$text'!=_0x31bdf0['name']);for(const _0x2027bf of _0x5ec966)this['_isRegisteredAttribute'](_0x2027bf['attributeKey'])&&_0x189797['push']({'key':_0x2027bf['attributeKey'],'newValue':_0x2027bf['attributeNewValue'],'oldValue':_0x2027bf['attributeOldValue'],'range':Ft(_0x2027bf['range'],_0x2c3460['model'])});for(const _0x1fcc35 of _0x2cf134){if('rename'!=_0x1fcc35['action']&&'refresh'!=_0x1fcc35['action'])continue;const _0x440012=Lt(_0x1fcc35['position']['nodeAfter'],_0x2c3460['model']),_0xe73b00=_0x1fcc35['before'];'rename'==_0x1fcc35['action']&&_0x189797['push']({'key':m,'newValue':_0x1fcc35['name'],'oldValue':_0xe73b00['name'],'range':_0x440012});for(const [_0x4e7282,_0x1f8fb8]of _0xe73b00['attributes']){if(!this['_isRegisteredAttribute'](_0x4e7282))continue;const _0x2d8676=_0x1fcc35['attributes']['get'](_0x4e7282);_0x1f8fb8!==_0x2d8676&&_0x189797['push']({'key':_0x4e7282,'newValue':_0x2d8676,'oldValue':_0x1f8fb8,'range':_0x440012});}for(const [_0x85d6aa,_0x10fb53]of _0x1fcc35['attributes'])this['_isRegisteredAttribute'](_0x85d6aa)&&(_0xe73b00['attributes']['has'](_0x85d6aa)||_0x189797['push']({'key':_0x85d6aa,'newValue':_0x10fb53,'oldValue':null,'range':_0x440012}));}0x0!=_0x189797['length']&&_0x2c3460['model']['enqueueChange'](_0x17a077,_0x155d38=>{const _0x23a845=_0x2ea0eb();for(const {range:_0x2f1d65,key:_0x14a149,oldValue:_0x4cd49b,newValue:_0x353c19}of _0x189797)this['markAttributeChange'](_0x2f1d65,_0x14a149,_0x4cd49b,_0x353c19,{'groupId':_0x23a845});this['_reduceExistingSuggestions'](_0x155d38,_0x189797);});},{'priority':'lowest'}),_0x2c3460['model']['markers']['on']('update:suggestion',(_0x2d5fd3,_0x2f227b,_0x11cb05)=>{if(null==_0x11cb05){const {id:_0x2f3b6d}=this['_splitMarkerName'](_0x2f227b['name']),_0x39a718=this['_suggestions']['get'](_0x2f3b6d);_0x39a718&&_0x39a718['addMarkerName'](_0x2f227b['name']);}}),_0x2c3460['model']['document']['on']('change:data',()=>{const _0x5d095e=Array['from'](_0x2c3460['model']['document']['differ']['getChangedMarkers']())['filter'](_0x56d936=>'suggestion'===this['_splitMarkerName'](_0x56d936['name'])['group']);if(0x0===_0x5d095e['length'])return;_0x5d095e['sort']((_0x424427,_0xdac0f6)=>{const _0x5617de=_0x424427['data']['oldRange'],_0x524a96=_0xdac0f6['data']['oldRange'];return null===_0x5617de&&null===_0x524a96?0x0:null===_0x5617de&&null!==_0x524a96?-0x1:null!==_0x5617de&&null===_0x524a96?0x1:_0x5617de['start']['isBefore'](_0x524a96['start'])?-0x1:0x1;});const _0x5aeea2=new Set(),_0xe4ecc4=new Set();for(const {name:_0x4530f6,data:_0x3f195e}of _0x5d095e){const {id:_0x2dd15a}=this['_splitMarkerName'](_0x4530f6);if(null===_0x3f195e['oldRange']){const _0x3f6780=this['_handleNewSuggestionMarker'](_0x4530f6);_0xe4ecc4['add'](_0x3f6780);}else{const _0x928ae7=this['_suggestions']['get'](_0x2dd15a);null!==_0x3f195e['newRange']||_0x928ae7['isInContent']?(_0x5aeea2['add'](_0x928ae7['head']),_0xe4ecc4['add'](_0x928ae7)):this['_removeSuggestion'](_0x928ae7);}}_0xe4ecc4['size']>0x0&&this['_refreshSuggestionsChain'](_0xe4ecc4);for(const _0x56e164 of _0x5aeea2)this['fire']('suggestionChanged',_0x56e164);}),_0x2c3460['model']['on']('applyOperation',(_0x437334,_0x31fa4a)=>{const _0x39cfae=_0x31fa4a[0x0];if(!this['_suggestions']['size'])return;if(!_0x39cfae['isDocumentOperation'])return;if(_0x39cfae['batch']['isUndo']||!_0x39cfae['batch']['isLocal'])return;let _0x831fba,_0xbef38b;switch(_0x39cfae['type']){case'insert':_0x831fba=_0x2c3460['model']['createPositionAt'](_0x39cfae['position']),_0xbef38b=_0x831fba['getShiftedBy'](_0x39cfae['howMany']);break;case'split':_0x831fba=_0x2c3460['model']['createPositionAt'](_0x39cfae['splitPosition']),_0xbef38b=_0x2c3460['model']['createPositionAt'](_0x39cfae['moveTargetPosition']);break;case'move':_0x831fba=_0x2c3460['model']['createPositionAt'](_0x39cfae['targetPosition']),_0xbef38b=_0x831fba['getShiftedBy'](_0x39cfae['howMany']);break;default:return;}const _0xd04827=_0x2c3460['model']['createRange'](_0x831fba,_0xbef38b);_0x2c3460['model']['change'](()=>{for(const {suggestion:_0x404a99,meta:_0x407443}of this['_findSuggestions'](_0xd04827)){if(_0x404a99['isMultiRange'])continue;if('formatInline'==_0x404a99['type'])continue;const _0x48e27f=this['_getAttributeKey'](_0x404a99);if(_0x48e27f&&this['_isBlockAttribute'](_0x48e27f)&&'split'!=_0x39cfae['type'])continue;const _0x49a283=_0x404a99['data']&&_0x404a99['data']['multipleBlocks'];('formatBlock'!=_0x404a99['type']||'split'==_0x39cfae['type']&&!_0x49a283)&&(_0x407443['containsRangeInObject']||'insertion'==_0x404a99['type']&&_0x407443['isOwn']||_0x404a99['getFirstRange']()['containsRange'](_0xd04827)&&this['_breakSuggestionMarker'](_0x404a99,_0x831fba,_0xbef38b));}});},{'priority':'lowest'}),_0x2c3460['model']['on']('deleteContent',(_0x3e1b42,_0x4e908b)=>{const _0x360699=_0x4e908b[0x0],_0x2e1ad9=_0x4e908b[0x1];if(_0x2e1ad9&&_0x2e1ad9['forceDefaultExecution'])return;if(this['_isForcedDefaultExecutionBlock'])return;if(!this['trackChangesCommand']['value'])return;if(_0x360699['isCollapsed'])return;const _0x5897f9=_0x2c3460['model']['schema'],{start:_0x4269ea,end:_0x225358}=_0x360699['getFirstRange'](),_0x58a359=_0x4269ea['nodeAfter']&&_0x5897f9['isLimit'](_0x4269ea['nodeAfter'])?null:_0x5897f9['getNearestSelectionRange'](_0x4269ea,'forward'),_0x16fb95=_0x225358['nodeBefore']&&_0x5897f9['isLimit'](_0x225358['nodeBefore'])?null:_0x5897f9['getNearestSelectionRange'](_0x225358,'backward'),_0x4444a3=_0x2c3460['model']['createRange'](_0x58a359?_0x58a359['start']:_0x4269ea,_0x16fb95?_0x16fb95['end']:_0x225358);_0x2c3460['model']['change'](_0x19fbdc=>{this['markDeletion'](_0x4444a3);const _0xf2db9b=_0x2c3460['model']['schema']['getNearestSelectionRange'](_0x4444a3['start']);_0x360699['is']('documentSelection')?_0x19fbdc['setSelection'](_0xf2db9b):_0x360699['setTo'](_0xf2db9b);}),_0x3e1b42['stop']();},{'priority':_0x131ea4['normal']+0xa}),_0x2c3460['model']['on']('insertContent',(_0x148975,_0x4af727)=>{const _0x5f5d38=_0x4af727[_0x4af727['length']-0x1];_0x5f5d38&&_0x5f5d38['forceDefaultExecution']||this['_isForcedDefaultExecutionBlock']||this['trackChangesCommand']['value']&&(_0x2c3460['model']['change'](()=>{let _0xa0d807=_0x2c3460['model']['insertContent'](_0x4af727[0x0],_0x4af727[0x1],_0x4af727[0x2],{'forceDefaultExecution':!0x0});if(!_0xa0d807)return;_0x148975['return']=_0xa0d807['clone']();const _0x11a3a6=_0xa0d807['end']['nodeBefore'],_0x11fc2d=_0x2c3460['model']['schema'];_0x11a3a6&&_0x11fc2d['isBlock'](_0x11a3a6)&&!_0x11fc2d['isObject'](_0x11a3a6)&&(_0xa0d807=_0x2c3460['model']['createRange'](_0xa0d807['start'],_0x2c3460['model']['createPositionAt'](_0x11a3a6,'end'))),this['markInsertion'](_0xa0d807);}),_0x148975['stop']());},{'priority':'high'}),this['editor']['commands']['add']('trackChanges',this['trackChangesCommand']),this['enableCommand']('trackChanges');const _0x2c3501=new x(_0x2c3460,this['_suggestions']);_0x2c3460['commands']['add']('acceptSuggestion',_0x2c3501),this['enableCommand']('acceptSuggestion');const _0x33f0d5=new O(_0x2c3460,this['_suggestions']);_0x2c3460['commands']['add']('discardSuggestion',_0x33f0d5),this['enableCommand']('discardSuggestion'),_0x2c3460['commands']['add']('acceptAllSuggestions',new R(_0x2c3460,_0x2c3501,this['_suggestions'])),this['enableCommand']('acceptAllSuggestions'),_0x2c3460['commands']['add']('discardAllSuggestions',new R(_0x2c3460,_0x33f0d5,this['_suggestions'])),this['enableCommand']('discardAllSuggestions'),_0x2c3460['commands']['add']('acceptSelectedSuggestions',new E(_0x2c3460,_0x2c3501,this['_suggestions'])),this['enableCommand']('acceptSelectedSuggestions'),_0x2c3460['commands']['add']('discardSelectedSuggestions',new E(_0x2c3460,_0x33f0d5,this['_suggestions'])),this['enableCommand']('discardSelectedSuggestions');const _0x318905=_0x2c3460['plugins']['get']('CommentsRepository');this['listenTo'](_0x318905,'addComment',(_0x21187b,{threadId:_0x3db976})=>{const _0x1d7350=this['_suggestions']['get'](_0x3db976);_0x1d7350&&_0x1d7350['commentThread']&&0x1===_0x1d7350['commentThread']['length']&&this['_updateSuggestionData'](_0x3db976,{'hasComments':!0x0});},{'priority':'low'}),this['listenTo'](_0x318905,'removeComment',(_0x256912,{threadId:_0x310de6})=>{const _0x337050=this['_suggestions']['get'](_0x310de6);_0x337050&&_0x337050['commentThread']&&!_0x337050['commentThread']['length']&&this['_updateSuggestionData'](_0x310de6,{'hasComments':!0x1});},{'priority':'low'});}set['adapter'](_0x38e34a){if(this['_adapter'])throw new _0x208bcb('track-changes-adapter-already-set',this);this['_adapter']=_0x38e34a;}get['adapter'](){return this['_adapter'];}['getSuggestions']({skipNotAttached:_0x1d5184=!0x1,toJSON:_0x5246bf=!0x1}={}){const _0x20b77c=[];for(const _0x1cfa3e of this['_suggestions']['values']())_0x1d5184&&!_0x1cfa3e['isInContent']||_0x20b77c['push'](_0x1cfa3e);return _0x5246bf?_0x20b77c['map'](_0x29b29f=>_0x29b29f['toJSON']()):_0x20b77c;}['getSuggestion'](_0x5970d6){const _0x29d5be=this['_suggestions']['get'](_0x5970d6);if(!_0x29d5be)throw new _0x208bcb('track-changes-suggestion-not-found',this);return _0x29d5be;}['hasSuggestion'](_0x354a60){return this['_suggestions']['has'](_0x354a60);}['addSuggestionData'](_0x5f3c6f){const {authorId:_0x119b3b,id:_0x2c953b,attributes:_0x59be9d}=_0x5f3c6f,[_0x1a0985,_0x24b27e]=_0x5f3c6f['type']['split'](':'),_0x1d6160=this['_suggestions']['get'](_0x2c953b)||this['_createSuggestion'](_0x1a0985,_0x24b27e,_0x2c953b,_0x119b3b,_0x59be9d);if(this['_addThreadToSuggestion'](_0x1d6160),this['_checkSuggestionCorrectness'](_0x1d6160,_0x1a0985,_0x24b27e||null,_0x119b3b),_0x1d6160['createdAt']=_0x5f3c6f['createdAt'],_0x1d6160['_isDataLoaded']=!0x0,_0x59be9d&&_0x59be9d['@external']){const _0x5933e9=_0x59be9d['@external'],_0x13b9dc=this['_getExternalAuthor'](_0x5933e9['authorName']);_0x1d6160['authoredAt']=_0x5933e9['createdAt'],_0x1d6160['author']=_0x13b9dc,_0x1d6160['isExternal']=!0x0;}else _0x1d6160['authoredAt']=_0x5f3c6f['createdAt'];switch(_0x5f3c6f['data']&&(_0x1d6160['data']=_0x5f3c6f['data']),_0x5f3c6f['attributes']&&(_0x1d6160['attributes']=_0x5f3c6f['attributes']),this['_adapter']&&this['_adapter']['addSuggestion']||(_0x1d6160['_saved']=!0x0),this['_suggestionState']['get'](_0x1d6160)){case'notReady':this['_suggestionState']['set'](_0x1d6160,'dataReady');break;case'markerReady':_0x1d6160['isInContent']?(this['_joinWithAdjacentSuggestions'](new Set([_0x1d6160])),this['_refreshSuggestionsChain'](new Set([_0x1d6160])),this['_suggestionState']['set'](_0x1d6160,'ready'),this['fire']('suggestionLoaded',_0x1d6160)):this['_suggestionState']['set'](_0x1d6160,'removed');}return _0x1d6160;}['acceptSuggestion'](_0x437ed0){this['forceDefaultExecution'](()=>{this['editor']['model']['change'](()=>{for(const _0xcffaa4 of _0x437ed0['getAllAdjacentSuggestions']())_0xcffaa4['accept']();});});}['discardSuggestion'](_0x5506c5){this['forceDefaultExecution'](()=>{this['editor']['model']['change'](()=>{for(const _0x14f755 of _0x5506c5['getAllAdjacentSuggestions']())_0x14f755['discard']();});});}['enableCommand'](_0x433cb1,_0x3589fa){const _0x46a4ea=this['editor']['commands']['get'](_0x433cb1);if(!_0x46a4ea)throw new _0x208bcb('track-changes-command-not-found',this,{'commandName':_0x433cb1});if(this['_enabledCommands']['has'](_0x46a4ea))throw new _0x208bcb('track-changes-enable-command-twice',this,{'commandName':_0x433cb1});this['_enabledCommands']['add'](_0x46a4ea),_0x3589fa&&_0x46a4ea['on']('execute',(_0x41489a,_0x4d2a59)=>{this['trackChangesCommand']['value']&&(this['_isForcedDefaultExecutionBlock']||(_0x4d2a59['length']>0x0&&_0x4d2a59[_0x4d2a59['length']-0x1]&&_0x4d2a59[_0x4d2a59['length']-0x1]['forceDefaultExecution']?_0x4d2a59['pop']():(_0x41489a['return']=_0x3589fa((..._0x3e79e2)=>_0x46a4ea['execute'](..._0x3e79e2,{'forceDefaultExecution':!0x0}),..._0x4d2a59),_0x41489a['stop']())));},{'priority':'high'});}['forceDefaultExecution'](_0x361c31){let _0x58095f,_0x98b82a;const _0x12707d=this['_isForcedDefaultExecutionBlock'];this['_isForcedDefaultExecutionBlock']=!0x0;try{_0x58095f=_0x361c31();}catch(_0x624d93){_0x98b82a=_0x624d93;}return _0x12707d||(this['_isForcedDefaultExecutionBlock']=!0x1),_0x98b82a&&_0x208bcb['rethrowUnexpectedError'](_0x98b82a,this),_0x58095f;}['markInsertion'](_0x21109b,_0x5f309a=null,_0x3c79ed={}){if(_0x21109b['isCollapsed'])return null;const _0x1d8a74=this['editor']['plugins']['get']('Users')['me'];for(const {suggestion:_0x37e05a,meta:_0x1eac0e}of this['_findSuggestions'](_0x21109b,'insertion'))if(_0x1eac0e['isOwn']){if(!_0x1eac0e['isNextTo']){if(_0x1eac0e['containsRangeInObject']){if(!this['_mergeNestedSuggestions']||!qt(_0x37e05a,_0x3c79ed))continue;return _0x37e05a;}if(qt(_0x37e05a,_0x3c79ed))return _0x37e05a;this['_breakSuggestionMarker'](_0x37e05a,_0x21109b['start'],_0x21109b['end']);break;}if(_0x5f309a==_0x37e05a['subType']&&qt(_0x37e05a,_0x3c79ed)){const _0x5e695b=_0x37e05a['getFirstRange']();return _0x5e695b['start']['isEqual'](_0x21109b['end'])?this['_setSuggestionRange'](_0x37e05a,this['_model']['createRange'](_0x21109b['start'],_0x5e695b['end'])):this['_setSuggestionRange'](_0x37e05a,this['_model']['createRange'](_0x5e695b['start'],_0x21109b['end'])),_0x37e05a;}}const _0x20f073=_0x2ea0eb(),_0x1440bd=_0x1d8a74['id'],_0x213b63=_0x5f309a?'insertion:'+_0x5f309a:'insertion',_0x141e97=this['_setSuggestionData']({'id':_0x20f073,'type':_0x213b63,'createdAt':new Date(),'authorId':_0x1440bd,'attributes':_0x3c79ed});return this['_addSuggestionMarker'](_0x213b63,_0x20f073,_0x1440bd,_0x21109b),_0x141e97;}['markMultiRangeInsertion'](_0x14cc54,_0x480b2b='multi',_0x234ad2={}){const _0x4014be=this['editor']['plugins']['get']('Users')['me'],_0x132ea1=this['_suggestionFactory']['getSuggestionCallback']('insertion',_0x480b2b,'join');for(const _0x7766f3 of this['getSuggestions']())if(_0x7766f3['author']['id']==_0x4014be['id']&&'insertion'==_0x7766f3['type']&&_0x7766f3['subType']==_0x480b2b&&qt(_0x7766f3,_0x234ad2)&&(_0x132ea1(_0x7766f3['getRanges'](),_0x14cc54)||_0x132ea1(_0x14cc54,_0x7766f3['getRanges']()))){for(const _0x1daaed of _0x14cc54)_0x7766f3['addRange'](_0x1daaed);return _0x7766f3;}for(const {suggestion:_0x1bb8ad,meta:_0x495ec1}of this['_findSuggestions'](_0x14cc54,'insertion')){if(!_0x495ec1['isOwn'])continue;if(!this['_mergeNestedSuggestions']&&_0x495ec1['containsRangeInObject'])continue;if(!qt(_0x1bb8ad,_0x234ad2))continue;let _0x22b74d=!0x0;for(const _0x1f8669 of _0x1bb8ad['getRanges']())for(const _0x299e0e of _0x14cc54)if(!_0x1f8669['containsRange'](_0x299e0e)){_0x22b74d=!0x1;break;}if(_0x22b74d)return _0x1bb8ad;}const _0x1d5043=_0x2ea0eb(),_0xc2fe65=_0x4014be['id'],_0x4fc5f2='insertion:'+_0x480b2b,_0x1820b=this['_setSuggestionData']({'id':_0x1d5043,'type':_0x4fc5f2,'createdAt':new Date(),'authorId':_0xc2fe65,'attributes':_0x234ad2});for(const _0x414e8a of _0x14cc54)this['_addSuggestionMarker'](_0x4fc5f2,_0x1d5043,_0xc2fe65,_0x414e8a,u['getMultiRangeId']());return _0x1820b;}['markInlineFormat'](_0xcc9e4d,_0xa4774e,_0x30ad78=null,_0x4788e8={}){if(_0x30ad78=_0x30ad78||Pt(_0xa4774e),_0xcc9e4d['isCollapsed'])return null;if('never'===this['_trackFormatChanges']){const _0x52b1d0=this['_suggestionFactory']['getSuggestionCallback']('formatInline',_0x30ad78,'accept');return this['forceDefaultExecution'](()=>_0x52b1d0([_0xcc9e4d],_0xa4774e,_0x4788e8)),null;}const _0x5632d4=this['editor']['plugins']['get']('Users')['me'],_0x2c236a=[];if('always'!==this['_trackFormatChanges']){for(const {suggestion:_0x52d82a,meta:_0x53ce64}of this['_findSuggestions'](_0xcc9e4d,'insertion'))_0x53ce64['isOwn']&&!_0x53ce64['isInsideObject']&&_0x2c236a['push'](..._0x52d82a['getRanges']());}const _0x13a15f=function(_0xb336b3,_0x4b66da){const _0x32641d=[];for(const _0x4668ce of _0x4b66da){const _0x45410a=_0xb336b3['getIntersection'](_0x4668ce);_0x45410a&&_0x32641d['push'](_0x45410a);}return _0x32641d;}(_0xcc9e4d,_0x2c236a),_0x439243=function(_0x5f4a96,_0x8293eb){const _0x35ebbd=[_0x5f4a96];for(const _0x5aae22 of _0x8293eb){let _0x3e00a2=0x0;for(;_0x3e00a2<_0x35ebbd['length'];){const _0x28b650=_0x35ebbd[_0x3e00a2]['getDifference'](_0x5aae22);_0x35ebbd['splice'](_0x3e00a2,0x1,..._0x28b650),_0x3e00a2+=_0x28b650['length'];}}return _0x35ebbd;}(_0xcc9e4d,_0x2c236a);_0x13a15f['length']&&this['_model']['change'](()=>{for(const _0x54311b of _0x13a15f){const _0x4bf93e=this['_suggestionFactory']['getSuggestionCallback']('formatInline',_0x30ad78,'accept');this['forceDefaultExecution'](()=>_0x4bf93e([_0x54311b],_0xa4774e,_0x4788e8));}});for(const _0x234575 of _0x439243){let _0x3c9614=null,_0x50df4c=_0x234575['start'],_0x37ed2f=_0x234575['end'];for(const {suggestion:_0x1a4f10,meta:_0x3127dc}of this['_findSuggestions'](_0x234575,'formatInline')){if(!_0x3127dc['isOwn'])continue;if(_0x1a4f10['subType']!=_0x30ad78)continue;if(!qt(_0x1a4f10,_0x4788e8))continue;const _0x99c669=_0x1a4f10['getFirstRange']();if(_0x99c669['containsRange'](_0x234575,!0x0))return null;_0x50df4c=_0x50df4c['isBefore'](_0x99c669['start'])?_0x50df4c:_0x99c669['start'],_0x37ed2f=_0x37ed2f['isAfter'](_0x99c669['end'])?_0x37ed2f:_0x99c669['end'],_0x3c9614?_0x99c669['start']['isBefore'](_0x3c9614['getFirstRange']()['start'])?(_0x3c9614['removeMarkers'](),_0x3c9614=_0x1a4f10):_0x1a4f10['removeMarkers']():_0x3c9614=_0x1a4f10;}const _0x10667a=this['_model']['createRange'](_0x50df4c,_0x37ed2f);if(_0x3c9614)this['_setSuggestionRange'](_0x3c9614,_0x10667a);else{const _0x2978db=_0x2ea0eb(),_0x341da2=_0x5632d4['id'];this['_setSuggestionData']({'id':_0x2978db,'type':'formatInline:'+_0x30ad78,'data':_0xa4774e,'createdAt':new Date(),'authorId':_0x341da2,'attributes':_0x4788e8}),this['_addSuggestionMarker']('formatInline:'+_0x30ad78,_0x2978db,_0x341da2,_0x10667a);}}return null;}['markBlockFormat'](_0x3a20b3,_0x574111,_0x2a8ddf=[],_0x58e887=null,_0x370a29={}){_0x574111['formatGroupId']||(_0x574111['formatGroupId']=_0x574111['commandName']),_0x574111['multipleBlocks']=_0x3a20b3['is']('range'),_0x58e887=_0x58e887||Pt(_0x574111);const _0x29fdd7=_0x2a8ddf['map'](_0x9ab19f=>Lt(_0x9ab19f,this['_model'])),_0x394151=_0x3a20b3['is']('range')?_0x3a20b3:Lt(_0x3a20b3,this['_model']);if('never'===this['_trackFormatChanges']){const _0x81b991=this['_suggestionFactory']['getSuggestionCallback']('formatBlock',_0x58e887,'accept');return this['forceDefaultExecution'](()=>_0x81b991([_0x394151],_0x574111,_0x370a29)),null;}_0x29fdd7['push'](_0x394151);let _0x220752=!0x0;for(const _0x4af27a of _0x29fdd7)if(!this['_rangeIsInLocalUserInsertion'](_0x4af27a)){_0x220752=!0x1;break;}if(_0x220752&&'always'!==this['_trackFormatChanges']){const _0x3222ec=this['_suggestionFactory']['getSuggestionCallback']('formatBlock',_0x58e887,'accept');return this['forceDefaultExecution'](()=>_0x3222ec([_0x394151],_0x574111,_0x370a29)),null;}let _0x4c0133=null,_0x257070=_0x394151['start'],_0xc00875=_0x394151['end'];for(const {suggestion:_0x56bf8b,meta:_0x37df64}of this['_findSuggestions'](_0x394151,'formatBlock')){if(!_0x37df64['isOwn'])continue;if(_0x37df64['isNextTo']||_0x37df64['containsRangeInObject']||_0x37df64['isInsideObject'])continue;if(_0x56bf8b['data']['formatGroupId']!=_0x574111['formatGroupId'])continue;if(!qt(_0x56bf8b,_0x370a29))continue;const _0x5a69cb=_0x56bf8b['getFirstRange']();if(_0x56bf8b['subType']==_0x58e887){if(_0x5a69cb['containsRange'](_0x394151,!0x0))return null;_0x257070=_0x257070['isBefore'](_0x5a69cb['start'])?_0x257070:_0x5a69cb['start'],_0xc00875=_0xc00875['isAfter'](_0x5a69cb['end'])?_0xc00875:_0x5a69cb['end'],_0x4c0133?_0x5a69cb['start']['isBefore'](_0x4c0133['getFirstRange']()['start'])?(_0x4c0133['removeMarkers'](),_0x4c0133=_0x56bf8b):_0x56bf8b['removeMarkers']():_0x4c0133=_0x56bf8b;}else{const _0x34a7f4=_0x394151['getIntersection'](_0x5a69cb);this['_cutOutSuggestionMarker'](_0x56bf8b,_0x34a7f4);}}const _0x436e31=this['editor']['plugins']['get']('Users')['me'],_0x53d95e=_0x2ea0eb(),_0x5df2e8=_0x436e31['id'];if(_0x4c0133)return this['_setSuggestionRange'](_0x4c0133,this['_model']['createRange'](_0x257070,_0xc00875)),_0x4c0133;{const _0x179a71=this['_setSuggestionData']({'id':_0x53d95e,'type':'formatBlock:'+_0x58e887,'data':_0x574111,'createdAt':new Date(),'authorId':_0x5df2e8,'attributes':_0x370a29});return this['_addSuggestionMarker']('formatBlock:'+_0x58e887,_0x53d95e,_0x5df2e8,this['_model']['createRange'](_0x257070,_0xc00875)),_0x179a71;}}['markMultiRangeBlockFormat'](_0x5c7bb8,_0x419ace,_0x2e5cb9=[],_0x1c6494=null,_0x332aee={}){_0x419ace['formatGroupId']||(_0x419ace['formatGroupId']=_0x419ace['commandName']);const _0x399842=_0x5c7bb8[0x0];_0x419ace['multipleBlocks']=_0x399842['is']('range'),_0x1c6494=_0x1c6494||Pt(_0x419ace);const _0x50ca36=_0x2e5cb9['map'](_0x122ba3=>Lt(_0x122ba3,this['_model'])),_0x5687e7=_0x399842['is']('range')?_0x5c7bb8:_0x5c7bb8['map'](_0x1f73c1=>Lt(_0x1f73c1,this['_model']));if('never'===this['_trackFormatChanges']){const _0x51fa37=this['_suggestionFactory']['getSuggestionCallback']('formatBlock',_0x1c6494,'accept');return this['forceDefaultExecution'](()=>_0x51fa37(_0x5687e7,_0x419ace,_0x332aee)),null;}_0x50ca36['push'](..._0x5687e7);let _0x37f2b0=!0x0;for(const _0x4de268 of _0x50ca36)if(!this['_rangeIsInLocalUserInsertion'](_0x4de268)){_0x37f2b0=!0x1;break;}if(_0x37f2b0&&'always'!==this['_trackFormatChanges']){const _0x425c17=this['_suggestionFactory']['getSuggestionCallback']('formatBlock',_0x1c6494,'accept');return this['forceDefaultExecution'](()=>_0x425c17(_0x5687e7,_0x419ace,_0x332aee)),null;}const _0xacad1d=this['editor']['plugins']['get']('Users')['me'];for(const _0x13b3a9 of this['getSuggestions']()){if(_0x13b3a9['author']['id']!=_0xacad1d['id'])continue;if('formatBlock'!=_0x13b3a9['type']||_0x13b3a9['data']['formatGroupId']!=_0x419ace['formatGroupId'])continue;if(!qt(_0x13b3a9,_0x332aee))continue;const _0x4a1c51=_0x13b3a9['subType']==_0x1c6494;for(let _0x39f1a9=0x0;_0x39f1a9<_0x5687e7['length'];_0x39f1a9++){const _0x227872=_0x5687e7[_0x39f1a9];for(const _0x7a5a44 of _0x13b3a9['getMarkers']()){const _0x118c95=_0x7a5a44['getRange']();if(_0x227872['isEqual'](_0x118c95)){_0x4a1c51?(_0x5687e7['splice'](_0x39f1a9,0x1),_0x39f1a9--):_0x13b3a9['removeMarker'](_0x7a5a44['name']);break;}}}}if(0x0==_0x5687e7['length'])return null;const _0x32e1b5=this['_suggestionFactory']['getSuggestionCallback']('formatBlock',_0x1c6494,'join');for(const _0x445ee3 of this['getSuggestions']())if(_0x445ee3['author']['id']==_0xacad1d['id']&&'formatBlock'==_0x445ee3['type']&&_0x445ee3['data']['formatGroupId']==_0x419ace['formatGroupId']&&_0x445ee3['subType']==_0x1c6494&&qt(_0x445ee3,_0x332aee)&&(_0x32e1b5(_0x445ee3['getRanges'](),_0x5687e7)||_0x32e1b5(_0x5687e7,_0x445ee3['getRanges']()))){for(const _0x550b40 of _0x5687e7)_0x445ee3['addRange'](_0x550b40);return _0x445ee3;}const _0xfc7ba=_0x2ea0eb(),_0x55635f=_0xacad1d['id'],_0x37a356='formatBlock:'+_0x1c6494,_0x20e4f9=this['_setSuggestionData']({'id':_0xfc7ba,'type':_0x37a356,'data':_0x419ace,'createdAt':new Date(),'authorId':_0x55635f,'attributes':_0x332aee});for(const _0x1b9565 of _0x5687e7)this['_addSuggestionMarker'](_0x37a356,_0xfc7ba,_0x55635f,_0x1b9565,u['getMultiRangeId']());return _0x20e4f9;}['markDeletion'](_0x445b8a,_0x37a4f3=null,_0x43b3b7={}){if(_0x445b8a['isCollapsed'])return null;const _0x10501b=this['editor']['plugins']['get']('Users')['me'],_0x265b5e=new _0x3a44ac(_0x445b8a['start'],_0x445b8a['end']);for(const {suggestion:_0x3257cc,meta:_0x15402b}of this['_findSuggestions'](_0x265b5e,'insertion'))if(_0x15402b['isOwn']&&!_0x15402b['isNextTo']){if(_0x3257cc['isMultiRange']){const _0x1e1233=_0x3257cc['getRanges']()['filter'](_0x45c15e=>'$graveyard'!=_0x45c15e['root']['rootName']);_0x1e1233['every'](_0x2c4028=>_0x265b5e['containsRange'](_0x2c4028,!0x0))&&_0x3257cc['discard']();if(_0x1e1233['some'](_0x56ca17=>_0x56ca17['containsRange'](_0x265b5e,!0x0))){const _0x5e18cb=this['_suggestionFactory']['getSuggestionCallback']('deletion',_0x37a4f3,'accept');return this['forceDefaultExecution'](()=>_0x5e18cb([_0x265b5e],null,_0x43b3b7)),null;}}else{const _0x41e84a=_0x265b5e['getIntersection'](_0x3257cc['getFirstRange']());null!==_0x41e84a&&_0x3257cc['_onDiscard']([_0x41e84a],null,_0x43b3b7);}}if(_0x265b5e['detach'](),_0x265b5e['isCollapsed']||'$graveyard'==_0x265b5e['root']['rootName'])return null;let _0x2db37a=null,_0x37cb44=_0x265b5e['start'],_0x39b570=_0x265b5e['end'];const _0x34daac=this['_findSuggestions'](_0x265b5e,'deletion');for(const {suggestion:_0x1e4ceb,meta:_0x56f424}of _0x34daac){const _0x41cdaf=this['_model']['createRange'](_0x37cb44,_0x39b570);if(_0x56f424['isOwn']&&(this['_mergeNestedSuggestions']||!_0x56f424['containsRangeInObject']&&!_0x56f424['isInsideObject'])){if(_0x1e4ceb['isMultiRange']){if(!qt(_0x1e4ceb,_0x43b3b7))continue;let _0xfc8738=!0x0;for(const _0x229ba5 of _0x1e4ceb['getRanges']()){if(_0x229ba5['containsRange'](_0x41cdaf,!0x0))return _0x1e4ceb;_0x41cdaf['containsRange'](_0x229ba5)||(_0xfc8738=!0x1);}_0xfc8738&&_0x1e4ceb['discard']();}else{const _0x2e6a98=_0x1e4ceb['getFirstRange']();if(_0x2e6a98['containsRange'](_0x41cdaf,!0x0))return _0x1e4ceb;if(!qt(_0x1e4ceb,_0x43b3b7)){_0x41cdaf['containsRange'](_0x2e6a98)?_0x1e4ceb['removeMarkers']():_0x2e6a98['containsPosition'](_0x37cb44)?_0x37cb44=_0x2e6a98['end']:_0x2e6a98['containsPosition'](_0x39b570)&&(_0x39b570=_0x2e6a98['start']);continue;}_0x37cb44=_0x37cb44['isBefore'](_0x2e6a98['start'])?_0x37cb44:_0x2e6a98['start'],_0x39b570=_0x39b570['isAfter'](_0x2e6a98['end'])?_0x39b570:_0x2e6a98['end'],_0x43b3b7=Object['assign']({},_0x1e4ceb['attributes']),_0x2db37a?_0x2e6a98['start']['isBefore'](_0x2db37a['getFirstRange']()['start'])?(_0x2db37a['removeMarkers'](),_0x2db37a=_0x1e4ceb):_0x1e4ceb['removeMarkers']():_0x2db37a=_0x1e4ceb;}}}if(_0x2db37a)return this['_setSuggestionRange'](_0x2db37a,this['_model']['createRange'](_0x37cb44,_0x39b570)),_0x2db37a;{const _0x1727c5=_0x2ea0eb(),_0x49cb98=this['_model']['createRange'](_0x37cb44,_0x39b570),_0x3ffd25=_0x10501b['id'],_0x4ec40f=_0x37a4f3?'deletion:'+_0x37a4f3:'deletion',_0x326f88=this['_setSuggestionData']({'id':_0x1727c5,'type':_0x4ec40f,'createdAt':new Date(),'authorId':_0x3ffd25,'attributes':_0x43b3b7});return this['_addSuggestionMarker'](_0x4ec40f,_0x1727c5,_0x3ffd25,_0x49cb98),_0x326f88;}}['markMultiRangeDeletion'](_0xdeac5d,_0x3c447a='multi',_0x5a7674={}){const _0xce35c5=this['editor']['plugins']['get']('Users')['me'],_0x3fc5d7=_0xdeac5d['map'](_0x3397db=>new _0x3a44ac(_0x3397db['start'],_0x3397db['end'])),_0x1ba4e3=new Set();for(const {suggestion:_0x5b9b0f,meta:_0xb1272b}of this['_findSuggestions'](_0x3fc5d7,'insertion'))_0xb1272b['isOwn']&&!_0xb1272b['isNextTo']&&_0x1ba4e3['add'](_0x5b9b0f);for(const _0x269cdc of _0x1ba4e3)if(_0x269cdc['isMultiRange']){const _0x36f99b=_0x269cdc['getRanges']();(!_0x269cdc['attributes']||!_0x269cdc['attributes']['skipNestingCheck'])&&(_0x36f99b['every'](_0x742fe2=>_0x3fc5d7['some'](_0x7fa007=>_0x7fa007['containsRange'](_0x742fe2,!0x0)))&&_0x269cdc['discard']());if(_0x3fc5d7['every'](_0xe654de=>_0x36f99b['some'](_0x4636f9=>_0x4636f9['containsRange'](_0xe654de,!0x0)))){const _0x489172=this['_suggestionFactory']['getSuggestionCallback']('deletion',_0x3c447a,'accept');return this['forceDefaultExecution'](()=>_0x489172(_0xdeac5d,null,_0x5a7674)),null;}}else{const _0x3220a7=_0x269cdc['getFirstRange']();_0x3fc5d7['some'](_0x19a4bc=>_0x19a4bc['containsRange'](_0x3220a7,!0x0))&&_0x269cdc['discard']();if(_0x3fc5d7['every'](_0x17cd3d=>_0x3220a7['containsRange'](_0x17cd3d,!0x0))){const _0x178c28=this['_suggestionFactory']['getSuggestionCallback']('deletion',_0x3c447a,'accept');return this['forceDefaultExecution'](()=>_0x178c28(_0x3fc5d7,null,_0x5a7674)),null;}}const _0x265342=this['_suggestionFactory']['getSuggestionCallback']('deletion',_0x3c447a,'join');let _0x1c18d3=null;for(const _0x1bbf98 of this['getSuggestions']())if(_0x1bbf98['author']['id']==_0xce35c5['id']&&_0x1bbf98['isInContent']&&'deletion'==_0x1bbf98['type']&&_0x1bbf98['subType']==_0x3c447a&&qt(_0x1bbf98,_0x5a7674)&&(_0x265342(_0x1bbf98['getRanges'](),_0x3fc5d7)||_0x265342(_0x3fc5d7,_0x1bbf98['getRanges']()))){if(_0x1c18d3){if(_0x1bbf98['commentThread']&&_0x1bbf98['commentThread']['length'])continue;for(const _0x181123 of _0x1bbf98['getRanges']())_0x1c18d3['isIntersectingWithRange'](_0x181123)||_0x1c18d3['addRange'](_0x181123);_0x1bbf98['removeMarkers']();}else{_0x1c18d3=_0x1bbf98;for(const _0x3f4742 of _0x3fc5d7)_0x1bbf98['isIntersectingWithRange'](_0x3f4742)||_0x1bbf98['addRange'](_0x3f4742);}}if(_0x1c18d3)return _0x1c18d3;_0x1ba4e3['clear']();for(const {suggestion:_0x47a7ec,meta:_0x4604aa}of this['_findSuggestions'](_0x3fc5d7,'deletion'))_0x4604aa['isOwn']&&(this['_mergeNestedSuggestions']||!_0x4604aa['containsRangeInObject']&&!_0x4604aa['isInsideObject'])&&qt(_0x47a7ec,_0x5a7674)&&_0x1ba4e3['add'](_0x47a7ec);for(const _0x320da8 of _0x1ba4e3){const _0x2aae50=_0x320da8['getRanges']();if(!_0x5a7674||!_0x5a7674['skipNestingCheck']){if(_0x3fc5d7['every'](_0x3e3e28=>_0x2aae50['some'](_0x1dc37f=>_0x1dc37f['containsRange'](_0x3e3e28,!0x0))))return _0x320da8;}(!_0x320da8['attributes']||!_0x320da8['attributes']['skipNestingCheck'])&&(_0x2aae50['every'](_0x26cd8a=>_0x3fc5d7['some'](_0x22d020=>_0x22d020['containsRange'](_0x26cd8a,!0x0)))&&_0x320da8['discard']());}const _0xb46f55=_0x2ea0eb(),_0x1def2e=_0xce35c5['id'],_0x2d1d81='deletion:'+_0x3c447a,_0xcda478=this['_setSuggestionData']({'id':_0xb46f55,'type':_0x2d1d81,'createdAt':new Date(),'authorId':_0x1def2e,'attributes':_0x5a7674});for(const _0x4558ac of _0x3fc5d7)_0x4558ac['detach'](),_0x4558ac['isCollapsed']||'$graveyard'==_0x4558ac['root']['rootName']||this['_addSuggestionMarker'](_0x2d1d81,_0xb46f55,_0x1def2e,_0x4558ac,u['getMultiRangeId']());return _0xcda478;}['markAttributeChange'](_0x125db4,_0x108b46,_0x6d34a3,_0x5bd338,_0xc0ac8f){if(_0x125db4['isCollapsed'])return[];if('never'===this['_trackFormatChanges'])return[];const _0x2dc753=this['editor']['plugins']['get']('Users')['me']['id'],_0x327b5a=Array['from'](this['_suggestions']['values']())['filter'](_0x159453=>'attribute'==_0x159453['type']&&_0x159453['data']['key']==_0x108b46&&_0x159453['isIntersectingWithRange'](_0x125db4));if('default'===this['_trackFormatChanges']){const _0x26f09e=this['_findSuggestions'](_0x125db4,'insertion')['filter'](({meta:_0x396deb})=>_0x396deb['isOwn']&&!_0x396deb['isInsideObject']&&!_0x396deb['isNextTo'])['map'](({suggestion:_0x59a006})=>_0x59a006);_0x327b5a['unshift'](..._0x26f09e);}const _0x579588=new Map([[_0x125db4,_0x6d34a3]]);for(const _0x299f11 of _0x327b5a){const _0x5663d6='attribute'==_0x299f11['type']?_0x299f11['data']['oldValue']:void 0x0,_0x34b0d3=_0x299f11['getFirstRange'](),_0xbe3de4=Array['from'](_0x579588['keys']())['find'](_0xb20cf=>_0xb20cf['isIntersecting'](_0x34b0d3));if(!_0xbe3de4)continue;const _0x16fd31=_0xbe3de4['getDifference'](_0x34b0d3);this['_isBlockAttribute'](_0x108b46)&&'insertion'==_0x299f11['type']&&0x0!=_0x16fd31['length']||(_0x579588['delete'](_0xbe3de4),_0x16fd31['forEach'](_0xb078ed=>{_0x579588['set'](_0xb078ed,_0x6d34a3);}),'insertion'!=_0x299f11['type']&&_0x5663d6!=_0x5bd338&&_0x579588['set'](_0xbe3de4['getIntersection'](_0x34b0d3),_0x5663d6));}const _0x2b8ce0=[];for(const [_0x2a744d,_0x59da48]of _0x579588){const _0x4ad0a7=_0x2ea0eb(),_0x40b3f6={'key':_0x108b46,'oldValue':_0x59da48,'newValue':_0x5bd338};_0x108b46['length']>0x25&&console['warn']('Creating\x20a\x20suggestion\x20for\x20attribute\x20with\x20too\x20long\x20attribute\x20key.\x20This\x20may\x20lead\x20to\x20errors.\x20Change\x20the\x20attribute\x20key\x20to\x20a\x20value\x20shorter\x20than\x2037\x20characters.',{'key':_0x108b46});const _0x37d023=('attribute:'+(_0x108b46+'|'+Pt({'newValue':_0x5bd338})))['substring'](0x0,0x3c),_0x5d0187=this['_setSuggestionData']({'id':_0x4ad0a7,'type':_0x37d023,'data':_0x40b3f6,'createdAt':new Date(),'authorId':_0x2dc753,'attributes':_0xc0ac8f});_0x2b8ce0['push'](_0x5d0187),this['_addSuggestionMarker'](_0x37d023,_0x4ad0a7,_0x2dc753,_0x2a744d);}return _0x2b8ce0;}['enableDefaultAttributesIntegration'](_0xf88805){this['enableCommand'](_0xf88805,(_0x26261a,..._0x489514)=>{this['_recordAttributeChanges'](()=>{_0x26261a(..._0x489514);});});}['registerBlockAttribute'](_0x5f2bc7){this['_blockAttributeKeys']['add'](_0x5f2bc7);}['registerInlineAttribute'](_0x5f1376){this['_inlineAttributeKeys']['add'](_0x5f1376);}['_getAttributeKey'](_0x3b4630){return'attribute'==_0x3b4630['type']?_0x3b4630['subType']['split']('|')[0x0]:null;}['_setSuggestionRange'](_0x31f6de,_0x5bccd5){const _0xd958c4=_0x31f6de['getFirstMarker']();this['_model']['change'](_0x2574c3=>{_0x2574c3['updateMarker'](_0xd958c4,{'range':_0x5bccd5});});}['_addThreadToSuggestion'](_0x43ddbe){const _0x121857=_0x43ddbe['id'],_0x5b8f90=this['editor']['config']['get']('collaboration.channelId');this['_commentsRepository']['hasCommentThread'](_0x121857)||this['_commentsRepository']['addCommentThread']({'channelId':_0x5b8f90,'threadId':_0x121857,'isResolvable':!0x1,'isSubmitted':!0x0});const _0xcfe6d1=this['_commentsRepository']['getCommentThread'](_0x121857);_0xcfe6d1['unbind']('isRemovable'),_0xcfe6d1['isRemovable']=!0x1,_0x43ddbe['commentThread']=_0xcfe6d1;}['_checkSuggestionCorrectness'](_0x41d197,_0x2aa81f,_0x1d4cf6,_0x146924){if(_0x41d197['type']!=_0x2aa81f||_0x41d197['subType']!=_0x1d4cf6||_0x41d197['creator']['id']!=_0x146924)throw this['editor']['enableReadOnlyMode']('track-changes-suggestion-data-mismatch'),new _0x208bcb('track-changes-suggestion-data-mismatch',this);}['_cutOutSuggestionMarker'](_0x4e925a,_0x387b81){const _0x42def9=_0x4e925a['getFirstRange']();if(_0x387b81['isEqual'](_0x42def9))_0x4e925a['removeMarkers']();else{if(_0x42def9['containsRange'](_0x387b81)){const _0x207878=this['_model']['createPositionAt'](_0x387b81['start']['nodeBefore'],'end');this['_setSuggestionRange'](_0x4e925a,this['_model']['createRange'](_0x42def9['start'],_0x207878));const _0x5ddda3=_0x2ea0eb(),_0x693198=_0x4e925a['creator']['id'],_0x2917e9=_0x4e925a['type']+':'+_0x4e925a['subType'];this['_setSuggestionData']({'id':_0x5ddda3,'type':_0x2917e9,'createdAt':new Date(),'authorId':_0x693198,'data':_0x4e925a['data'],'attributes':_0x4e925a['attributes']});const _0x3de758=this['_model']['createPositionAt'](_0x387b81['end']['parent'],'after'),_0x49f233=this['_model']['createRange'](_0x3de758,_0x42def9['end']);this['_addSuggestionMarker'](_0x2917e9,_0x5ddda3,_0x693198,_0x49f233);}else{if(_0x42def9['containsPosition'](_0x387b81['start'])){const _0x1a09e2=this['_model']['createPositionAt'](_0x387b81['start']['nodeBefore'],'end');this['_setSuggestionRange'](_0x4e925a,this['_model']['createRange'](_0x42def9['start'],_0x1a09e2));}else{const _0x5f3781=this['_model']['createPositionAt'](_0x387b81['end']['parent'],'after');this['_setSuggestionRange'](_0x4e925a,this['_model']['createRange'](_0x5f3781,_0x42def9['end']));}}}}['_rangeIsInLocalUserInsertion'](_0x2ca19a){for(const {suggestion:_0x506fa6,meta:_0x41e576}of this['_findSuggestions'](_0x2ca19a,'insertion')){if(!_0x41e576['isOwn'])continue;const _0x47f316=_0x506fa6['getRanges']();for(const _0x4388b7 of _0x47f316)if(!_0x2ca19a['getDifference'](_0x4388b7)['length'])return!0x0;}return!0x1;}['_getAuthorFromId'](_0x9d5116){const _0x3a46d2=this['editor']['plugins']['get']('Users')['getUser'](_0x9d5116);if(!_0x3a46d2)throw new _0x208bcb('track-changes-user-not-found',this);return _0x3a46d2;}['_getExternalAuthor'](_0x18470d){const _0x2917fb=this['editor']['plugins']['get']('Users'),_0x391b73=_0x2162a8('external:'+_0x18470d),_0x57e349=_0x2917fb['getUser'](_0x391b73);return _0x57e349||_0x2917fb['addUser']({'id':_0x391b73,'name':_0x18470d});}['_createSuggestion'](_0x1a56cb,_0x2cb445,_0xc00c3e,_0x2d57d9,_0x396eab){const _0x342efc=this['_getAuthorFromId'](_0x2d57d9),_0x565b0f=this['_suggestionFactory']['buildSuggestion'](_0x1a56cb,_0x2cb445,_0xc00c3e,_0x342efc,_0x396eab,_0x40ed72=>{this['_updateSuggestionData'](_0xc00c3e,{'attributes':_0x40ed72});const _0x1722cb=this['getSuggestion'](_0xc00c3e);this['_joinWithAdjacentSuggestions'](new Set([_0x1722cb])),this['_refreshSuggestionsChain'](new Set([_0x1722cb]));});return this['listenTo'](_0x565b0f,'accept',()=>{this['_updateSuggestionData'](_0xc00c3e,{'state':'accepted'});},{'priority':'high'}),this['listenTo'](_0x565b0f,'discard',()=>{this['_updateSuggestionData'](_0xc00c3e,{'state':'rejected'});},{'priority':'high'}),this['_suggestions']['set'](_0xc00c3e,_0x565b0f),this['_suggestionState']['set'](_0x565b0f,'notReady'),_0x565b0f;}['_splitMarkerName'](_0x2250fe){const _0x3afd71=_0x2250fe['split'](':');return{'group':_0x3afd71[0x0],'type':_0x3afd71[0x1],'subType':_0x3afd71['length']>=0x5?_0x3afd71[0x2]:null,'id':_0x3afd71['length']<0x5?_0x3afd71[0x2]:_0x3afd71[0x3],'authorId':_0x3afd71['length']<0x5?_0x3afd71[0x3]:_0x3afd71[0x4],'markerCount':0x6==_0x3afd71['length']?_0x3afd71[0x5]:null};}['_breakSuggestionMarker'](_0x512290,_0x5929e4,_0x37a7c9){const _0x3588cd=_0x512290['getFirstRange'](),_0x193929=_0x3588cd['start'],_0x5198c2=_0x3588cd['end'];this['_setSuggestionRange'](_0x512290,this['_model']['createRange'](_0x193929,_0x5929e4));const _0x27a6df=_0x2ea0eb(),_0x282c28=_0x512290['creator']['id'],_0x5aef2c=_0x512290['type']+(_0x512290['subType']?':'+_0x512290['subType']:'');this['_setSuggestionData']({'id':_0x27a6df,'type':_0x5aef2c,'createdAt':new Date(),'authorId':_0x282c28,'originalSuggestionId':_0x512290['id'],'attributes':_0x512290['attributes'],'data':_0x512290['data']});const _0x3ad01e=this['_getAttributeKey'](_0x512290);('formatBlock'==_0x512290['type']||_0x3ad01e&&this['_isBlockAttribute'](_0x3ad01e))&&(_0x37a7c9=this['_model']['createPositionBefore'](_0x37a7c9['parent'])),this['_addSuggestionMarker'](_0x5aef2c,_0x27a6df,_0x282c28,this['_model']['createRange'](_0x37a7c9,_0x5198c2));}['_findSuggestions'](_0xba21f1,_0x31c451=null){const _0x2c7e35=[],_0x1bec8f=this['editor']['plugins']['get']('Users')['me'];Array['isArray'](_0xba21f1)||(_0xba21f1=[_0xba21f1]);for(const _0x4a34b2 of this['getSuggestions']()){if(!_0x4a34b2['isInContent'])continue;if(_0x31c451&&_0x4a34b2['type']!=_0x31c451)continue;let _0x3b5c91=!0x1;for(const _0x3e04b4 of _0x4a34b2['getRanges']()){for(const _0x24ff42 of _0xba21f1){const _0x1d0026=_0x24ff42['start']['isEqual'](_0x3e04b4['end'])||_0x24ff42['end']['isEqual'](_0x3e04b4['start']);if(_0x1d0026||_0x24ff42['getIntersection'](_0x3e04b4)){const _0x217134=_0x24ff42['containsRange'](_0x3e04b4)&&Et(this['_model']['schema'],_0x3e04b4['start'],_0x24ff42),_0x560aae=_0x3e04b4['containsRange'](_0x24ff42)&&Et(this['_model']['schema'],_0x24ff42['start'],_0x3e04b4);_0x2c7e35['push']({'suggestion':_0x4a34b2,'meta':{'isOwn':_0x1bec8f==_0x4a34b2['author'],'isNextTo':_0x1d0026,'isInsideObject':_0x217134,'containsRangeInObject':_0x560aae}}),_0x3b5c91=!0x0;break;}}if(_0x3b5c91)break;}}return _0x2c7e35;}['_addSuggestionMarker'](_0x25a2a2,_0x1444ee,_0x3271b7,_0x374af7,_0x25148b){this['_model']['change'](_0x1d2126=>{let _0x313115='suggestion:'+_0x25a2a2+':'+_0x1444ee+':'+_0x3271b7;_0x25148b&&(_0x313115=_0x313115+':'+_0x25148b),_0x1d2126['addMarker'](_0x313115,{'range':_0x374af7,'usingOperation':!0x0,'affectsData':!0x0});});}['_removeSuggestion'](_0x3a7af6){const _0x275e89=_0x3a7af6['previous'],_0x16ffa1=_0x3a7af6['next'];_0x3a7af6['previous']=null,_0x3a7af6['next']=null,null!=_0x275e89&&_0x275e89['next']==_0x3a7af6&&(_0x275e89['next']=_0x16ffa1),null!=_0x16ffa1&&_0x16ffa1['previous']==_0x3a7af6&&(_0x16ffa1['previous']=_0x275e89),'ready'==this['_suggestionState']['get'](_0x3a7af6)&&(this['_suggestionState']['set'](_0x3a7af6,'removed'),this['fire']('suggestionUnloaded',_0x3a7af6,_0x275e89,_0x16ffa1));}['_setSuggestionData'](_0x52e51e){const _0x11e73f=_0x52e51e['id'],_0x59743f=this['addSuggestionData'](_0x52e51e);if(this['_adapter']&&this['_adapter']['addSuggestion']){const _0x1c581c=this['editor']['plugins']['get']('PendingActions'),_0x54071a=_0x59743f['hasComments'],_0x1a955b=_0x59743f['subType']?_0x59743f['type']+':'+_0x59743f['subType']:_0x59743f['type'],_0xe49c17=this['editor']['locale'],_0x37c3a5=_0x1c581c['add'](o(_0xe49c17,'PENDING_ACTION_SUGGESTION')),_0x42cb72={'id':_0x11e73f,'type':_0x1a955b,'hasComments':_0x54071a,'data':_0x52e51e['data']||null,'originalSuggestionId':_0x52e51e['originalSuggestionId']||null,'attributes':_0x59743f['attributes']};this['_adapter']['addSuggestion'](_0x42cb72)['then'](_0x257f88=>{_0x59743f['_saved']=!0x0,_0x1c581c['remove'](_0x37c3a5),_0x257f88&&_0x257f88['createdAt']&&(this['_suggestions']['get'](_0x11e73f)['createdAt']=_0x257f88['createdAt']);})['catch'](_0x4899cd=>{throw _0x34c1eb('error-saving-suggestion-data-suggestion-discarded'),this['editor']['model']['enqueueChange']({'isUndoable':!0x1},()=>{_0x59743f['discard']();}),_0x59743f['stopListening'](),this['_suggestions']['delete'](_0x59743f['id']),this['_suggestionState']['delete'](_0x59743f),_0x4899cd;});}return _0x59743f;}['_isBlockAttribute'](_0x5809a7){return this['_blockAttributeKeys']['has'](_0x5809a7);}['_updateSuggestionData'](_0x343572,_0x562085){const _0x2865cd=this['editor']['plugins']['get']('PendingActions'),_0x305691=this['getSuggestion'](_0x343572);if(this['_adapter']&&this['_adapter']['updateSuggestion']){if(_0x305691['_saved']){const _0x402a0e=_0x2865cd['add'](o(this['editor']['locale'],'PENDING_ACTION_SUGGESTION'));this['_adapter']['updateSuggestion'](_0x343572,_0x562085)['then'](()=>{_0x2865cd['remove'](_0x402a0e);});}else _0x305691['on']('change:_saved',()=>{this['_updateSuggestionData'](_0x343572,_0x562085);});}}['_getSuggestionData'](_0x141bb6){if(!this['_adapter']||!this['_adapter']['getSuggestion'])throw new _0x208bcb('track-changes-adapter-missing-getsuggestion',this);return this['_adapter']['getSuggestion'](_0x141bb6);}['_handleNewSuggestionMarker'](_0x117919){const {id:_0x1df8c7,type:_0x35d96a,subType:_0x20c80e,authorId:_0x1e760b}=this['_splitMarkerName'](_0x117919),_0x1b5d02=this['_suggestions']['get'](_0x1df8c7)||this['_createSuggestion'](_0x35d96a,_0x20c80e,_0x1df8c7,_0x1e760b,{});switch(this['_checkSuggestionCorrectness'](_0x1b5d02,_0x35d96a,_0x20c80e,_0x1e760b),this['_suggestionState']['get'](_0x1b5d02)){case'notReady':this['_getSuggestionData'](_0x1df8c7)['then'](_0x59995b=>{let _0x440556=Promise['resolve']();_0x59995b['hasComments']&&(_0x440556=this['_commentsRepository']['fetchCommentThread']({'channelId':this['editor']['config']['get']('collaboration.channelId'),'threadId':_0x1df8c7})),_0x440556['then'](()=>{this['addSuggestionData'](_0x59995b)['_saved']=!0x0;});}),this['_suggestionState']['set'](_0x1b5d02,'markerReady');break;case'removed':this['_updateSuggestionData'](_0x1df8c7,{'state':'open'});case'dataReady':this['_suggestionState']['set'](_0x1b5d02,'ready'),this['fire']('suggestionLoaded',_0x1b5d02);break;case'ready':this['fire']('suggestionChanged',_0x1b5d02);}return _0x1b5d02['addMarkerName'](_0x117919),_0x1b5d02;}['_refreshSuggestionsChain'](_0x401503){const _0x596353=Array['from'](_0x401503),_0x504710=_0x596353['filter'](_0x4c1664=>'attribute'==_0x4c1664['type']);this['_refreshAttributeSuggestionsChain'](_0x504710);const _0x3e3718=_0x596353['filter'](_0x54ca15=>!_0x54ca15['isMultiRange']&&'attribute'!=_0x54ca15['type']),_0x491d4b=this['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x3c7824=>!_0x3c7824['isMultiRange']&&'attribute'!=_0x3c7824['type']),_0x28074d=_0x491d4b['filter'](_0x43663d=>!_0x401503['has'](_0x43663d)),_0x40aed0=new Map(_0x491d4b['map'](_0x48066c=>[_0x48066c,this['_suggestionFactory']['getSuggestionCallback'](_0x48066c['type'],_0x48066c['subType'],'chain')])),_0xe65f51=new Map(_0x491d4b['map'](_0x4994b0=>[_0x4994b0,_0x4994b0['getFirstRange']()])),_0x6f46c8=new Set(),_0xad9446=new Set();for(let _0x498f6a=0x0;_0x498f6a<_0x3e3718['length'];_0x498f6a++)_0x296e57(_0x3e3718[_0x498f6a],_0x3e3718,_0x498f6a+0x1);for(let _0x2307bc=0x0;_0x2307bc<_0x3e3718['length'];_0x2307bc++)_0x296e57(_0x3e3718[_0x2307bc],_0x28074d,0x0);const _0x516201=new Set();for(let _0x26f858=0x0;_0x26f858<_0x3e3718['length'];_0x26f858++){const _0x531513=_0x3e3718[_0x26f858];!_0xad9446['has'](_0x531513)&&_0x531513['previous']&&(_0x516201['add'](_0x531513['previous']),_0x531513['previous']['next']===_0x531513&&(_0x531513['previous']['next']=null),_0x531513['previous']=null),!_0x6f46c8['has'](_0x531513)&&_0x531513['next']&&(_0x516201['add'](_0x531513['next']),_0x531513['next']['previous']===_0x531513&&(_0x531513['next']['previous']=null),_0x531513['next']=null);}function _0x296e57(_0x5d924d,_0xa7a204,_0x92ba77){for(let _0x18d815=_0x92ba77;_0x18d815<_0xa7a204['length'];_0x18d815++){const _0x5c74f7=_0x46616e(_0x5d924d,_0xa7a204[_0x18d815]);_0x5c74f7&&(_0x5c74f7[0x0]['next']=_0x5c74f7[0x1],_0x5c74f7[0x1]['previous']=_0x5c74f7[0x0],_0x6f46c8['add'](_0x5c74f7[0x0]),_0xad9446['add'](_0x5c74f7[0x1]));}}function _0x46616e(_0x37a17a,_0x54a497){if(_0x37a17a['author']['id']!==_0x54a497['author']['id'])return null;const _0x1213b2=_0x40aed0['get'](_0x37a17a)(_0x37a17a,_0x54a497,_0xe65f51['get'](_0x37a17a),_0xe65f51['get'](_0x54a497));if(!_0x1213b2)return null;return _0x40aed0['get'](_0x54a497)(_0x37a17a,_0x54a497,_0xe65f51['get'](_0x37a17a),_0xe65f51['get'](_0x54a497))?_0x1213b2[0x1]['commentThread']&&_0x1213b2[0x1]['commentThread']['length']?null:_0x1213b2:null;}_0x516201['size']&&this['_refreshSuggestionsChain'](_0x516201);}['_refreshAttributeSuggestionsChain'](_0x1c7d1c){if(0x0==_0x1c7d1c['length'])return;const _0x3e12ed=this['getSuggestions']({'skipNotAttached':!0x0})['filter'](_0x384c66=>'attribute'==_0x384c66['type']&&_0x384c66['_isDataLoaded']),_0x3fb103=[],_0xeb5955=new Map();for(const _0x50f11e of _0x3e12ed){const _0x19ee84=_0x2162a8(_0x50f11e['attributes']);_0xeb5955['has'](_0x19ee84)||(_0xeb5955['set'](_0x19ee84,_0x3fb103['length']),_0x3fb103['push']([]));const _0x5c7684=_0xeb5955['get'](_0x19ee84);_0x3fb103[_0x5c7684]['push'](_0x50f11e);}!(function(){_0x3fb103['sort']((_0x13a08f,_0x5e54f4)=>{const _0x4e03dd=_0x13a08f[0x0]['createdAt'],_0x2f9c48=_0x5e54f4[0x0]['createdAt'];return _0x4e03dd==_0x2f9c48?_0x13a08f[0x0]['attributes']['groupId']<_0x5e54f4[0x0]['attributes']['groupId']?-0x1:0x1:_0x4e03dd<_0x2f9c48?-0x1:0x1;});for(const _0x16b17d of _0x3fb103)_0x16b17d['sort']((_0xca7498,_0x3ca49d)=>_0xca7498['id']<_0x3ca49d['id']?-0x1:0x1);}());for(let _0x34542c=0x0;_0x34542c<_0x3fb103['length'];_0x34542c++){if(0x0==_0x3fb103[_0x34542c]['length'])continue;const _0x18adfa=[];for(let _0x34cd62=_0x34542c+0x1;_0x34cd62<_0x3fb103['length'];_0x34cd62++)0x0!=_0x3fb103[_0x34cd62]['length']&&_0x3692c4(_0x3fb103[_0x34542c],_0x3fb103[_0x34cd62])&&_0x18adfa['push'](_0x34cd62);for(const _0x9cce0d of _0x18adfa)_0x3fb103[_0x34542c]=_0x3fb103[_0x34542c]['concat'](_0x3fb103[_0x9cce0d]),_0x3fb103[_0x9cce0d]=[];}for(const _0x2c6513 of _0x3fb103)for(let _0x5e62ac=0x0;_0x5e62ac<_0x2c6513['length'];_0x5e62ac++){const _0x362305=_0x2c6513[_0x5e62ac+0x1]||null;_0x2c6513[_0x5e62ac]['next']!==_0x362305&&(_0x2c6513[_0x5e62ac]['next']=_0x362305);}for(const _0x57f5c6 of _0x3fb103)for(let _0x3200ae=0x0;_0x3200ae<_0x57f5c6['length'];_0x3200ae++){const _0x489754=_0x57f5c6[_0x3200ae-0x1]||null;_0x57f5c6[_0x3200ae]['previous']!==_0x489754&&(_0x57f5c6[_0x3200ae]['previous']=_0x489754);}function _0x3692c4(_0x315559,_0x57ee6d){if(_0x315559[0x0]['attributes']['groupId']!==_0x57ee6d[0x0]['attributes']['groupId']&&_0x315559[0x0]['author']!==_0x57ee6d[0x0]['author'])return!0x1;if(!function(_0x3f4368,_0x3b9165){if(!_0x3f4368['hasComments']&&!_0x3b9165['hasComments'])return!0x0;if(_0x3f4368['hasComments']&&_0x3b9165['hasComments'])return!0x1;if(_0x3f4368['hasComments']&&_0x3b9165['createdAt']<_0x3f4368['commentThread']['comments']['get'](0x0)['createdAt'])return!0x0;if(_0x3b9165['hasComments']&&_0x3f4368['createdAt']<_0x3b9165['commentThread']['comments']['get'](0x0)['createdAt'])return!0x0;return!0x1;}(_0x315559[0x0],_0x57ee6d[0x0]))return!0x1;const _0x2dc5ec=Rt(_0x315559[0x0]['attributes'],'groupId'),_0x56a382=Rt(_0x57ee6d[0x0]['attributes'],'groupId');if(!_0x991291(_0x2dc5ec,_0x56a382))return!0x1;return!!_0x315559['every'](_0x2e43b6=>_0x57ee6d['some'](_0x4c967e=>_0x2e43b6['getFirstRange']()['isEqual'](_0x4c967e['getFirstRange']())))&&_0x57ee6d['every'](_0xdbdedc=>_0x315559['some'](_0x1d74fb=>_0xdbdedc['getFirstRange']()['isEqual'](_0x1d74fb['getFirstRange']())));}}['_joinWithAdjacentSuggestions'](_0x193ced){const _0x1ab50d=Array['from'](_0x193ced),_0x331406=this['getSuggestions']({'skipNotAttached':!0x0}),_0x4065ac=_0x331406['filter'](_0x3f4be5=>!_0x193ced['has'](_0x3f4be5)),_0xef7c57=new Map(_0x1ab50d['map'](_0x53735c=>[_0x53735c,this['_suggestionFactory']['getSuggestionCallback'](_0x53735c['type'],_0x53735c['subType'],'join')])),_0x2048f5=new Map(_0x331406['map'](_0x1b983c=>[_0x1b983c,_0x1b983c['getRanges']()]));for(let _0x53d103=0x0;_0x53d103<_0x1ab50d['length'];_0x53d103++){if(_0x53be46(this,_0x1ab50d[_0x53d103],_0x1ab50d,_0x53d103+0x1))return!0x0;}for(let _0x5455de=0x0;_0x5455de<_0x1ab50d['length'];_0x5455de++){if(_0x53be46(this,_0x1ab50d[_0x5455de],_0x4065ac,0x0))return!0x0;}return!0x1;function _0x53be46(_0x428d09,_0x55adae,_0x1cd2cd,_0x9ae388){for(let _0xdd6d57=_0x9ae388;_0xdd6d57<_0x1cd2cd['length'];_0xdd6d57++){const _0x2bb896=_0x1cd2cd[_0xdd6d57];if(_0x2bb896['type']!==_0x55adae['type']||_0x2bb896['author']['id']!==_0x55adae['author']['id']||_0x2bb896['subType']!==_0x55adae['subType'])continue;if(!Jt(_0x55adae,_0x2bb896))continue;if('attribute'==_0x55adae['type']&&_0x55adae['data']['oldValue']!=_0x2bb896['data']['oldValue'])continue;if('attribute'==_0x55adae['type']&&_0x428d09['_isBlockAttribute'](_0x55adae['data']['key']))continue;if('formatBlock'==_0x55adae['type']){const _0x3d5c78=_0x428d09['editor']['model'],_0x16f3d2=_0x55adae['getContainedElement']();if(_0x16f3d2&&(_0x3d5c78['schema']['isObject'](_0x16f3d2)||_0x3d5c78['schema']['isLimit'](_0x16f3d2)))continue;}const _0x9544ed=_0xef7c57['get'](_0x55adae),_0x589fe4=_0x2048f5['get'](_0x55adae),_0x28a760=_0x2048f5['get'](_0x2bb896),_0x1a6ec3=_0x55adae['commentThread']&&_0x55adae['commentThread']['length'],_0x53b230=_0x2bb896['commentThread']&&_0x2bb896['commentThread']['length'];if(!_0x1a6ec3&&_0x9544ed(_0x28a760,_0x589fe4))return _0x428d09['_joinSuggestions'](_0x2bb896,_0x55adae),_0x2048f5['delete'](_0x55adae),!0x0;if(!_0x53b230&&_0x9544ed(_0x589fe4,_0x28a760))return _0x428d09['_joinSuggestions'](_0x55adae,_0x2bb896),_0x2048f5['delete'](_0x2bb896),!0x0;}return!0x1;}}['_joinSuggestions'](_0x2dc2fa,_0x1ee406){if(_0x2dc2fa['isMultiRange']){for(const _0x1b381e of _0x1ee406['getRanges']())_0x2dc2fa['addRange'](_0x1b381e);}else{const _0x37ad19=_0x1ee406['getFirstRange']()['end'];this['_setSuggestionRange'](_0x2dc2fa,this['_model']['createRange'](_0x2dc2fa['getFirstRange']()['start'],_0x37ad19));}_0x1ee406['removeMarkers']();}['_getMarkerAnnouncementText'](_0x30b2bb,_0x5d5219,_0x114a8e){const _0x58be13=_0x30b2bb['startsWith']('format')||_0x30b2bb['startsWith']('attribute')?'FORMATTING':_0x30b2bb['toUpperCase']();return o(this['editor']['locale'],_0x5d5219+'_'+_0x58be13+'_SUGGESTION_ANNOUNCEMENT',_0x114a8e);}['_initAriaMarkerChangeAnnouncements'](){const _0x999659=this['editor'];if(!_0x999659['ui'])return;const {ariaLiveAnnouncer:_0xa81a47}=_0x999659['ui'];_0x52d039(this['_model'],({left:_0x15c489,entered:_0x41e0c8})=>{for(const _0x19a079 of _0x15c489){const {group:_0x3c867a,type:_0x15b6a9}=this['_splitMarkerName'](_0x19a079['name']);if('suggestion'===_0x3c867a){_0xa81a47['announce'](this['_getMarkerAnnouncementText'](_0x15b6a9,'LEAVE'));break;}}for(const _0x548912 of _0x41e0c8){const {group:_0x19da26,type:_0x4e26a3}=this['_splitMarkerName'](_0x548912['name']);if('suggestion'===_0x19da26){_0xa81a47['announce'](this['_getMarkerAnnouncementText'](_0x4e26a3,'ENTER',_0x244bcf(_0x283245)));break;}}});}['_processAttributeChanges'](_0x535d5e){if(this['_recordAttributeSuggestions'])return!0x1;const _0x4e72e3=this['editor'],_0x1eb93b=_0x4e72e3['model']['document']['differ']['getChanges']();if(0x0==_0x1eb93b['length'])return!0x1;const _0x243f4d=[],_0xa5c2ad=_0x1eb93b['filter'](_0x50cf50=>'attribute'==_0x50cf50['type']),_0x430447=_0x1eb93b['filter'](_0x5736e4=>'insert'==_0x5736e4['type']&&'$text'!=_0x5736e4['name']),_0x517092=_0x1eb93b['filter'](_0x9b70b2=>'remove'==_0x9b70b2['type']&&'$text'!=_0x9b70b2['name']);for(const _0x3f1554 of _0xa5c2ad)_0x243f4d['push']({'key':_0x3f1554['attributeKey'],'newValue':_0x3f1554['attributeNewValue'],'oldValue':_0x3f1554['attributeOldValue'],'range':Ft(_0x3f1554['range'],_0x4e72e3['model'])});for(const _0xb20229 of _0x430447){const _0x374dd3=_0x517092['find'](_0x43b8b7=>_0x43b8b7['position']['isEqual'](_0xb20229['position']));_0x374dd3&&_0x243f4d['push']({'key':m,'newValue':_0xb20229['name'],'oldValue':_0x374dd3['name'],'range':_0x4e72e3['model']['createRangeOn'](_0xb20229['position']['nodeAfter'])});}return 0x0!=_0x243f4d['length']&&this['_reduceExistingSuggestions'](_0x535d5e,_0x243f4d);}['_processAttributeSuggestions'](_0x2c7393){let _0xc7dd35=!0x1;const _0x16c97b=this['editor']['model']['document']['differ']['getChangedMarkers']()['filter'](_0x2d6133=>_0x2d6133['data']['newRange']&&_0x2d6133['name']['startsWith']('suggestion:attribute:'));for(const _0x1e421b of _0x16c97b){const {subType:_0x364eb1,id:_0x21cb58}=this['_splitMarkerName'](_0x1e421b['name']),_0x2f77c2=_0x364eb1['split']('|')[0x0];for(const _0x19978f of this['getSuggestions']({'skipNotAttached':!0x0}))_0x19978f['id']!=_0x21cb58&&'attribute'==_0x19978f['type']&&_0x19978f['data']&&_0x19978f['data']['key']==_0x2f77c2&&_0x19978f['getFirstRange']()['isIntersecting'](_0x1e421b['data']['newRange'])&&(this['_reduceSuggestionAttributeRange'](_0x19978f,_0x1e421b['data']['newRange'],_0x2c7393),_0xc7dd35=!0x0);}return _0xc7dd35;}['_recordAttributeChanges'](_0x30defb){this['_recordAttributeSuggestions']=!0x0,_0x30defb();}['_isRegisteredAttribute'](_0x26c8b0){const _0x1554d0=this['_isBlockAttribute'](_0x26c8b0),_0x3d9f2b=this['_inlineAttributeKeys']['has'](_0x26c8b0);return _0x1554d0||_0x3d9f2b;}['_reduceExistingSuggestions'](_0x5ed256,_0x1869f1){if(0x0==_0x1869f1['length'])return!0x1;let _0x13a06f=!0x1;for(const _0x33de25 of _0x1869f1){const _0x565e3c=this['_findSuggestions'](_0x33de25['range'],'attribute')['filter'](_0x197f2c=>!_0x197f2c['meta']['isNextTo'])['map'](_0xc93da7=>_0xc93da7['suggestion']),_0x340e5f=_0x2162a8({'newValue':_0x33de25['newValue']});_0x565e3c['filter'](_0x5fd8ed=>{const [_0x398af4,_0x4a9801]=_0x5fd8ed['subType']['split']('|');return _0x398af4==_0x33de25['key']&&_0x4a9801!=_0x340e5f;})['forEach'](_0x5d228a=>{this['_reduceSuggestionAttributeRange'](_0x5d228a,_0x33de25['range'],_0x5ed256),_0x13a06f=!0x0;});}return _0x13a06f;}['_reduceSuggestionAttributeRange'](_0x5b0f0e,_0x3c74d1,_0x367fdf){const _0x5ad4da=_0x5b0f0e['getFirstRange']()['getDifference'](_0x3c74d1);0x0!==_0x5ad4da['length']?0x1!==_0x5ad4da['length']?this['_breakSuggestionMarker'](_0x5b0f0e,_0x3c74d1['start'],_0x3c74d1['end']):this['_setSuggestionRange'](_0x5b0f0e,_0x5ad4da[0x0]):_0x367fdf['removeMarker'](_0x5b0f0e['getFirstMarker']());}}class Tt{['_editor'];['_model'];['_customCallbacks'];['_defaultCallbacks'];constructor(_0x2b7120){this['_editor']=_0x2b7120,this['_model']=_0x2b7120['model'],this['_customCallbacks']=new Map(),this['_defaultCallbacks']=new Map(),this['_registerDefaultCallbacks']();}['buildSuggestion'](_0x3c724c,_0x4bd220,_0x200102,_0x4e4d80,_0x263704,_0x40213a){return new u(this['_model'],{'type':_0x3c724c,'subType':_0x4bd220,'id':_0x200102,'author':_0x4e4d80,'creator':_0x4e4d80,'attributes':_0x263704,'onAttributesChange':_0x40213a,'onAccept':(..._0x2ee0e3)=>this['getSuggestionCallback'](_0x3c724c,_0x4bd220,'accept')(..._0x2ee0e3),'onDiscard':(..._0x3eb3ab)=>this['getSuggestionCallback'](_0x3c724c,_0x4bd220,'discard')(..._0x3eb3ab)});}['registerCustomCallback'](_0x35732f,_0x4da1b8,_0x43f1ec,_0x274228){const _0x1b086c=_0x35732f+':'+_0x4da1b8+':'+_0x43f1ec;this['_customCallbacks']['set'](_0x1b086c,_0x274228);}['getSuggestionCallback'](_0x4c69d9,_0x3b3a45,_0x48cf7c){const _0x3b8e4c=_0x4c69d9+':'+_0x3b3a45+':'+_0x48cf7c;return this['_customCallbacks']['get'](_0x3b8e4c)||this['_defaultCallbacks']['get'](_0x4c69d9+':'+_0x48cf7c);}['_registerDefaultCallbacks'](){const _0x339322=()=>!0x1,_0x31b538=_0x10c518=>{_0x10c518['sort']((_0x2a8a71,_0xd2123e)=>_0x2a8a71['start']['isBefore'](_0xd2123e['start'])?0x1:-0x1),this['_model']['change'](_0x36dc64=>{for(const _0x2b180a of _0x10c518){let _0x94514c;_0x94514c=_0x2b180a['end']['isAtEnd']&&_0x2b180a['end']['parent']==_0x2b180a['start']['nodeAfter']?_0x36dc64['createSelection'](_0x2b180a['start']['nodeAfter'],'on'):_0x36dc64['createSelection'](_0x2b180a),this['_model']['deleteContent'](_0x94514c,{'forceDefaultExecution':!0x0,'doNotAutoparagraph':!0x0});}});},_0xd589bb=(_0x216988,_0x33da94)=>{_0x33da94&&this['_model']['change'](_0x5b52a9=>{const {commandName:_0x37760b,commandParams:_0x4a1cb6=[]}=_0x33da94,_0x45b6a4=_0x216988['map'](_0x4b4fb0=>(Vt(_0x4b4fb0)&&(_0x4b4fb0=this['_model']['createRange'](_0x4b4fb0['end'])),_0x4b4fb0))['filter'](_0x4add30=>'$graveyard'!==_0x4add30['root']['rootName']);if(_0x45b6a4['length']<0x1)return;const _0xb488a=Array['from'](this['_model']['document']['selection']['getRanges']())['map'](_0x4a8d49=>_0x3a44ac['fromRange'](_0x4a8d49));_0x5b52a9['setSelection'](_0x45b6a4);for(const _0x229d07 of this['_editor']['commands']['commands']())_0x229d07['refresh']();_0x4a1cb6['push']({'forceDefaultExecution':!0x0}),this['_editor']['execute'](_0x37760b,..._0x4a1cb6);const _0x5c002f=_0xb488a['filter'](_0x2a0f20=>'$graveyard'!=_0x2a0f20['root']['rootName']);_0x5c002f['length']>0x0&&_0x5b52a9['setSelection'](_0x5c002f);for(const _0x3ccfe5 of _0xb488a)_0x3ccfe5['detach']();});},_0x26ef5b=(_0x217f3b,_0xa5cc6e)=>0x1==_0x217f3b['length']&&0x1==_0xa5cc6e['length']&&_0x217f3b[0x0]['end']['isEqual'](_0xa5cc6e[0x0]['start']),_0x109de6=(_0x423a39,_0x5b0694,_0x15e106,_0x426403)=>Ht(_0x423a39,_0x5b0694,_0x15e106,_0x426403,this['_model'])?[_0x423a39,_0x5b0694]:Ht(_0x5b0694,_0x423a39,_0x426403,_0x15e106,this['_model'])?[_0x5b0694,_0x423a39]:null;this['_defaultCallbacks']['set']('insertion:accept',_0x339322),this['_defaultCallbacks']['set']('insertion:discard',_0x31b538),this['_defaultCallbacks']['set']('insertion:join',_0x26ef5b),this['_defaultCallbacks']['set']('insertion:chain',_0x109de6),this['_defaultCallbacks']['set']('deletion:accept',_0x31b538),this['_defaultCallbacks']['set']('deletion:discard',_0x339322),this['_defaultCallbacks']['set']('deletion:join',_0x26ef5b),this['_defaultCallbacks']['set']('deletion:chain',_0x109de6),this['_defaultCallbacks']['set']('formatInline:accept',_0xd589bb),this['_defaultCallbacks']['set']('formatInline:discard',_0x339322),this['_defaultCallbacks']['set']('formatInline:join',_0x26ef5b),this['_defaultCallbacks']['set']('formatInline:chain',_0x339322),this['_defaultCallbacks']['set']('formatBlock:accept',_0xd589bb),this['_defaultCallbacks']['set']('formatBlock:discard',_0x339322),this['_defaultCallbacks']['set']('formatBlock:join',_0x26ef5b),this['_defaultCallbacks']['set']('formatBlock:chain',_0x339322),this['_defaultCallbacks']['set']('attribute:accept',_0x339322),this['_defaultCallbacks']['set']('attribute:discard',(_0x28b97f,_0x50aa6d)=>{if(!_0x50aa6d)return;const _0x54c875=this['_editor']['plugins']['get'](p);this['_model']['change'](_0x33b990=>{if(_0x50aa6d['key']==m)for(const _0xa3a032 of _0x28b97f){const _0x5ef862=_0xa3a032['start']['nodeAfter'],_0x239fa2=_0x50aa6d['oldValue'];_0x33b990['rename'](_0x5ef862,_0x239fa2);}else{if(_0x54c875['_isBlockAttribute'](_0x50aa6d['key'])){for(const _0x2c6def of _0x28b97f)void 0x0!==_0x50aa6d['oldValue']?_0x33b990['setAttribute'](_0x50aa6d['key'],_0x50aa6d['oldValue'],_0x2c6def['start']['nodeAfter']):_0x33b990['removeAttribute'](_0x50aa6d['key'],_0x2c6def['start']['nodeAfter']);}else{for(const _0x28abc0 of _0x28b97f)_0x50aa6d['oldValue']?_0x33b990['setAttribute'](_0x50aa6d['key'],_0x50aa6d['oldValue'],_0x28abc0):_0x33b990['removeAttribute'](_0x50aa6d['key'],_0x28abc0);}}});}),this['_defaultCallbacks']['set']('attribute:join',_0x26ef5b);}}function Et(_0x35034a,_0x29b815,_0xee0f2e){for(const _0x54817c of _0x29b815['parent']['getAncestors']({'includeSelf':!0x0,'parentFirst':!0x0})){if(_0x54817c['root']==_0x54817c)return!0x1;if(!_0xee0f2e['containsItem'](_0x54817c))return!0x1;if(_0x35034a['isObject'](_0x54817c)||_0x35034a['isLimit'](_0x54817c))return!0x0;}return!0x1;}function Vt(_0xec1698){return _0xec1698['end']['parent']==_0xec1698['start']['nodeAfter']&&_0xec1698['end']['isAtStart'];}function Ut(_0x3d2e13,_0x1cda47,_0x3bb81e,_0x51beef){const _0x570b62=_0x5c5e5e=>!_0x5c5e5e['item']['is']('$textProxy')&&!_0x51beef['isObject'](_0x5c5e5e['item']),_0x209ff3=_0x3d2e13['start']['getLastMatchingPosition'](_0x570b62),_0x917fcc=_0x3d2e13['end']['getLastMatchingPosition'](_0x570b62,{'direction':'backward'});return(!_0x3d2e13['start']['isEqual'](_0x209ff3)||!_0x3d2e13['end']['isEqual'](_0x917fcc))&&(_0x209ff3['isBefore'](_0x917fcc)?_0x3bb81e['updateMarker'](_0x1cda47,{'range':_0x3bb81e['createRange'](_0x209ff3,_0x917fcc)}):_0x3bb81e['removeMarker'](_0x1cda47),!0x0);}function Pt(_0x387642){return _0x2162a8(_0x387642);}function Gt(_0x260b75){const _0x544d80=_0x260b75['start']['nodeAfter'];return _0x544d80&&_0x544d80['is']('element');}function Ft(_0x36f7f5,_0x44840c){return null==_0x36f7f5['end']['nodeBefore']&&_0x36f7f5['end']['parent']==_0x36f7f5['start']['nodeAfter']?Lt(_0x36f7f5['start']['nodeAfter'],_0x44840c):_0x36f7f5;}function Lt(_0x1aedb0,_0x5bb054){const _0x5f129a=_0x5bb054['schema']['isObject'](_0x1aedb0)||_0x5bb054['schema']['isSelectable'](_0x1aedb0);return _0x5bb054['createRange'](_0x5bb054['createPositionAt'](_0x1aedb0,'before'),_0x5f129a?_0x5bb054['createPositionAfter'](_0x1aedb0):_0x5bb054['createPositionAt'](_0x1aedb0,'end'));}function Ht(_0x2c2c4b,_0x2f4399,_0xb84654,_0xc29ae0,_0xa84b89){if(_0x2c2c4b['next'])return!0x1;if(!Jt(_0x2c2c4b,_0x2f4399))return!0x1;if(_0xb84654['end']['isEqual'](_0xc29ae0['start']))return!0x0;if(_0x2c2c4b['type']!=_0x2f4399['type'])return!0x1;if(!_0xb84654['end']['isTouching'](_0xc29ae0['start']))return!0x1;const _0x465dd3=_0xa84b89['createRange'](_0xb84654['end'],_0xc29ae0['start'])['getWalker']();for(const _0xa87e91 of _0x465dd3)if(['elementStart','elementEnd']['includes'](_0xa87e91['type'])&&_0xa84b89['schema']['isLimit'](_0xa87e91['item']))return!0x1;return!0x0;}function Jt(_0x21f910,_0x5d76f2){if(!_0x21f910['_isDataLoaded']||!_0x5d76f2['_isDataLoaded'])return!0x1;const _0x5ed611=new Set(Object['keys'](_0x21f910['attributes'])),_0x33b399=new Set(Object['keys'](_0x5d76f2['attributes']));if(_0x5ed611['delete']('groupId'),_0x33b399['delete']('groupId'),0x0==_0x5ed611['size']&&0x0==_0x33b399['size'])return!0x0;if(_0x5ed611['size']!=_0x33b399['size'])return!0x1;const _0x5e9019={..._0x21f910['attributes']},_0x315b37={..._0x5d76f2['attributes']};return delete _0x5e9019['groupId'],delete _0x315b37['groupId'],JSON['stringify'](_0x5e9019)==JSON['stringify'](_0x315b37);}function qt(_0xe1c93d,_0x39f3f0){const _0x530efb=zt(_0xe1c93d['attributes']),_0x574849=zt(_0x39f3f0);if(!_0xe1c93d['_isDataLoaded'])return!0x1;for(const _0x5e62d6 of Object['keys'](_0x574849))if(!_0x991291(_0x530efb[_0x5e62d6],_0x574849[_0x5e62d6]))return!0x1;return!0x0;}function zt(_0x320d2d){const _0xff34fc=Object['assign']({},_0x320d2d);return delete _0xff34fc['skipNestingCheck'],delete _0xff34fc['tablePasteChainId'],_0xff34fc;}class ae extends/* #__PURE__ -- @preserve */
_0x5898eb(){['model'];['view'];['commentThreadController'];['_editor'];['_acceptCommand'];['_discardCommand'];['_pendingAction'];constructor(_0x4ddf21,_0xb441a3,_0x58c11c,_0xb37baa){super(),this['model']=_0xb441a3,this['view']=_0x58c11c,this['commentThreadController']=_0xb37baa,this['_editor']=_0x4ddf21,this['_acceptCommand']=_0x4ddf21['commands']['get']('acceptSuggestion'),this['_discardCommand']=_0x4ddf21['commands']['get']('discardSuggestion'),this['view']['bind']('isEnabled')['to'](this['_acceptCommand'],this['_discardCommand'],(_0x51c01e,_0x4cf9af)=>_0x51c01e||_0x4cf9af),this['view']['bind']('canAccept')['to'](this['_acceptCommand'],'isEnabled',_0x20bdb9=>_0x20bdb9&&this['_editor']['model']['canEditAt'](_0xb441a3['getRanges']())),this['view']['bind']('canDiscard')['to'](this['_discardCommand'],'isEnabled',_0x33d310=>_0x33d310&&this['_editor']['model']['canEditAt'](_0xb441a3['getRanges']())),this['_pendingAction']=null,_0x58c11c['isDirty']&&this['_setPendingAction'](),this['listenTo'](_0x58c11c,'acceptSuggestion',()=>this['acceptSuggestion']()),this['listenTo'](_0x58c11c,'discardSuggestion',()=>this['discardSuggestion']()),this['listenTo'](_0x58c11c,'change:isDirty',()=>{_0x58c11c['isDirty']?this['_setPendingAction']():this['_removePendingAction']();});}['acceptSuggestion'](){this['_acceptCommand']['execute'](this['model']['id']);}['discardSuggestion'](){this['_discardCommand']['execute'](this['model']['id']);}['destroy'](){this['view']['unbind']('isEnabled'),this['view']['unbind']('canAccept'),this['view']['unbind']('canDiscard'),this['stopListening'](),this['commentThreadController']['destroy'](),this['_pendingAction']&&this['_removePendingAction']();}['_setPendingAction'](){const _0x138140=o(this['_editor']['locale'],'PENDING_ACTION_SUGGESTION');this['_pendingAction']=this['_editor']['plugins']['get']('PendingActions')['add'](_0x138140);}['_removePendingAction'](){null!==this['_pendingAction']&&this['_editor']['plugins']['get']('PendingActions')['remove'](this['_pendingAction']),this['_pendingAction']=null;}}class us extends _0x57133b{['commentsListView'];['commentThreadInputView'];['ariaDescriptionView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_localUser'];['_config'];constructor(_0x56e2e7,_0x55c5eb,_0x3c0380,_0xd7c3c0){super(_0x56e2e7),this['commentsListView']=null,this['commentThreadInputView']=null,this['ariaDescriptionView']=new _0x31bfef(_0x56e2e7,o(_0x56e2e7,'SUGGESTION_THREAD_DESCRIPTION')),this['set']('isActive',!0x1),this['set']('authoredAt',_0x55c5eb['authoredAt']),this['bind']('authoredAt')['to'](_0x55c5eb),this['set']('descriptionParts',[]),this['set']('isDirty',!0x1),this['set']('isEnabled',!0x1),this['set']('canAccept',!0x1),this['set']('canDiscard',!0x1),this['bind']('ariaLabel')['to'](this,'length',_0x55c5eb,'authoredAt',this,'descriptionParts',(_0x254883,_0x4f02bb,_0x59344c)=>{const _0x25b1f5=_0x59344c['map'](_0x1a0281=>ls(_0x1a0281['content']))['join']('.\x20')+'.';return o(this['locale'],'SUGGESTION_THREAD_ARIA_LABEL',[_0x254883-0x1,_0x55c5eb['author']['name'],_0x4f02bb?_0xd7c3c0['formatDateTime'](_0x4f02bb):'',new DOMParser()['parseFromString'](_0x25b1f5,'text/html')['body']['textContent']]);}),this['focusables']=new _0x534e8d(),this['focusTracker']=new _0x1fcb16(),this['keystrokes']=new _0xe419f6(),this['focusCycler']=new _0xdab5ab({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x5c03c3=>_0x5c03c3['target']!==this['element']},'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['_model']=_0x55c5eb,this['_localUser']=_0x3c0380,this['_config']=_0xd7c3c0,_0xd7c3c0['disableComments']?this['set']('length',0x1):this['_createCommentViews']();}['render'](){super['render'](),_0x38dc1d(this,this['focusables']);}['focus'](){this['element']['focus']();}['destroy'](){this['commentsListView']&&this['commentsListView']['destroy'](),this['commentThreadInputView']&&this['commentThreadInputView']['destroy'](),super['destroy']();}['_createCommentViews'](){const {CommentsListView:_0x38df09}=this['_config'];this['commentsListView']=new _0x38df09(this['locale'],this['_model']['commentThread'],Object['assign']({'CommentView':this['_config']['CommentView']},this['_config'])),this['commentsListView']['delegate']('removeComment')['to'](this),this['commentsListView']['delegate']('updateComment')['to'](this),this['commentsListView']['bind']('isActive')['to'](this),this['set']('length',this['commentsListView']['length']+0x1),this['bind']('length')['to'](this['commentsListView'],'length',_0x24e51e=>_0x24e51e+0x1),this['commentThreadInputView']=this['_createCommentThreadInputView'](),this['on']('removeComment',()=>this['focus']()),this['bind']('isDirty')['to'](this['commentsListView'],'hasDirtyComment',this['commentThreadInputView']['commentInputView'],'value',(_0x3bc20a,_0x453b3e)=>_0x3bc20a||!!_0x453b3e);}['_createCommentThreadInputView'](){const {CommentThreadInputView:_0x16f24b}=this['_config'],_0xb7fb7f=new _0x16f24b(this['locale'],this['_localUser'],this['_config']['editorConfig']),_0x15eddf=_0xb7fb7f['commentInputView'];return _0xb7fb7f['bind']('showInput')['to'](this,'isActive',this['_model']['commentThread'],'isReadOnly',_0x15eddf,'value',(_0x21ee94,_0xd87bb1,_0x24fa15)=>!!_0x24fa15||_0x21ee94&&!_0xd87bb1),_0x15eddf['on']('submit',(_0x21e014,_0x1ca470)=>{this['fire']('addComment',_0x1ca470),_0x15eddf['editor']['setData']('');}),_0x15eddf['on']('cancel',()=>this['focus']()),_0x15eddf['bind']('disabledSubmit')['to'](this['_model']['commentThread'],'isReadOnly'),_0xb7fb7f;}}class re extends us{['suggestionView'];['_descriptionElement'];constructor(_0x15edae,_0x4ab4fe,_0x5c5eb5,_0xdd9ba9){super(_0x15edae,_0x4ab4fe,_0x5c5eb5,_0xdd9ba9),this['set']('type',''),this['bind']('type')['to'](this,'descriptionParts',_0x4a1c1f=>_0x4a1c1f&&_0x4a1c1f[0x0]?_0x4a1c1f[0x0]['type']:''),this['bind']('description')['to'](this,'descriptionParts',this,'isActive',(_0x4b02aa,_0x37450c)=>{let _0x4736f2='';for(const _0x1ed8fc of _0x4b02aa)_0x4736f2+='<p>'+ls(_0x1ed8fc['content'],_0x1ed8fc['color'])+'</p>';return _0x37450c?_0x4736f2:_0xf2e268(_0x4736f2,{'limit':0x8c});}),this['_descriptionElement']=null,this['suggestionView']=new _0xdd9ba9['SuggestionView'](_0x15edae,_0x4ab4fe,{'formatDateTime':_0xdd9ba9['formatDateTime']}),this['suggestionView']['bind']('description')['to'](this),this['suggestionView']['delegate']('acceptSuggestion','discardSuggestion')['to'](this),this['suggestionView']['acceptButton']['bind']('isEnabled')['to'](this,'canAccept'),this['suggestionView']['discardButton']['bind']('isEnabled')['to'](this,'canDiscard'),this['focusables']['add'](this['suggestionView']),this['commentsListView']&&this['focusables']['add'](this['commentsListView']),this['commentThreadInputView']&&this['focusables']['add'](this['commentThreadInputView']),this['setTemplate'](this['getTemplate']());}['getTemplate'](){const _0x4ca9e5=this['bindTemplate'],_0x5a0dd5=[this['suggestionView']];return this['commentsListView']&&_0x5a0dd5['push'](this['commentsListView']),this['commentThreadInputView']&&_0x5a0dd5['push'](this['commentThreadInputView']),_0x5a0dd5['push'](this['ariaDescriptionView']),{'tag':'div','attributes':{'class':['ck','ck-rounded-corners','ck-suggestion-wrapper',_0x4ca9e5['if']('isActive','ck-suggestion-wrapper--active'),_0x4ca9e5['to']('type',_0x343648=>'ck-suggestion-'+_0x343648),this['_config']['disableComments']&&'ck-suggestion--disabled-comments'],'data-suggestion-id':this['_model']['id'],'data-thread-id':this['_model']['commentThread']['id'],'data-author-id':this['_model']['author']['id'],'tabindex':0x0,'role':'listitem','aria-label':_0x4ca9e5['to']('ariaLabel'),'aria-describedby':this['ariaDescriptionView']['id']},'children':_0x5a0dd5};}['render'](){super['render'](),this['commentsListView']&&(this['commentsListView']['delegate']('editorReady')['to'](this),this['commentsListView']['delegate']('editorDestroyed')['to'](this)),this['commentThreadInputView']&&(this['commentThreadInputView']['delegate']('editorReady')['to'](this),this['commentThreadInputView']['delegate']('editorDestroyed')['to'](this));}}class ce extends _0x57133b{['userView'];['acceptButton'];['discardButton'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_config'];constructor(_0x378f80,_0x3db21f,_0x4ca4d0){super(_0x378f80),this['_model']=_0x3db21f,this['_config']=_0x4ca4d0,this['set']('description',''),this['bind']('authoredAt')['to'](_0x3db21f),this['acceptButton']=this['_createButton'](o(_0x378f80,'Accept\x20suggestion'),_0x287c41['check'],'ck-suggestion--accept','acceptSuggestion','sw'),this['discardButton']=this['_createButton'](o(_0x378f80,'Discard\x20suggestion'),_0x287c41['cancel'],'ck-suggestion--discard','discardSuggestion','sw'),this['userView']=new _0x5c548e(_0x378f80,_0x3db21f['author'],this['getUserViewNotificationText']()),this['userView']['extendTemplate']({'attributes':{'class':['ck-suggestion__user','ck-annotation__user'],'aria-hidden':!0x0}}),this['focusables']=new _0x534e8d([this['acceptButton'],this['discardButton']]),this['focusTracker']=new _0x1fcb16(),this['keystrokes']=new _0xe419f6(),this['focusCycler']=new _0xdab5ab({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'},'keystrokeHandlerOptions':{'filter':_0x24344b=>_0x24344b['target']!==this['element']}}),this['setTemplate'](this['getTemplate']());}['render'](){super['render']();const _0x49f8f8=this['element']['querySelector']('.ck-annotation__content-wrapper');_0x49f8f8['innerHTML']=this['description'],this['on']('change:description',(_0x16e40c,_0x248fb7,_0x214bea)=>{_0x49f8f8['innerHTML']=_0x214bea;}),this['_setupKeyboardNavigation']();}['getTemplate'](){const _0x1f6826=this['bindTemplate'],_0x3696ff=[{'tag':'div','attributes':{'class':['ck-suggestion__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-suggestion__info-name','ck-annotation__info-name']}},{'tag':'time','attributes':{'datetime':_0x1f6826['to']('authoredAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x1f6826['to']('authoredAt',_0x1be679=>this['_config']['formatDateTime'](_0x1be679))}]}]},{'tag':'div','attributes':{'class':['ck-suggestion__actions','ck-annotation__actions']},'children':[this['acceptButton'],this['discardButton']]},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']}}];return this['_model']['isExternal']&&_0x3696ff['push']({'tag':'div','attributes':{'class':['ck-comment__external']},'children':[{'text':this['getExternalSuggestionNote']()}]}),{'tag':'div','attributes':{'class':['ck-suggestion','ck-annotation'],'tabindex':-0x1},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-suggestion__main','ck-annotation__main'],'role':'presentation'},'children':_0x3696ff}]};}['focus'](){this['element']['focus']();}['getUserViewNotificationText'](){return this['_model']['isExternal']?'importWord'===this['_model']['attributes']['@external']['source']?o(this['locale'],'EXTERNAL_IMPORT_WORD_AVATAR',this['_model']['creator']['name']):o(this['locale'],'EXTERNAL_AVATAR',this['_model']['creator']['name']):null;}['getExternalSuggestionNote'](){return'importWord'===this['_model']['attributes']['@external']['source']?o(this['locale'],'EXTERNAL_IMPORT_WORD_SUGGESTION'):o(this['locale'],'EXTERNAL_SUGGESTION');}['_createButton'](_0x10fafc,_0x2e7468,_0x557f1c,_0x18f5a3,_0x5cc37e){const _0x4e1ede=new _0x20bc20(this['locale']);return _0x4e1ede['set']({'label':_0x10fafc,'icon':_0x2e7468,'tooltip':!0x0,'tooltipPosition':_0x5cc37e}),_0x4e1ede['extendTemplate']({'attributes':{'class':_0x557f1c}}),_0x4e1ede['on']('execute',()=>{this['fire'](_0x18f5a3,this['_model']['id']);}),_0x4e1ede;}['_setupKeyboardNavigation'](){const _0x1113ed=this['element'];this['keystrokes']['listenTo'](_0x1113ed);for(const _0x17a5f7 of this['focusables'])this['focusTracker']['add'](_0x17a5f7['element']),this['keystrokes']['listenTo'](_0x17a5f7['element']);this['keystrokes']['set']('enter',(_0x401f41,_0x5a3d59)=>{_0x1113ed===_0x401f41['target']&&(this['focusCycler']['focusFirst'](),_0x5a3d59());}),this['keystrokes']['set']('esc',(_0x41bab5,_0x2658a2)=>{_0x1113ed!==_0x41bab5['target']&&(this['focus'](),_0x2658a2());});}}var he='<!--\x0a\x0a\x20What\x20you\x27re\x20currently\x20looking\x20at\x20is\x20the\x20source\x20code\x20of\x20a\x20legally\x20protected,\x20proprietary\x20software.\x0a\x20CKEditor\x205\x20Collaboration\x20is\x20licensed\x20under\x20a\x20commercial\x20license\x20and\x20protected\x20by\x20copyright\x20law.\x20Where\x20not\x20otherwise\x20indicated,\x0a\x20all\x20CKEditor\x205\x20Collaboration\x20content\x20is\x20authored\x20by\x20CKSource\x20engineers\x20and\x20consists\x20of\x20CKSource-owned\x20intellectual\x20property.\x0a\x0a\x20Copyright\x20(c)\x202003-2024,\x20CKSource\x20Holding\x20sp.\x20z\x20o.o.\x20All\x20rights\x20reserved.\x0a\x0a!-->\x0a\x0a<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M6.182\x205.514a.643.643\x200\x200\x200-.636.64v-.001a.636.636\x200\x200\x200\x20.636.639h5.682a.641.641\x200\x200\x200\x20.636-.638.637.637\x200\x200\x200-.636-.64H6.182Z\x22/><path\x20d=\x22M6.182\x208.5a.642.642\x200\x200\x200-.588.882.636.636\x200\x200\x200\x20.588.395h5.682a.641.641\x200\x200\x200\x20.636-.639.635.635\x200\x200\x200-.636-.638H6.182Z\x22/><path\x20d=\x22M6.18\x2011.5a.64.64\x200\x200\x200\x200\x201.278h3.133a.64.64\x200\x200\x200\x200-1.278H6.18Z\x22/><path\x20d=\x22m11.772\x2018.308.154-.23c-.195-.098-.304-.192-.328-.28-.024-.09\x200-.274.076-.551.062-.166.099-.296.11-.393a2.934\x202.934\x200\x200\x200\x200-.479c-.137-.41-.2-.685-.186-.83.013-.145.117-.335.313-.57l4.465-6.207c.356-.6\x201.059-.56\x202.11.118\x201.05.68\x201.443\x201.272\x201.177\x201.772l-3.876\x206.833c-.105.27-.22.444-.347.515-.128.07-.4.119-.813.139a2.954\x202.954\x200\x200\x200-.487.21c-.127.09-.244.193-.347.31-.193.174-.332.262-.416.262-.064\x200-.178-.05-.346-.15l-.204.27-1.056-.739Zm-.184.274\x201.039.727-.26.34h-1.496l.717-1.067Z\x22/><path\x20clip-rule=\x22evenodd\x22\x20d=\x22M3.272\x201A1.28\x201.28\x200\x200\x200\x202\x202.28v14.439a1.276\x201.276\x200\x200\x200\x201.272\x201.28h6.838a2.13\x202.13\x200\x200\x201\x20.003-.61c.024-.18.066-.363.113-.534.012-.046.027-.092.043-.136.011-.029.02-.052.025-.069v-.008a7.395\x207.395\x200\x200\x201-.042-.142H3.5V2.46s11\x20.002\x2011\x20.005v6.341l.627-.872c.204-.32.49-.614.873-.819V2.281c0-.707-.569-1.28-1.272-1.28L3.272\x201ZM16\x209.29l-1.5\x202.085V16.5h-2.708c.005.118.002.236-.007.354a.904.904\x200\x200\x201-.013.075l-.001.005a3.108\x203.108\x200\x200\x201-.097.312c-.027.101-.048.19-.062.266a.734.734\x200\x200\x200-.014.287.25.25\x200\x200\x200\x20.068.105.65.65\x200\x200\x200\x20.088.074l.017.011.016.01h.175L14.73\x2018c.697\x200\x201.271-.573\x201.271-1.281v-7.43Z\x22/></svg>\x0a';class d extends _0x236ed3{['_suggestionToController'];['_viewToController'];['_annotationViews'];['_handleControllerBuffer'];['_disableComments'];static get['requires'](){return[p,_0x113ad9,'CommentsRepository','Annotations','EditorAnnotations'];}static get['pluginName'](){return'TrackChangesUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x3fe30a){super(_0x3fe30a),this['_suggestionToController']=new Map(),this['_viewToController']=new Map(),this['_annotationViews']=new Map(),this['_handleControllerBuffer']=new Map();const _0x2c35e5=this['editor']['config'];_0x2c35e5['define']('trackChanges.SuggestionThreadView',re),_0x2c35e5['define']('trackChanges.SuggestionView',ce),_0x2c35e5['define']('trackChanges.disableComments',!0x1),this['_disableComments']=_0x2c35e5['get']('trackChanges.disableComments');}['_handleSuggestionControllerDelayed'](_0xb36f4,_0x4b8a6f){0x0===this['_handleControllerBuffer']['size']&&setTimeout(()=>{for(const [_0x119a35,_0x413560]of this['_handleControllerBuffer']){const _0x760ea=this['_suggestionToController']['has'](_0x119a35);_0x760ea||_0x413560?_0x760ea&&_0x413560&&this['_destroyController'](_0x119a35):this['_initializeController'](_0x119a35);}this['_handleControllerBuffer']['clear'](),this['editor']['plugins']['get']('EditorAnnotations')['refreshSelectedViews'](),this['_refreshActiveMarkers']();},0xa),this['_handleControllerBuffer']['set'](_0xb36f4,_0x4b8a6f);}['init'](){const _0x35e715=this['editor'],_0x547877=_0x35e715['plugins']['get']('TrackChangesEditing'),_0x598af6=_0x35e715['plugins']['get']('Annotations'),_0x211d6d=_0x35e715['plugins']['get']('EditorAnnotations'),_0x3c34a6=_0x35e715['plugins']['get']('CommentsRepository');this['_addUIComponentsToFactory'](),_0x211d6d['addSourceCollector'](()=>{const _0x5a57ec=[];for(const [_0x17a348,_0x35872e]of Array['from'](this['_suggestionToController'])){const _0x8b6958=_0x17a348['getAllAdjacentSuggestions'](),_0xcc5e2=[];for(const _0x325cf3 of _0x8b6958){if(!_0x325cf3['isInContent'])continue;if(_0x325cf3['isMultiRange']){_0xcc5e2['push'](..._0x325cf3['getRanges']());continue;}const _0x1283f4=_0x325cf3['getFirstRange']();if(_0xcc5e2['length']>0x0){const _0x1c8ce5=_0xcc5e2[0x0]['getJoined'](_0x1283f4);if(_0x1c8ce5){_0xcc5e2[0x0]=_0x1c8ce5;continue;}}_0xcc5e2['push'](_0x1283f4);}_0x5a57ec['push']([_0x35872e['view'],_0xcc5e2]);}return _0x5a57ec;}),this['listenTo'](_0x547877,'suggestionLoaded',(_0x5528c7,_0x217e68)=>{this['listenTo'](_0x217e68,'change:previous',(_0x48b216,_0x2e82d6,_0xd0f7ac,_0x568593)=>{_0x217e68['isInContent']&&(null==_0xd0f7ac?(this['_updateController'](_0x568593['head']),this['_handleSuggestionControllerDelayed'](_0x217e68,!0x1)):(this['_updateController'](_0xd0f7ac['head']),null==_0x568593&&this['_handleSuggestionControllerDelayed'](_0x217e68,!0x0)));}),null!==_0x217e68['previous']?this['_updateController'](_0x217e68['head']):this['_handleSuggestionControllerDelayed'](_0x217e68,!0x1);}),this['listenTo'](_0x547877,'suggestionUnloaded',(_0x4b8ac9,_0x3aa6d7,_0x4c8103)=>{this['stopListening'](_0x3aa6d7,'change:previous'),this['_handleControllerBuffer']['delete'](_0x3aa6d7),this['_suggestionToController']['has'](_0x3aa6d7)&&this['_destroyController'](_0x3aa6d7),_0x4c8103&&this['_updateController'](_0x4c8103['head']);}),this['listenTo'](_0x547877,'suggestionChanged',(_0x2d1bb5,_0x4ada31)=>{this['_updateController'](_0x4ada31);}),this['listenTo'](_0x598af6,'change:activeAnnotations',()=>{this['_refreshActiveMarkers']();}),this['listenTo'](_0x3c34a6,'addComment',(_0x10c793,{threadId:_0x23df57,isFromAdapter:_0x54f508})=>{if(_0x54f508||!_0x547877['hasSuggestion'](_0x23df57))return;const _0x3fe52d=_0x547877['getSuggestion'](_0x23df57);this['_suggestionToController']['get'](_0x3fe52d)['view']['commentsListView']['focus'](-0x1);},{'priority':'lowest'});}['_refreshActiveMarkers'](){const _0xf87d7a=this['editor']['plugins']['get']('Annotations'),_0x220a33=this['editor']['plugins']['get']('TrackChangesEditing'),_0x1b128b=Array['from'](_0xf87d7a['activeAnnotations'],_0x29254d=>_0x29254d['innerView'])['filter'](_0x32cefb=>this['_viewToController']['has'](_0x32cefb)),_0x53b9fe=[];for(const _0x921cb8 of _0x1b128b){const _0x3304cd=this['_viewToController']['get'](_0x921cb8)['model']['getAllAdjacentSuggestions']();_0x53b9fe['push'](..._0x3304cd['reduce']((_0x1fa007,_0x18cd11)=>[..._0x1fa007,..._0x18cd11['getMarkerNames']()],[]));}_0x220a33['activeMarkers']=_0x53b9fe;}['_addUIComponentsToFactory'](){const _0x1f743d=this['editor'],_0xeee99=_0x1f743d['locale'],_0x38b191=o(_0xeee99,'Track\x20changes'),_0x392c3=new Wt([{'type':'switchbutton','model':new _0x103217({'withText':!0x0,'isToggleable':!0x0,'label':_0x38b191,'commandName':'trackChanges','role':'menuitemcheckbox'})},{'type':'separator'},{'type':'button','model':new _0x103217({'withText':!0x0,'label':o(_0xeee99,'Accept\x20all\x20suggestions'),'commandName':'acceptAllSuggestions','role':'menuitem'})},{'type':'button','model':new _0x103217({'withText':!0x0,'label':o(_0xeee99,'Accept\x20all\x20selected\x20suggestions'),'commandName':'acceptSelectedSuggestions','role':'menuitem'})},{'type':'button','model':new _0x103217({'withText':!0x0,'label':o(_0xeee99,'Discard\x20all\x20suggestions'),'commandName':'discardAllSuggestions','role':'menuitem'})},{'type':'button','model':new _0x103217({'withText':!0x0,'label':o(_0xeee99,'Discard\x20all\x20selected\x20suggestions'),'commandName':'discardSelectedSuggestions','role':'menuitem'})}]);for(const _0xd217a6 of _0x392c3)if(me(_0xd217a6)){const _0x5aab36=_0x1f743d['commands']['get'](_0xd217a6['model']['commandName']);_0xd217a6['model']['bind']('isOn','isEnabled')['to'](_0x5aab36,'value','isEnabled');}_0x1f743d['ui']['componentFactory']['add']('trackChanges',_0x239c97=>this['_createToolbarButton'](_0x239c97,_0x392c3,_0x38b191)),_0x1f743d['ui']['componentFactory']['add']('menuBar:trackChanges',_0x54ad29=>this['_createMenuBarMenu'](_0x54ad29,_0x392c3,_0x38b191));}['_createToolbarButton'](_0x13745d,_0x560a5b,_0x2010bf){const _0x474d04=Qt(_0x13745d,_0xbb00d9),_0x4861f3=this['editor']['commands']['get']('trackChanges');_0x474d04['buttonView']['set']({'tooltip':_0x2010bf,'label':_0x2010bf,'icon':he}),_0x474d04['buttonView']['bind']('isOn')['to'](_0x4861f3,'value'),_0x474d04['buttonView']['on']('execute',()=>{_0x4861f3['execute'](),this['editor']['editing']['view']['focus']();}),Kt(_0x474d04,_0x560a5b,{'role':'menu'});const _0x51deda=[];for(const _0x2330db of _0x560a5b)me(_0x2330db)&&_0x51deda['push'](this['editor']['commands']['get'](_0x2330db['model']['commandName']));const _0x4d76a6=_0x474d04['buttonView'];return _0x4d76a6['actionView']['unbind']('isEnabled'),_0x4d76a6['arrowView']['unbind']('isEnabled'),_0x4d76a6['actionView']['bind']('isEnabled')['to'](_0x4861f3,'isEnabled'),_0x4d76a6['arrowView']['bind']('isEnabled')['toMany'](_0x51deda,'isEnabled',(..._0x5ebdf1)=>_0x5ebdf1['some'](_0x34c34d=>_0x34c34d)),_0x474d04['on']('execute',_0x4113f3=>{this['editor']['execute'](_0x4113f3['source']['commandName']),this['editor']['editing']['view']['focus']();}),_0x474d04;}['_createMenuBarMenu'](_0x52aebf,_0x5788ae,_0x4bf107){const _0xc221c6=new Yt(_0x52aebf),_0x38e747=this['editor']['commands']['get']('trackChanges');_0xc221c6['buttonView']['set']({'label':_0x4bf107,'icon':he});const _0x3eac1e=new Zt(_0x52aebf);for(const _0x3fbb39 of _0x5788ae){if('separator'==_0x3fbb39['type']){_0x3eac1e['items']['add'](new Xt(_0x52aebf));continue;}const _0x341551=new te(_0x52aebf,_0xc221c6),_0x21043b=new _0x122f37(_0x52aebf),_0x55f06e=_0x3fbb39['model'];_0x21043b['bind'](...Object['keys'](_0x55f06e))['to'](_0x55f06e),_0x21043b['delegate']('execute')['to'](_0xc221c6),_0x21043b['on']('execute',()=>{this['editor']['execute'](_0x55f06e['commandName']),this['editor']['editing']['view']['focus']();}),_0x341551['children']['add'](_0x21043b),_0x3eac1e['items']['add'](_0x341551);}return _0xc221c6['bind']('isEnabled')['to'](_0x38e747,'isEnabled'),_0xc221c6['panelView']['children']['add'](_0x3eac1e),_0xc221c6;}['_initializeController'](_0x5844fb){const _0x598a36=this['editor'],_0x50f194=_0x598a36['config'],_0x5d4ba2=_0x598a36['plugins']['get']('Annotations'),_0x4176c7=_0x598a36['plugins']['get']('CommentsRepository'),_0x453809=_0x598a36['plugins']['get']('EditorAnnotations'),_0x51db78=_0x598a36['plugins']['get'](_0x113ad9)['me'],_0x5c4b04=_0x50f194['get']('trackChanges')['SuggestionThreadView'],_0x566f31=_0x50f194['get']('trackChanges')['SuggestionView'],{CommentsListView:_0x17d89f,CommentThreadInputView:_0x2721b6}=_0x598a36['plugins']['get']('CommentsUI');let _0x4a68da,_0x35f802,_0x42a94d;this['_annotationViews']['has'](_0x5844fb['id'])?(_0x35f802=this['_annotationViews']['get'](_0x5844fb['id']),_0x4a68da=_0x35f802['mainView']):(_0x4a68da=new _0x5c4b04(_0x598a36['locale'],_0x5844fb,_0x51db78,{'disableComments':this['_disableComments'],'editorConfig':_0x50f194['get']('comments.editorConfig'),'maxCommentsWhenCollapsed':_0x50f194['get']('comments.maxCommentsWhenCollapsed'),'maxThreadTotalWeight':_0x50f194['get']('comments.maxThreadTotalWeight'),'maxCommentCharsWhenCollapsed':_0x50f194['get']('comments.maxCommentCharsWhenCollapsed'),'formatDateTime':_0x3970d4(_0x50f194['get']('locale')),'CommentView':_0x50f194['get']('comments')['CommentView'],'CommentsListView':_0x17d89f,'CommentThreadInputView':_0x2721b6,'SuggestionView':_0x566f31}),_0x4a68da['suggestionView']['acceptButton']['on']('execute',()=>{_0x598a36['editing']['view']['focus']();}),_0x4a68da['suggestionView']['discardButton']['on']('execute',()=>{_0x598a36['editing']['view']['focus']();}),_0x35f802=_0x5d4ba2['createAnnotationView'](this['editor']['locale'],_0x4a68da),_0x35f802['bind']('isDirty')['to'](_0x4a68da,'isDirty'),_0x35f802['bind']('length')['to'](_0x4a68da),_0x35f802['bind']('type')['to'](_0x4a68da,'type',_0x2555b1=>'suggestion-'+_0x2555b1),_0x4a68da['on']('escape',()=>{_0x42a94d['fire']('escape');}),this['_annotationViews']['set'](_0x5844fb['id'],_0x35f802));const _0x2a762b=_0x4176c7['createCommentThreadController'](_0x5844fb['commentThread'],_0x4a68da),_0x37998f=new ae(_0x598a36,_0x5844fb,_0x4a68da,_0x2a762b),_0x4c6f2b=_0x5844fb['getAllAdjacentSuggestions']()['filter'](_0x489ede=>_0x489ede['isInContent']);_0x4a68da['descriptionParts']=_0x598a36['plugins']['get']('TrackChangesEditing')['descriptionFactory']['getDescriptions'](_0x4c6f2b),this['_suggestionToController']['set'](_0x5844fb,_0x37998f),this['_viewToController']['set'](_0x4a68da,_0x37998f),_0x42a94d=_0x5d4ba2['createAnnotation']({'view':_0x35f802,'target':()=>{const _0x436279=[],_0x23f9e0=_0x5844fb['getAllAdjacentSuggestions']()['filter'](_0x2014cb=>_0x2014cb['isInContent']);for(const _0x57c52d of _0x23f9e0)_0x436279['push'](..._0x57c52d['getMarkers']());return _0x11fcdd(_0x598a36['editing'],_0x436279);},'type':()=>'suggestion-'+_0x37998f['view']['type']}),_0x4176c7['_bindAnnotationToEditors'](_0x4a68da,_0x42a94d),_0x5d4ba2['add'](_0x42a94d),_0x453809['registerAnnotation'](_0x42a94d);}['_destroyController'](_0x2bbb2c){const _0x301289=this['editor']['plugins']['get']('CommentsRepository'),_0x239958=this['editor']['plugins']['get']('Annotations'),_0x499957=this['_suggestionToController']['get'](_0x2bbb2c),_0x2a25f4=_0x499957['view'],_0x362940=_0x239958['getByInnerView'](_0x2a25f4);_0x301289['_unbindEditors'](_0x2a25f4),_0x362940&&_0x239958['remove'](_0x362940),this['_suggestionToController']['delete'](_0x2bbb2c),this['_viewToController']['delete'](_0x2a25f4),_0x499957['destroy']();}['_updateController'](_0x516d69){if(!_0x516d69['isInContent']||!this['_suggestionToController']['has'](_0x516d69))return;const _0x405ffb=this['editor']['plugins']['get']('TrackChangesEditing'),_0x8eceef=this['_suggestionToController']['get'](_0x516d69),_0x5e2d8f=_0x516d69['getAllAdjacentSuggestions']();_0x8eceef['view']['descriptionParts']=_0x405ffb['descriptionFactory']['getDescriptions'](_0x5e2d8f);}['destroy'](){for(const _0x41287b of this['_suggestionToController']['keys']())this['_destroyController'](_0x41287b);for(const _0x398566 of this['_annotationViews']['values']())_0x398566['mainView']['destroy']();super['destroy']();}}function me(_0x53d11c){return'model'in _0x53d11c;}class k extends _0x236ed3{static get['requires'](){return[p,d,'Comments'];}static get['pluginName'](){return'TrackChanges';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}set['adapter'](_0x29411c){this['editor']['plugins']['get'](p)['adapter']=_0x29411c;}get['adapter'](){return this['editor']['plugins']['get'](p)['adapter'];}['addSuggestion'](_0x167b6c){return this['editor']['plugins']['get'](p)['addSuggestionData'](_0x167b6c);}['getSuggestions']({skipNotAttached:_0x140891=!0x1,toJSON:_0x2944b2=!0x1}={}){return this['editor']['plugins']['get'](p)['getSuggestions']({'skipNotAttached':_0x140891,'toJSON':_0x2944b2});}['getSuggestion'](_0x1df09b){return this['editor']['plugins']['get'](p)['getSuggestion'](_0x1df09b);}}const w=['Pagination'];class T extends _0x236ed3{static get['requires'](){return[p];}static get['pluginName'](){return'TrackChangesData';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const _0x5e0684=this['editor'];if(_0x5e0684['config']['define']('trackChangesData.editorCreator',_0x5ee167=>{const _0x5d9a0f=_0x5e0684['model']['document']['getRootNames']()['reduce']((_0x147d67,_0x16fdaa)=>(_0x147d67[_0x16fdaa]='',_0x147d67),{});return _0x5e0684['constructor']['create'](_0x5d9a0f,_0x5ee167);}),'function'!=typeof _0x5e0684['config']['get']('trackChangesData')['editorCreator'])throw new _0x208bcb('track-changes-data-invalid-editor-creator');}['getDataWithAcceptedSuggestions'](_0x226b67){return N(this['editor'],!0x0,_0x226b67);}['getDataWithDiscardedSuggestions'](_0x4cf588){return N(this['editor'],!0x1,_0x4cf588);}}class D extends _0x236ed3{['result'];static get['pluginName'](){return'TrackChangesDataGetter';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x50ddc0){super(_0x50ddc0),this['result']='end';}['init'](){this['editor']['plugins']['get']('CommentsRepository')['_adapter']={'addCommentThread':()=>new Promise(()=>{}),'getCommentThread':()=>new Promise(()=>{}),'updateCommentThread':()=>new Promise(()=>{}),'resolveCommentThread':()=>new Promise(()=>{}),'reopenCommentThread':()=>new Promise(()=>{}),'removeCommentThread':()=>new Promise(()=>{}),'addComment':()=>new Promise(()=>{}),'updateComment':()=>new Promise(()=>{}),'removeComment':()=>new Promise(()=>{})},this['editor']['plugins']['get']('TrackChangesEditing')['_adapter']=null;}}function v(_0x31f542){return void 0x0!==_0x31f542['getRootsAttributes'];}async function N(_0x48a61c,_0x20a89d,_0x32191e){const _0xa45a3c=_0x2efe98(_0x48a61c,w);_0xa45a3c['plugins']['push'](p,D),_0xa45a3c['rootsAttributes']=v(_0x48a61c)?_0x48a61c['getRootsAttributes']():void 0x0;const _0x1fcd8a=document['createDocumentFragment'](),_0x38ef37=_0x48a61c['config']['get']('trackChangesData')['editorCreator'],_0x215c5c=await _0x38ef37(_0xa45a3c,()=>function(_0x202f24){const _0x137baf=document['createElement']('div');return _0x202f24['appendChild'](_0x137baf),_0x137baf;}(_0x1fcd8a));!function(_0x3b2ac9,_0x1ed051){const _0x320e62=_0x3b2ac9['model']['document']['getRootNames']()['reduce']((_0x6c256f,_0x378473)=>(_0x6c256f[_0x378473]=_0x3b2ac9['data']['get']({'rootName':_0x378473}),_0x6c256f),{}),_0x2ba94a=_0x3b2ac9['plugins']['get']('Users')['users']['map'](_0x3364df=>({'id':_0x3364df['id'],'name':_0x3364df['name']})),_0x5471b8=_0x3b2ac9['plugins']['get']('TrackChangesEditing')['getSuggestions']({'skipNotAttached':!0x0,'toJSON':!0x0}),_0x18fdfd=_0x3b2ac9['plugins']['get']('CommentsRepository')['getCommentThreads']({'skipNotAttached':!0x0,'toJSON':!0x0}),_0x5a8c96=_0x1ed051['plugins']['get']('Users'),_0x1791d6=_0x1ed051['plugins']['get']('TrackChangesEditing'),_0x5c20eb=_0x1ed051['plugins']['get']('CommentsRepository');for(const _0x206543 of _0x5c20eb['getCommentThreads']())_0x206543['remove']();for(const _0x5b0ea7 of _0x2ba94a)_0x5a8c96['getUser'](_0x5b0ea7['id'])||_0x5a8c96['addUser'](_0x5b0ea7);_0x5a8c96['me']||_0x5a8c96['useAnonymousUser']();for(const _0x5da951 of _0x18fdfd)_0x5c20eb['addCommentThread'](_0x5da951);for(const _0x2efc09 of _0x5471b8)_0x1791d6['addSuggestionData'](_0x2efc09);_0x1ed051['data']['set'](_0x320e62);}(_0x48a61c,_0x215c5c),_0x215c5c['execute'](_0x20a89d?'acceptAllSuggestions':'discardAllSuggestions');const _0x4832cd=v(_0x215c5c)?_0x215c5c['getFullData'](_0x32191e):_0x215c5c['data']['get'](_0x32191e);return await _0x215c5c['destroy'](),_0x4832cd;}export{us as BaseSuggestionThreadView,u as Suggestion,re as SuggestionThreadView,ce as SuggestionView,k as TrackChanges,T as TrackChangesData,p as TrackChangesEditing};